{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hakty\\\\Desktop\\\\AI-Dungeon-Master\\\\frontend\\\\src\\\\components\\\\GameScreen.jsx\",\n  _s = $RefreshSig$();\n// frontend/src/components/GameScreen.jsx - WITH QUEST SYSTEM, BESTIARY, SPELLS, STATUS EFFECTS, AND SHOP\nimport { useState, useEffect, useRef } from \"react\";\nimport { useCampaignStore } from \"../state/campaignStore\";\nimport { playTurn } from \"../services/api\";\nimport { generateVoice } from \"../services/voiceApi\";\nimport { generateSoundEffects } from \"../services/soundEffectsApi\";\nimport { parseNarrative } from \"../utils/narrativeParser\";\nimport { autoSave } from \"../services/saveLoadService\";\nimport { processXPFromNarration, awardXPToParty } from \"../utils/xpSystem\";\nimport { detectScene } from \"../utils/musicSceneDetection\";\nimport { detectLootInNarration, addItemToInventory } from \"../utils/inventorySystem\";\nimport { detectQuestEvents } from \"../utils/questSystem\";\nimport { SPELLCASTING_CLASSES, isThirdCaster } from \"../utils/spellSystem\";\nimport { detectMerchantInNarration, createMerchant, MERCHANT_TYPES } from '../utils/merchantSystem';\nimport { createStatusEffect, applyStatusEffect, STATUS_EFFECTS, DURATION_TYPES } from \"../utils/statusEffectSystem\";\nimport ChatLog from \"./ChatLog\";\nimport DiceRoller from \"./DiceRoller\";\nimport SaveLoadModal from \"./SaveLoadModal\";\nimport CharacterSheet from \"./CharacterSheet\";\nimport LevelUpNotification from \"./LevelUpNotification\";\nimport XPNotification from \"./XPNotification\";\nimport CombatTracker from \"./CombatTracker\";\nimport StartCombatModal from \"./StartCombatModal\";\nimport MusicSystem from \"./MusicSystem\";\nimport InventoryPanel from \"./InventoryPanel\";\nimport QuestJournal from \"./QuestJournal\";\nimport Bestiary from './Bestiary';\nimport SpellBook from './SpellBook';\nimport StatusEffectsPanel from './StatusEffectsPanel';\nimport ApplyStatusEffectModal from './ApplyStatusEffectModal';\nimport PatreonButton from \"./PatreonButton\";\nimport ShopModal from './ShopModal';\n\n/* ============================\n   Combat Detection Helper\n   ============================ */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction detectCombatInNarration(narration) {\n  if (!narration) return null;\n  if (narration.includes('**COMBAT_START**')) {\n    return {\n      type: 'start',\n      marker: '**COMBAT_START**'\n    };\n  }\n  if (narration.includes('**COMBAT_END**')) {\n    return {\n      type: 'end',\n      marker: '**COMBAT_END**'\n    };\n  }\n  const lowerText = narration.toLowerCase();\n  const combatStartKeywords = ['attacks you', 'draws their weapon', 'charges at you', 'initiative', 'roll for initiative', 'combat begins', 'enemies appear', 'ambush', 'surprise attack'];\n  const hasCombatStart = combatStartKeywords.some(kw => lowerText.includes(kw));\n  if (hasCombatStart) return {\n    type: 'start',\n    marker: null\n  };\n  return null;\n}\n\n/* ============================\n   Status Effect Detection\n   ============================ */\nfunction detectStatusEffectsInNarration(narration) {\n  const lowerText = narration.toLowerCase();\n  const detectedEffects = [];\n  const effectKeywords = {\n    [STATUS_EFFECTS.POISONED]: ['poisoned', 'poison', 'venom', 'toxic'],\n    [STATUS_EFFECTS.PARALYZED]: ['paralyzed', 'paralysis', 'cannot move'],\n    [STATUS_EFFECTS.STUNNED]: ['stunned', 'dazed', 'disoriented'],\n    [STATUS_EFFECTS.FRIGHTENED]: ['frightened', 'terrified', 'scared', 'fear'],\n    [STATUS_EFFECTS.CHARMED]: ['charmed', 'enchanted', 'beguiled'],\n    [STATUS_EFFECTS.BLINDED]: ['blinded', 'blind', 'cannot see'],\n    [STATUS_EFFECTS.PRONE]: ['knocked prone', 'falls prone', 'knocked down'],\n    [STATUS_EFFECTS.RESTRAINED]: ['restrained', 'grappled', 'held', 'entangled'],\n    [STATUS_EFFECTS.UNCONSCIOUS]: ['unconscious', 'knocked out', 'falls unconscious'],\n    [STATUS_EFFECTS.BURNING]: ['on fire', 'burning', 'catches fire', 'ignites'],\n    [STATUS_EFFECTS.BLEEDING]: ['bleeding', 'blood', 'wounded'],\n    [STATUS_EFFECTS.BLESSED]: ['blessed', 'divine favor', 'bless'],\n    [STATUS_EFFECTS.HASTED]: ['hasted', 'speed increased', 'quickened'],\n    [STATUS_EFFECTS.SLOWED]: ['slowed', 'sluggish', 'speed reduced']\n  };\n  Object.entries(effectKeywords).forEach(([effectType, keywords]) => {\n    if (keywords.some(keyword => lowerText.includes(keyword))) {\n      console.log(`âœ¨ Detected status effect: ${effectType}`);\n      let duration = 1;\n      let durationType = DURATION_TYPES.ROUNDS;\n      if (effectType === STATUS_EFFECTS.BURNING || effectType === STATUS_EFFECTS.BLEEDING) {\n        duration = 3;\n      }\n      detectedEffects.push({\n        type: effectType,\n        duration,\n        durationType,\n        source: 'Combat',\n        saveDC: null\n      });\n    }\n  });\n  return detectedEffects;\n}\nexport default function GameScreen() {\n  _s();\n  const [input, setInput] = useState(\"\");\n  const [isGeneratingVoice, setIsGeneratingVoice] = useState(false);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [showLoadModal, setShowLoadModal] = useState(false);\n  const [selectedCharacter, setSelectedCharacter] = useState(null);\n  const [showCharacterSheet, setShowCharacterSheet] = useState(false);\n  const [levelUpData, setLevelUpData] = useState(null);\n  const [xpNotification, setXPNotification] = useState(null);\n  const [combat, setCombat] = useState(null);\n  const [showStartCombat, setShowStartCombat] = useState(false);\n  const [showInventory, setShowInventory] = useState(false);\n  const [activeCharacterInventory, setActiveCharacterInventory] = useState(null);\n  const [lastDiceRoll, setLastDiceRoll] = useState(null);\n  const [showQuestJournal, setShowQuestJournal] = useState(false);\n  const [showBestiary, setShowBestiary] = useState(false);\n  const [encounteredEnemies, setEncounteredEnemies] = useState([]);\n  const [showSpellBook, setShowSpellBook] = useState(false);\n  const [activeSpellcaster, setActiveSpellcaster] = useState(null);\n  const [showApplyStatusEffect, setShowApplyStatusEffect] = useState(false);\n  const [statusEffectTarget, setStatusEffectTarget] = useState(null);\n  const [showShop, setShowShop] = useState(false);\n  const audioRef = useRef(null);\n  const audioQueue = useRef([]);\n  const isPlaying = useRef(false);\n  const recognitionRef = useRef(null);\n  const silenceTimeoutRef = useRef(null);\n  const musicSystemRef = useRef(null);\n  const campaign = useCampaignStore(state => state.campaign);\n  const party = useCampaignStore(state => state.party);\n  const updateFromDM = useCampaignStore(state => state.updateFromDM);\n  const setCampaign = useCampaignStore(state => state.setCampaign);\n  const updateParty = useCampaignStore(state => state.updateParty);\n  const voiceMode = useCampaignStore(state => state.voiceMode);\n  const soundEffectsEnabled = useCampaignStore(state => state.soundEffectsEnabled || false);\n  const micListening = useCampaignStore(state => state.micListening);\n  const toggleMic = useCampaignStore(state => state.toggleMic);\n  const addDiceRoll = useCampaignStore(state => state.addDiceRoll);\n  const toggleVoice = useCampaignStore(state => state.toggleVoice);\n  const toggleSoundEffects = useCampaignStore(state => state.toggleSoundEffects || (() => {}));\n  const quests = useCampaignStore(state => state.quests || []);\n  const addQuest = useCampaignStore(state => state.addQuest);\n  const completeQuestById = useCampaignStore(state => state.completeQuestById);\n  const updateQuest = useCampaignStore(state => state.updateQuest);\n  const activeMerchant = useCampaignStore(state => state.activeMerchant);\n  const setActiveMerchant = useCampaignStore(state => state.setActiveMerchant);\n  const updateActiveMerchant = useCampaignStore(state => state.updateActiveMerchant);\n  const clearActiveMerchant = useCampaignStore(state => state.clearActiveMerchant);\n  useEffect(() => {}, [micListening]);\n  const playAudioQueue = () => {\n    if (isPlaying.current || audioQueue.current.length === 0) return;\n    isPlaying.current = true;\n    const audioItem = audioQueue.current.shift();\n    if (!audioRef.current) audioRef.current = new Audio();\n    audioRef.current.src = audioItem.audio;\n    audioRef.current.volume = audioItem.volume || 1.0;\n    audioRef.current.onended = () => {\n      isPlaying.current = false;\n      playAudioQueue();\n    };\n    audioRef.current.onerror = () => {\n      isPlaying.current = false;\n      playAudioQueue();\n    };\n    audioRef.current.play().catch(() => {\n      isPlaying.current = false;\n      playAudioQueue();\n    });\n  };\n  const playBackgroundSound = (audioData, category) => {\n    try {\n      const audio = new Audio(audioData);\n      audio.volume = 0.3;\n      audio.loop = false;\n      audio.play().catch(() => {});\n    } catch (err) {}\n  };\n  const playSoundEffects = async text => {\n    if (!soundEffectsEnabled) return;\n    try {\n      const soundEffects = await generateSoundEffects(text);\n      soundEffects.forEach(sfx => playBackgroundSound(sfx.audio, sfx.category));\n    } catch (err) {}\n  };\n  const speakWithElevenLabs = async (text, voice = \"narrator\") => {\n    if (!voiceMode) return;\n    try {\n      setIsGeneratingVoice(true);\n      const cleanText = text.replace(/\\*\\*(.*?)\\*\\*/g, \"$1\").replace(/\\*(.*?)\\*/g, \"$1\").replace(/#{1,6}\\s/g, \"\");\n      const audioData = await generateVoice({\n        text: cleanText,\n        voice\n      });\n      audioQueue.current.push({\n        audio: audioData,\n        type: `narration_${voice}`,\n        volume: 1.0\n      });\n      if (!isPlaying.current) playAudioQueue();\n      setIsGeneratingVoice(false);\n    } catch (err) {\n      setIsGeneratingVoice(false);\n      const utterance = new SpeechSynthesisUtterance(text);\n      speechSynthesis.speak(utterance);\n    }\n  };\n  const speakAIResponse = async aiResponse => {\n    if (!voiceMode) return;\n    const fullText = typeof aiResponse === 'string' ? aiResponse : Array.isArray(aiResponse) ? aiResponse.map(e => e.text).join(' ') : '';\n    if (soundEffectsEnabled && fullText) playSoundEffects(fullText);\n    if (Array.isArray(aiResponse)) {\n      for (const entry of aiResponse) {\n        var _entry$description, _entry$description2, _entry$description3;\n        const voice = (_entry$description = entry.description) !== null && _entry$description !== void 0 && _entry$description.toLowerCase().includes(\"dark\") ? \"dark\" : (_entry$description2 = entry.description) !== null && _entry$description2 !== void 0 && _entry$description2.toLowerCase().includes(\"old\") ? \"old_wise\" : (_entry$description3 = entry.description) !== null && _entry$description3 !== void 0 && _entry$description3.toLowerCase().includes(\"gruff\") ? \"gruff\" : \"narrator\";\n        await speakWithElevenLabs(entry.text, voice);\n      }\n      return;\n    }\n    if (typeof aiResponse === 'string' && aiResponse.trim()) {\n      const segments = parseNarrative(aiResponse);\n      for (const segment of segments) {\n        await speakWithElevenLabs(segment.text, segment.voice);\n      }\n    }\n  };\n  const handleDiceRoll = ({\n    sides,\n    result\n  }) => {\n    console.log(\"ðŸŽ² Rolled d\" + sides + \":\", result);\n    setLastDiceRoll({\n      sides,\n      result,\n      timestamp: Date.now()\n    });\n    addDiceRoll({\n      sides,\n      result\n    });\n  };\n  const handleOpenInventory = character => {\n    setActiveCharacterInventory(character);\n    setShowInventory(true);\n  };\n  const handleUpdateCharacterInventory = updatedChar => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setActiveCharacterInventory(updatedChar);\n  };\n  const handleUpdateInventory = newInventory => {\n    if (activeCharacterInventory) {\n      const updatedChar = {\n        ...activeCharacterInventory,\n        inventory: newInventory\n      };\n      handleUpdateCharacterInventory(updatedChar);\n    }\n  };\n  const handleOpenSpellBook = character => {\n    setActiveSpellcaster(character);\n    setShowSpellBook(true);\n  };\n  const handleUpdateSpellcaster = updatedChar => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setActiveSpellcaster(updatedChar);\n  };\n  const handleOpenStatusEffects = character => {\n    setStatusEffectTarget(character);\n    setShowApplyStatusEffect(true);\n  };\n  const handleApplyStatusEffect = updatedChar => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setShowApplyStatusEffect(false);\n    setStatusEffectTarget(null);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!input.trim()) return;\n    let enhancedMessage = input;\n    if (lastDiceRoll && Date.now() - lastDiceRoll.timestamp < 30000) {\n      enhancedMessage = `${input} [Player rolled d${lastDiceRoll.sides}: ${lastDiceRoll.result}]`;\n      console.log(\"ðŸŽ² Including dice roll:\", lastDiceRoll);\n      setLastDiceRoll(null);\n    }\n    try {\n      const dmResponse = await playTurn({\n        message: enhancedMessage,\n        campaign,\n        party\n      });\n      updateFromDM(dmResponse);\n      if (dmResponse !== null && dmResponse !== void 0 && dmResponse.aiResponse && party.length > 0) {\n        // XP Detection\n        const xpResult = processXPFromNarration(dmResponse.aiResponse, party);\n        if (xpResult) {\n          updateParty(xpResult.partyUpdates);\n          setXPNotification({\n            xpGained: xpResult.totalXP,\n            reason: xpResult.message\n          });\n          if (xpResult.levelUps.length > 0) {\n            setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n          }\n        }\n\n        // Loot Detection\n        const foundLoot = detectLootInNarration(dmResponse.aiResponse);\n        if (foundLoot.length > 0) {\n          const updatedParty = party.map((char, index) => {\n            if (index === 0) {\n              let newInventory = char.inventory || [];\n              foundLoot.forEach(item => {\n                newInventory = addItemToInventory(newInventory, item);\n              });\n              return {\n                ...char,\n                inventory: newInventory\n              };\n            }\n            return char;\n          });\n          updateParty(updatedParty);\n          const itemNames = foundLoot.map(i => i.name).join(', ');\n          setTimeout(() => alert(`ðŸ“¦ Found: ${itemNames}!`), 1000);\n        }\n\n        // Status Effect Detection\n        const detectedEffects = detectStatusEffectsInNarration(dmResponse.aiResponse);\n        if (detectedEffects.length > 0) {\n          console.log(\"âœ¨ Status effects detected:\", detectedEffects);\n          const updatedParty = party.map((char, index) => {\n            if (index === 0) {\n              let updatedChar = {\n                ...char\n              };\n              detectedEffects.forEach(effectData => {\n                const effect = createStatusEffect(effectData);\n                if (effect) updatedChar = applyStatusEffect(updatedChar, effect);\n              });\n              return updatedChar;\n            }\n            return char;\n          });\n          updateParty(updatedParty);\n          const effectNames = detectedEffects.map(e => {\n            const effectDef = require('../utils/statusEffectSystem').STATUS_EFFECT_DEFINITIONS[e.type];\n            return effectDef ? effectDef.name : e.type;\n          }).join(', ');\n          setTimeout(() => {\n            alert(`âœ¨ Status Effect Applied: ${effectNames}!`);\n          }, 1500);\n        }\n\n        // Quest Detection\n        const questEvents = detectQuestEvents(dmResponse.aiResponse);\n        if (questEvents.length > 0) {\n          console.log(\"ðŸ“œ Quest events detected:\", questEvents);\n          questEvents.forEach(event => {\n            if (event.type === 'quest_started' && event.quest) {\n              addQuest(event.quest);\n              setTimeout(() => {\n                alert(`ðŸ“œ New Quest: ${event.quest.title}!\\n\\n${event.quest.description}`);\n              }, 1000);\n            } else if (event.type === 'quest_completed') {\n              const activeQuest = quests.find(q => q.status === 'active');\n              if (activeQuest) {\n                completeQuestById(activeQuest.id);\n                if (activeQuest.rewards.xp > 0) {\n                  const xpResult = awardXPToParty(party, activeQuest.rewards.xp, `Quest: ${activeQuest.title}`);\n                  updateParty(xpResult.partyUpdates);\n                  setXPNotification({\n                    xpGained: activeQuest.rewards.xp,\n                    reason: `Quest Complete: ${activeQuest.title}`\n                  });\n                  if (xpResult.levelUps.length > 0) {\n                    setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n                  }\n                }\n                setTimeout(() => {\n                  alert(`âœ“ Quest Completed: ${activeQuest.title}!\\n\\nRewards:\\nâ€¢ ${activeQuest.rewards.xp} XP\\nâ€¢ ${activeQuest.rewards.gold} Gold`);\n                }, 1500);\n              }\n            } else if (event.type === 'quest_updated') {\n              console.log(\"ðŸ“ Quest progress updated\");\n            } else if (event.type === 'quest_failed') {\n              const activeQuest = quests.find(q => q.status === 'active');\n              if (activeQuest) {\n                updateQuest(activeQuest.id, {\n                  status: 'failed',\n                  completedAt: new Date().toISOString()\n                });\n                setTimeout(() => alert(`âœ— Quest Failed: ${activeQuest.title}`), 1000);\n              }\n            }\n          });\n        }\n\n        // Merchant Detection\n        const detectedMerchant = detectMerchantInNarration(dmResponse.aiResponse);\n        if (detectedMerchant && !activeMerchant) {\n          console.log('ðŸª Merchant detected:', detectedMerchant.name);\n          setActiveMerchant(detectedMerchant);\n          setShowShop(true);\n          setTimeout(() => {\n            alert(`ðŸª ${detectedMerchant.icon} ${detectedMerchant.name} is open for business!`);\n          }, 1200);\n        }\n\n        // Combat Detection\n        const combatDetection = detectCombatInNarration(dmResponse.aiResponse);\n        if (combatDetection) {\n          console.log(\"âš”ï¸ Combat detected:\", combatDetection.type);\n          if (combatDetection.type === 'start' && !(combat !== null && combat !== void 0 && combat.isActive)) {\n            setTimeout(() => {\n              alert(\"âš”ï¸ Combat begins! Select your enemies.\");\n              setShowStartCombat(true);\n            }, 1500);\n          } else if (combatDetection.type === 'end' && combat !== null && combat !== void 0 && combat.isActive) {\n            setTimeout(() => {\n              handleEndCombat({\n                result: 'victory',\n                message: 'Victory! All enemies defeated.',\n                xpReward: 100\n              });\n            }, 1000);\n          }\n        }\n      }\n      autoSave(dmResponse.campaignState, party);\n      if (dmResponse !== null && dmResponse !== void 0 && dmResponse.aiResponse) {\n        await speakAIResponse(dmResponse.aiResponse);\n        if (musicSystemRef.current) {\n          const scene = detectScene(dmResponse.aiResponse, (combat === null || combat === void 0 ? void 0 : combat.isActive) || false);\n          if (scene) musicSystemRef.current.playTrack(scene.track);\n        }\n      }\n      setInput(\"\");\n    } catch (err) {\n      console.error(\"âŒ Turn error:\", err);\n    }\n  };\n  const handleLoadCampaign = (loadedCampaign, loadedParty) => {\n    setCampaign({\n      ...loadedCampaign,\n      party: loadedParty\n    });\n    alert(\"Campaign loaded successfully!\");\n  };\n  const handleCharacterUpdate = updatedCharacter => {\n    const updatedParty = party.map(char => char.name === updatedCharacter.name ? updatedCharacter : char);\n    updateParty(updatedParty);\n    setSelectedCharacter(updatedCharacter);\n  };\n  const handleViewCharacter = character => {\n    setSelectedCharacter(character);\n    setShowCharacterSheet(true);\n  };\n  const handleStartCombat = newCombat => {\n    setCombat(newCombat);\n    setShowStartCombat(false);\n    const newEnemies = newCombat.combatants.filter(c => c.isEnemy).map(e => e.id.split('_')[0]);\n    setEncounteredEnemies(prev => {\n      const unique = [...new Set([...prev, ...newEnemies])];\n      console.log(\"ðŸ“– Encountered enemies:\", unique);\n      return unique;\n    });\n    if (musicSystemRef.current) musicSystemRef.current.playTrack('combat_easy');\n  };\n  const handleUpdateCombat = updatedCombat => setCombat(updatedCombat);\n  const handleEndCombat = result => {\n    if (musicSystemRef.current) {\n      if (result.result === 'victory') {\n        musicSystemRef.current.playTrack('victory');\n        setTimeout(() => {\n          if (musicSystemRef.current) musicSystemRef.current.playTrack('peaceful_village');\n        }, 8000);\n      } else if (result.result === 'defeat') {\n        musicSystemRef.current.playTrack('defeat');\n      }\n    }\n    if (result.result === 'victory' && result.xpReward) {\n      const xpResult = awardXPToParty(party, result.xpReward, 'Combat Victory');\n      updateParty(xpResult.partyUpdates);\n      setXPNotification({\n        xpGained: result.xpReward,\n        reason: 'Combat Victory!'\n      });\n      if (xpResult.levelUps.length > 0) {\n        setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n      }\n    }\n    setCombat(null);\n    alert(result.message);\n  };\n  if (!campaign) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    style: {\n      textAlign: 'center',\n      paddingTop: '100px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"No Campaign Started\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 459,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: '#888',\n        fontSize: '18px'\n      },\n      children: \"Please start a campaign from the setup screen.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 460,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 458,\n    columnNumber: 5\n  }, this);\n  const activeQuestCount = quests.filter(q => q.status === 'active').length;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      minHeight: '100vh',\n      background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mb-lg\",\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            justifyContent: 'space-between',\n            alignItems: 'center'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              style: {\n                margin: 0\n              },\n              children: [campaign.theme, \" Adventure\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 473,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              style: {\n                margin: '5px 0 0 0',\n                color: '#aaa',\n                fontSize: '16px'\n              },\n              children: [\"Difficulty: \", campaign.difficulty]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 472,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '10px',\n              flexWrap: 'wrap'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowQuestJournal(true),\n              className: \"btn btn-info\",\n              style: {\n                position: 'relative'\n              },\n              children: [\"\\uD83D\\uDCD6 Quests\", activeQuestCount > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  position: 'absolute',\n                  top: '-8px',\n                  right: '-8px',\n                  backgroundColor: '#ffd700',\n                  color: '#000',\n                  borderRadius: '50%',\n                  width: '24px',\n                  height: '24px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '12px',\n                  fontWeight: 'bold',\n                  border: '2px solid #1a1a1a'\n                },\n                children: activeQuestCount\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 479,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowBestiary(true),\n              className: \"btn btn-danger\",\n              style: {\n                position: 'relative'\n              },\n              children: [\"\\uD83D\\uDCDA Bestiary\", encounteredEnemies.length > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  position: 'absolute',\n                  top: '-8px',\n                  right: '-8px',\n                  backgroundColor: '#ffd700',\n                  color: '#000',\n                  borderRadius: '50%',\n                  width: '24px',\n                  height: '24px',\n                  display: 'flex',\n                  alignItems: 'center',\n                  justifyContent: 'center',\n                  fontSize: '12px',\n                  fontWeight: 'bold',\n                  border: '2px solid #1a1a1a'\n                },\n                children: encounteredEnemies.length\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => {\n                if (!activeMerchant) setActiveMerchant(createMerchant(MERCHANT_TYPES.GENERAL, 'Travelling Merchant'));\n                setShowShop(true);\n              },\n              className: \"btn\",\n              style: {\n                backgroundColor: activeMerchant ? '#c9a84c' : '#3a3000',\n                color: activeMerchant ? '#000' : '#c9a84c',\n                border: '1px solid #c9a84c',\n                position: 'relative'\n              },\n              children: [\"\\uD83C\\uDFEA \", activeMerchant ? activeMerchant.name : 'Shop']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 498,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowStartCombat(true),\n              className: \"btn btn-danger\",\n              children: \"\\u2694\\uFE0F Combat\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 514,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowSaveModal(true),\n              className: \"btn btn-success\",\n              children: \"\\uD83D\\uDCBE Save\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 515,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowLoadModal(true),\n              className: \"btn btn-info\",\n              children: \"\\uD83D\\uDCC2 Load\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mb-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          style: {\n            margin: '0 0 15px 0'\n          },\n          children: \"\\uD83C\\uDFB5 Audio Settings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            flexDirection: 'column',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '10px',\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: voiceMode,\n              onChange: toggleVoice\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 526,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD83C\\uDF99\\uFE0F Voice Narration \", voiceMode ? \"ON\" : \"OFF\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 527,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 525,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            style: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: '10px',\n              cursor: 'pointer'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              checked: soundEffectsEnabled,\n              onChange: toggleSoundEffects\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 530,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"\\uD83D\\uDD0A Sound Effects \", soundEffectsEnabled ? \"ON\" : \"OFF\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 531,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 529,\n            columnNumber: 13\n          }, this), isGeneratingVoice && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '5px',\n              color: '#888',\n              fontSize: '14px'\n            },\n            children: \"\\u23F3 Generating audio...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 533,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 524,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            marginBottom: '15px'\n          },\n          children: \"\\uD83D\\uDC65 Your Party\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-auto\",\n          children: party.map((c, i) => {\n            var _c$conditions, _c$spellSlots;\n            const hpPercent = c.hp / c.maxHp * 100;\n            const hpColor = hpPercent > 50 ? '#4CAF50' : hpPercent > 25 ? '#ff9800' : '#f44336';\n            const isSpellcaster = SPELLCASTING_CLASSES[c.class] && (SPELLCASTING_CLASSES[c.class] !== 'third' || isThirdCaster(c));\n            const activeEffects = ((_c$conditions = c.conditions) === null || _c$conditions === void 0 ? void 0 : _c$conditions.length) || 0;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card card-hover\",\n              onClick: () => handleViewCharacter(c),\n              style: {\n                cursor: 'pointer'\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex',\n                  justifyContent: 'space-between',\n                  alignItems: 'flex-start',\n                  marginBottom: '12px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    style: {\n                      margin: '0 0 5px 0'\n                    },\n                    children: c.name\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 552,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 0,\n                      fontSize: '13px',\n                      color: '#aaa'\n                    },\n                    children: [\"Lvl \", c.level, \" \", c.race, \" \", c.class, isSpellcaster && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: '5px',\n                        color: '#9C27B0'\n                      },\n                      children: \"\\u2728\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 555,\n                      columnNumber: 43\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 553,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 551,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: 'flex',\n                    gap: '5px',\n                    flexWrap: 'wrap'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleViewCharacter(c);\n                    },\n                    className: \"btn btn-success btn-sm\",\n                    children: \"\\uD83D\\uDCCB Sheet\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 559,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleOpenInventory(c);\n                    },\n                    className: \"btn btn-info btn-sm\",\n                    children: \"\\uD83C\\uDF92 Bag\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 560,\n                    columnNumber: 23\n                  }, this), isSpellcaster && /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleOpenSpellBook(c);\n                    },\n                    className: \"btn btn-sm\",\n                    style: {\n                      backgroundColor: '#9C27B0',\n                      color: 'white',\n                      padding: '4px 8px',\n                      fontSize: '12px'\n                    },\n                    children: \"\\u2728 Spells\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 562,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: e => {\n                      e.stopPropagation();\n                      handleOpenStatusEffects(c);\n                    },\n                    className: \"btn btn-sm\",\n                    style: {\n                      backgroundColor: '#FF9800',\n                      color: 'white',\n                      padding: '4px 8px',\n                      fontSize: '12px',\n                      position: 'relative'\n                    },\n                    children: [\"\\uD83C\\uDFAD Effects\", activeEffects > 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        position: 'absolute',\n                        top: '-6px',\n                        right: '-6px',\n                        backgroundColor: '#f44336',\n                        color: 'white',\n                        borderRadius: '50%',\n                        width: '16px',\n                        height: '16px',\n                        fontSize: '10px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        fontWeight: 'bold'\n                      },\n                      children: activeEffects\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 573,\n                      columnNumber: 27\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 566,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 558,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 550,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '12px'\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    fontSize: '12px',\n                    color: '#aaa',\n                    marginBottom: '5px'\n                  },\n                  children: [\"HP: \", c.hp, \" / \", c.maxHp]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 581,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-bar\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"progress-fill\",\n                    style: {\n                      width: `${hpPercent}%`,\n                      backgroundColor: hpColor\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 583,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 582,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 580,\n                columnNumber: 19\n              }, this), c.xp !== undefined && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '8px',\n                  fontSize: '12px',\n                  color: '#888'\n                },\n                children: [\"XP: \", c.xp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 586,\n                columnNumber: 42\n              }, this), isSpellcaster && ((_c$spellSlots = c.spellSlots) === null || _c$spellSlots === void 0 ? void 0 : _c$spellSlots.current) && /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: '8px',\n                  fontSize: '11px',\n                  color: '#9C27B0'\n                },\n                children: [\"Spell Slots: \", c.spellSlots.current.filter(s => s > 0).length > 0 ? c.spellSlots.current.slice(0, 5).map((slots, i) => slots > 0 ? `${i + 1}:${slots} ` : '').join('').trim() : 'None']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 588,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(StatusEffectsPanel, {\n                character: c,\n                onUpdateCharacter: updated => {\n                  const updatedParty = party.map(char => char.name === updated.name ? updated : char);\n                  updateParty(updatedParty);\n                },\n                compact: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 594,\n                columnNumber: 19\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 549,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '20px'\n        },\n        children: /*#__PURE__*/_jsxDEV(DiceRoller, {\n          onRoll: handleDiceRoll\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 610,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 609,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card mb-lg\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          style: {\n            margin: '0 0 15px 0'\n          },\n          children: \"\\uD83D\\uDCDC Adventure Log\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 615,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(ChatLog, {\n          history: campaign.history\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 616,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 614,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          style: {\n            display: 'flex',\n            gap: '10px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: input,\n            onChange: e => setInput(e.target.value),\n            placeholder: \"What do you do?\",\n            className: \"input\",\n            disabled: isGeneratingVoice,\n            style: {\n              flex: 1\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isGeneratingVoice,\n            className: \"btn btn-primary\",\n            children: \"Submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 623,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 620,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 7\n    }, this), combat && combat.isActive && /*#__PURE__*/_jsxDEV(CombatTracker, {\n      combat: combat,\n      onUpdate: handleUpdateCombat,\n      onEnd: handleEndCombat,\n      party: party,\n      updateParty: updateParty\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 629,\n      columnNumber: 37\n    }, this), showStartCombat && /*#__PURE__*/_jsxDEV(StartCombatModal, {\n      party: party,\n      onStart: handleStartCombat,\n      onClose: () => setShowStartCombat(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 630,\n      columnNumber: 27\n    }, this), levelUpData && /*#__PURE__*/_jsxDEV(LevelUpNotification, {\n      levelUps: levelUpData,\n      onClose: () => setLevelUpData(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 631,\n      columnNumber: 23\n    }, this), xpNotification && /*#__PURE__*/_jsxDEV(XPNotification, {\n      xpGained: xpNotification.xpGained,\n      reason: xpNotification.reason,\n      onComplete: () => setXPNotification(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 26\n    }, this), showCharacterSheet && selectedCharacter && /*#__PURE__*/_jsxDEV(CharacterSheet, {\n      character: selectedCharacter,\n      onUpdate: handleCharacterUpdate,\n      onClose: () => {\n        setShowCharacterSheet(false);\n        setSelectedCharacter(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 51\n    }, this), showInventory && activeCharacterInventory && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        bottom: 0,\n        backgroundColor: 'rgba(0,0,0,0.8)',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        zIndex: 5000,\n        padding: '20px',\n        overflow: 'auto'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          maxWidth: '900px',\n          width: '100%',\n          position: 'relative'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setShowInventory(false),\n          style: {\n            position: 'absolute',\n            top: '-10px',\n            right: '-10px',\n            backgroundColor: '#d32f2f',\n            color: 'white',\n            border: 'none',\n            borderRadius: '50%',\n            width: '40px',\n            height: '40px',\n            fontSize: '20px',\n            cursor: 'pointer',\n            zIndex: 1,\n            boxShadow: '0 4px 8px rgba(0,0,0,0.5)'\n          },\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(InventoryPanel, {\n          character: activeCharacterInventory,\n          inventory: activeCharacterInventory.inventory || [],\n          onUpdateCharacter: handleUpdateCharacterInventory,\n          onUpdateInventory: handleUpdateInventory\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 639,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 637,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 636,\n      columnNumber: 9\n    }, this), showQuestJournal && /*#__PURE__*/_jsxDEV(QuestJournal, {\n      quests: quests,\n      onUpdateQuest: updateQuest,\n      onCompleteQuest: completeQuestById,\n      onClose: () => setShowQuestJournal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 9\n    }, this), showBestiary && /*#__PURE__*/_jsxDEV(Bestiary, {\n      encounteredEnemies: encounteredEnemies,\n      onClose: () => setShowBestiary(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 9\n    }, this), showSpellBook && activeSpellcaster && /*#__PURE__*/_jsxDEV(SpellBook, {\n      character: activeSpellcaster,\n      onUpdateCharacter: handleUpdateSpellcaster,\n      onClose: () => {\n        setShowSpellBook(false);\n        setActiveSpellcaster(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 9\n    }, this), showApplyStatusEffect && statusEffectTarget && /*#__PURE__*/_jsxDEV(ApplyStatusEffectModal, {\n      character: statusEffectTarget,\n      onApply: handleApplyStatusEffect,\n      onClose: () => {\n        setShowApplyStatusEffect(false);\n        setStatusEffectTarget(null);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 9\n    }, this), showShop && activeMerchant && /*#__PURE__*/_jsxDEV(ShopModal, {\n      merchant: activeMerchant,\n      party: party,\n      onUpdateParty: updateParty,\n      onUpdateMerchant: updateActiveMerchant,\n      onClose: () => {\n        setShowShop(false);\n        clearActiveMerchant();\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(SaveLoadModal, {\n      isOpen: showSaveModal,\n      onClose: () => setShowSaveModal(false),\n      mode: \"save\",\n      campaign: campaign,\n      party: party,\n      onLoad: handleLoadCampaign\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SaveLoadModal, {\n      isOpen: showLoadModal,\n      onClose: () => setShowLoadModal(false),\n      mode: \"load\",\n      campaign: campaign,\n      party: party,\n      onLoad: handleLoadCampaign\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 675,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MusicSystem, {\n      ref: musicSystemRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 676,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(PatreonButton, {\n      position: \"fixed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 467,\n    columnNumber: 5\n  }, this);\n}\n_s(GameScreen, \"dV5eE7fffVY66vBssqcfqhfCJ5Q=\", false, function () {\n  return [useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore, useCampaignStore];\n});\n_c = GameScreen;\nvar _c;\n$RefreshReg$(_c, \"GameScreen\");","map":{"version":3,"names":["useState","useEffect","useRef","useCampaignStore","playTurn","generateVoice","generateSoundEffects","parseNarrative","autoSave","processXPFromNarration","awardXPToParty","detectScene","detectLootInNarration","addItemToInventory","detectQuestEvents","SPELLCASTING_CLASSES","isThirdCaster","detectMerchantInNarration","createMerchant","MERCHANT_TYPES","createStatusEffect","applyStatusEffect","STATUS_EFFECTS","DURATION_TYPES","ChatLog","DiceRoller","SaveLoadModal","CharacterSheet","LevelUpNotification","XPNotification","CombatTracker","StartCombatModal","MusicSystem","InventoryPanel","QuestJournal","Bestiary","SpellBook","StatusEffectsPanel","ApplyStatusEffectModal","PatreonButton","ShopModal","jsxDEV","_jsxDEV","detectCombatInNarration","narration","includes","type","marker","lowerText","toLowerCase","combatStartKeywords","hasCombatStart","some","kw","detectStatusEffectsInNarration","detectedEffects","effectKeywords","POISONED","PARALYZED","STUNNED","FRIGHTENED","CHARMED","BLINDED","PRONE","RESTRAINED","UNCONSCIOUS","BURNING","BLEEDING","BLESSED","HASTED","SLOWED","Object","entries","forEach","effectType","keywords","keyword","console","log","duration","durationType","ROUNDS","push","source","saveDC","GameScreen","_s","input","setInput","isGeneratingVoice","setIsGeneratingVoice","showSaveModal","setShowSaveModal","showLoadModal","setShowLoadModal","selectedCharacter","setSelectedCharacter","showCharacterSheet","setShowCharacterSheet","levelUpData","setLevelUpData","xpNotification","setXPNotification","combat","setCombat","showStartCombat","setShowStartCombat","showInventory","setShowInventory","activeCharacterInventory","setActiveCharacterInventory","lastDiceRoll","setLastDiceRoll","showQuestJournal","setShowQuestJournal","showBestiary","setShowBestiary","encounteredEnemies","setEncounteredEnemies","showSpellBook","setShowSpellBook","activeSpellcaster","setActiveSpellcaster","showApplyStatusEffect","setShowApplyStatusEffect","statusEffectTarget","setStatusEffectTarget","showShop","setShowShop","audioRef","audioQueue","isPlaying","recognitionRef","silenceTimeoutRef","musicSystemRef","campaign","state","party","updateFromDM","setCampaign","updateParty","voiceMode","soundEffectsEnabled","micListening","toggleMic","addDiceRoll","toggleVoice","toggleSoundEffects","quests","addQuest","completeQuestById","updateQuest","activeMerchant","setActiveMerchant","updateActiveMerchant","clearActiveMerchant","playAudioQueue","current","length","audioItem","shift","Audio","src","audio","volume","onended","onerror","play","catch","playBackgroundSound","audioData","category","loop","err","playSoundEffects","text","soundEffects","sfx","speakWithElevenLabs","voice","cleanText","replace","utterance","SpeechSynthesisUtterance","speechSynthesis","speak","speakAIResponse","aiResponse","fullText","Array","isArray","map","e","join","entry","_entry$description","_entry$description2","_entry$description3","description","trim","segments","segment","handleDiceRoll","sides","result","timestamp","Date","now","handleOpenInventory","character","handleUpdateCharacterInventory","updatedChar","updatedParty","c","name","handleUpdateInventory","newInventory","inventory","handleOpenSpellBook","handleUpdateSpellcaster","handleOpenStatusEffects","handleApplyStatusEffect","handleSubmit","preventDefault","enhancedMessage","dmResponse","message","xpResult","partyUpdates","xpGained","totalXP","reason","levelUps","setTimeout","foundLoot","char","index","item","itemNames","i","alert","effectData","effect","effectNames","effectDef","require","STATUS_EFFECT_DEFINITIONS","questEvents","event","quest","title","activeQuest","find","q","status","id","rewards","xp","gold","completedAt","toISOString","detectedMerchant","icon","combatDetection","isActive","handleEndCombat","xpReward","campaignState","scene","playTrack","track","error","handleLoadCampaign","loadedCampaign","loadedParty","handleCharacterUpdate","updatedCharacter","handleViewCharacter","handleStartCombat","newCombat","newEnemies","combatants","filter","isEnemy","split","prev","unique","Set","handleUpdateCombat","updatedCombat","className","style","textAlign","paddingTop","children","fileName","_jsxFileName","lineNumber","columnNumber","color","fontSize","activeQuestCount","minHeight","background","marginBottom","display","justifyContent","alignItems","margin","theme","difficulty","gap","flexWrap","onClick","position","top","right","backgroundColor","borderRadius","width","height","fontWeight","border","GENERAL","flexDirection","cursor","checked","onChange","marginTop","_c$conditions","_c$spellSlots","hpPercent","hp","maxHp","hpColor","isSpellcaster","class","activeEffects","conditions","level","race","marginLeft","stopPropagation","padding","undefined","spellSlots","s","slice","slots","onUpdateCharacter","updated","compact","onRoll","history","onSubmit","value","target","placeholder","disabled","flex","onUpdate","onEnd","onStart","onClose","onComplete","left","bottom","zIndex","overflow","maxWidth","boxShadow","onUpdateInventory","onUpdateQuest","onCompleteQuest","onApply","merchant","onUpdateParty","onUpdateMerchant","isOpen","mode","onLoad","ref","_c","$RefreshReg$"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/components/GameScreen.jsx"],"sourcesContent":["// frontend/src/components/GameScreen.jsx - WITH QUEST SYSTEM, BESTIARY, SPELLS, STATUS EFFECTS, AND SHOP\nimport { useState, useEffect, useRef } from \"react\";\nimport { useCampaignStore } from \"../state/campaignStore\";\nimport { playTurn } from \"../services/api\";\nimport { generateVoice } from \"../services/voiceApi\";\nimport { generateSoundEffects } from \"../services/soundEffectsApi\";\nimport { parseNarrative } from \"../utils/narrativeParser\";\nimport { autoSave } from \"../services/saveLoadService\";\nimport { processXPFromNarration, awardXPToParty } from \"../utils/xpSystem\";\nimport { detectScene } from \"../utils/musicSceneDetection\";\nimport { detectLootInNarration, addItemToInventory } from \"../utils/inventorySystem\";\nimport { detectQuestEvents } from \"../utils/questSystem\";\nimport { SPELLCASTING_CLASSES, isThirdCaster } from \"../utils/spellSystem\";\nimport { detectMerchantInNarration, createMerchant, MERCHANT_TYPES } from '../utils/merchantSystem';\nimport { \n  createStatusEffect, \n  applyStatusEffect, \n  STATUS_EFFECTS,\n  DURATION_TYPES \n} from \"../utils/statusEffectSystem\";\nimport ChatLog from \"./ChatLog\";\nimport DiceRoller from \"./DiceRoller\";\nimport SaveLoadModal from \"./SaveLoadModal\";\nimport CharacterSheet from \"./CharacterSheet\";\nimport LevelUpNotification from \"./LevelUpNotification\";\nimport XPNotification from \"./XPNotification\";\nimport CombatTracker from \"./CombatTracker\";\nimport StartCombatModal from \"./StartCombatModal\";\nimport MusicSystem from \"./MusicSystem\";\nimport InventoryPanel from \"./InventoryPanel\";\nimport QuestJournal from \"./QuestJournal\";\nimport Bestiary from './Bestiary';\nimport SpellBook from './SpellBook';\nimport StatusEffectsPanel from './StatusEffectsPanel';\nimport ApplyStatusEffectModal from './ApplyStatusEffectModal';\nimport PatreonButton from \"./PatreonButton\";\nimport ShopModal from './ShopModal';\n\n/* ============================\n   Combat Detection Helper\n   ============================ */\nfunction detectCombatInNarration(narration) {\n  if (!narration) return null;\n  \n  if (narration.includes('**COMBAT_START**')) {\n    return { type: 'start', marker: '**COMBAT_START**' };\n  }\n  \n  if (narration.includes('**COMBAT_END**')) {\n    return { type: 'end', marker: '**COMBAT_END**' };\n  }\n  \n  const lowerText = narration.toLowerCase();\n  const combatStartKeywords = [\n    'attacks you', 'draws their weapon', 'charges at you', \n    'initiative', 'roll for initiative', 'combat begins',\n    'enemies appear', 'ambush', 'surprise attack'\n  ];\n  \n  const hasCombatStart = combatStartKeywords.some(kw => lowerText.includes(kw));\n  if (hasCombatStart) return { type: 'start', marker: null };\n  return null;\n}\n\n/* ============================\n   Status Effect Detection\n   ============================ */\nfunction detectStatusEffectsInNarration(narration) {\n  const lowerText = narration.toLowerCase();\n  const detectedEffects = [];\n\n  const effectKeywords = {\n    [STATUS_EFFECTS.POISONED]: ['poisoned', 'poison', 'venom', 'toxic'],\n    [STATUS_EFFECTS.PARALYZED]: ['paralyzed', 'paralysis', 'cannot move'],\n    [STATUS_EFFECTS.STUNNED]: ['stunned', 'dazed', 'disoriented'],\n    [STATUS_EFFECTS.FRIGHTENED]: ['frightened', 'terrified', 'scared', 'fear'],\n    [STATUS_EFFECTS.CHARMED]: ['charmed', 'enchanted', 'beguiled'],\n    [STATUS_EFFECTS.BLINDED]: ['blinded', 'blind', 'cannot see'],\n    [STATUS_EFFECTS.PRONE]: ['knocked prone', 'falls prone', 'knocked down'],\n    [STATUS_EFFECTS.RESTRAINED]: ['restrained', 'grappled', 'held', 'entangled'],\n    [STATUS_EFFECTS.UNCONSCIOUS]: ['unconscious', 'knocked out', 'falls unconscious'],\n    [STATUS_EFFECTS.BURNING]: ['on fire', 'burning', 'catches fire', 'ignites'],\n    [STATUS_EFFECTS.BLEEDING]: ['bleeding', 'blood', 'wounded'],\n    [STATUS_EFFECTS.BLESSED]: ['blessed', 'divine favor', 'bless'],\n    [STATUS_EFFECTS.HASTED]: ['hasted', 'speed increased', 'quickened'],\n    [STATUS_EFFECTS.SLOWED]: ['slowed', 'sluggish', 'speed reduced'],\n  };\n\n  Object.entries(effectKeywords).forEach(([effectType, keywords]) => {\n    if (keywords.some(keyword => lowerText.includes(keyword))) {\n      console.log(`âœ¨ Detected status effect: ${effectType}`);\n      let duration = 1;\n      let durationType = DURATION_TYPES.ROUNDS;\n      if (effectType === STATUS_EFFECTS.BURNING || effectType === STATUS_EFFECTS.BLEEDING) {\n        duration = 3;\n      }\n      detectedEffects.push({ type: effectType, duration, durationType, source: 'Combat', saveDC: null });\n    }\n  });\n\n  return detectedEffects;\n}\n\nexport default function GameScreen() {\n  const [input, setInput] = useState(\"\");\n  const [isGeneratingVoice, setIsGeneratingVoice] = useState(false);\n  const [showSaveModal, setShowSaveModal] = useState(false);\n  const [showLoadModal, setShowLoadModal] = useState(false);\n  const [selectedCharacter, setSelectedCharacter] = useState(null);\n  const [showCharacterSheet, setShowCharacterSheet] = useState(false);\n  const [levelUpData, setLevelUpData] = useState(null);\n  const [xpNotification, setXPNotification] = useState(null);\n  const [combat, setCombat] = useState(null);\n  const [showStartCombat, setShowStartCombat] = useState(false);\n  const [showInventory, setShowInventory] = useState(false);\n  const [activeCharacterInventory, setActiveCharacterInventory] = useState(null);\n  const [lastDiceRoll, setLastDiceRoll] = useState(null);\n  const [showQuestJournal, setShowQuestJournal] = useState(false);\n  const [showBestiary, setShowBestiary] = useState(false);\n  const [encounteredEnemies, setEncounteredEnemies] = useState([]);\n  const [showSpellBook, setShowSpellBook] = useState(false);\n  const [activeSpellcaster, setActiveSpellcaster] = useState(null);\n  const [showApplyStatusEffect, setShowApplyStatusEffect] = useState(false);\n  const [statusEffectTarget, setStatusEffectTarget] = useState(null);\n  const [showShop, setShowShop] = useState(false);\n  \n  const audioRef = useRef(null);\n  const audioQueue = useRef([]);\n  const isPlaying = useRef(false);\n  const recognitionRef = useRef(null);\n  const silenceTimeoutRef = useRef(null);\n  const musicSystemRef = useRef(null);\n\n  const campaign = useCampaignStore((state) => state.campaign);\n  const party = useCampaignStore((state) => state.party);\n  const updateFromDM = useCampaignStore((state) => state.updateFromDM);\n  const setCampaign = useCampaignStore((state) => state.setCampaign);\n  const updateParty = useCampaignStore((state) => state.updateParty);\n  const voiceMode = useCampaignStore((state) => state.voiceMode);\n  const soundEffectsEnabled = useCampaignStore((state) => state.soundEffectsEnabled || false);\n  const micListening = useCampaignStore((state) => state.micListening);\n  const toggleMic = useCampaignStore((state) => state.toggleMic);\n  const addDiceRoll = useCampaignStore((state) => state.addDiceRoll);\n  const toggleVoice = useCampaignStore((state) => state.toggleVoice);\n  const toggleSoundEffects = useCampaignStore((state) => state.toggleSoundEffects || (() => {}));\n  const quests = useCampaignStore((state) => state.quests || []);\n  const addQuest = useCampaignStore((state) => state.addQuest);\n  const completeQuestById = useCampaignStore((state) => state.completeQuestById);\n  const updateQuest = useCampaignStore((state) => state.updateQuest);\n  const activeMerchant       = useCampaignStore((state) => state.activeMerchant);\n  const setActiveMerchant    = useCampaignStore((state) => state.setActiveMerchant);\n  const updateActiveMerchant = useCampaignStore((state) => state.updateActiveMerchant);\n  const clearActiveMerchant  = useCampaignStore((state) => state.clearActiveMerchant);\n\n  useEffect(() => {}, [micListening]);\n\n  const playAudioQueue = () => {\n    if (isPlaying.current || audioQueue.current.length === 0) return;\n    isPlaying.current = true;\n    const audioItem = audioQueue.current.shift();\n    if (!audioRef.current) audioRef.current = new Audio();\n    audioRef.current.src = audioItem.audio;\n    audioRef.current.volume = audioItem.volume || 1.0;\n    audioRef.current.onended = () => { isPlaying.current = false; playAudioQueue(); };\n    audioRef.current.onerror = () => { isPlaying.current = false; playAudioQueue(); };\n    audioRef.current.play().catch(() => { isPlaying.current = false; playAudioQueue(); });\n  };\n\n  const playBackgroundSound = (audioData, category) => {\n    try {\n      const audio = new Audio(audioData);\n      audio.volume = 0.3;\n      audio.loop = false;\n      audio.play().catch(() => {});\n    } catch (err) {}\n  };\n\n  const playSoundEffects = async (text) => {\n    if (!soundEffectsEnabled) return;\n    try {\n      const soundEffects = await generateSoundEffects(text);\n      soundEffects.forEach(sfx => playBackgroundSound(sfx.audio, sfx.category));\n    } catch (err) {}\n  };\n\n  const speakWithElevenLabs = async (text, voice = \"narrator\") => {\n    if (!voiceMode) return;\n    try {\n      setIsGeneratingVoice(true);\n      const cleanText = text.replace(/\\*\\*(.*?)\\*\\*/g, \"$1\").replace(/\\*(.*?)\\*/g, \"$1\").replace(/#{1,6}\\s/g, \"\");\n      const audioData = await generateVoice({ text: cleanText, voice });\n      audioQueue.current.push({ audio: audioData, type: `narration_${voice}`, volume: 1.0 });\n      if (!isPlaying.current) playAudioQueue();\n      setIsGeneratingVoice(false);\n    } catch (err) {\n      setIsGeneratingVoice(false);\n      const utterance = new SpeechSynthesisUtterance(text);\n      speechSynthesis.speak(utterance);\n    }\n  };\n\n  const speakAIResponse = async (aiResponse) => {\n    if (!voiceMode) return;\n    const fullText = typeof aiResponse === 'string' ? aiResponse : Array.isArray(aiResponse) ? aiResponse.map(e => e.text).join(' ') : '';\n    if (soundEffectsEnabled && fullText) playSoundEffects(fullText);\n    if (Array.isArray(aiResponse)) {\n      for (const entry of aiResponse) {\n        const voice = entry.description?.toLowerCase().includes(\"dark\") ? \"dark\" : entry.description?.toLowerCase().includes(\"old\") ? \"old_wise\" : entry.description?.toLowerCase().includes(\"gruff\") ? \"gruff\" : \"narrator\";\n        await speakWithElevenLabs(entry.text, voice);\n      }\n      return;\n    }\n    if (typeof aiResponse === 'string' && aiResponse.trim()) {\n      const segments = parseNarrative(aiResponse);\n      for (const segment of segments) {\n        await speakWithElevenLabs(segment.text, segment.voice);\n      }\n    }\n  };\n\n  const handleDiceRoll = ({ sides, result }) => {\n    console.log(\"ðŸŽ² Rolled d\" + sides + \":\", result);\n    setLastDiceRoll({ sides, result, timestamp: Date.now() });\n    addDiceRoll({ sides, result });\n  };\n\n  const handleOpenInventory = (character) => {\n    setActiveCharacterInventory(character);\n    setShowInventory(true);\n  };\n\n  const handleUpdateCharacterInventory = (updatedChar) => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setActiveCharacterInventory(updatedChar);\n  };\n\n  const handleUpdateInventory = (newInventory) => {\n    if (activeCharacterInventory) {\n      const updatedChar = { ...activeCharacterInventory, inventory: newInventory };\n      handleUpdateCharacterInventory(updatedChar);\n    }\n  };\n\n  const handleOpenSpellBook = (character) => {\n    setActiveSpellcaster(character);\n    setShowSpellBook(true);\n  };\n\n  const handleUpdateSpellcaster = (updatedChar) => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setActiveSpellcaster(updatedChar);\n  };\n\n  const handleOpenStatusEffects = (character) => {\n    setStatusEffectTarget(character);\n    setShowApplyStatusEffect(true);\n  };\n\n  const handleApplyStatusEffect = (updatedChar) => {\n    const updatedParty = party.map(c => c.name === updatedChar.name ? updatedChar : c);\n    updateParty(updatedParty);\n    setShowApplyStatusEffect(false);\n    setStatusEffectTarget(null);\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (!input.trim()) return;\n\n    let enhancedMessage = input;\n    if (lastDiceRoll && (Date.now() - lastDiceRoll.timestamp) < 30000) {\n      enhancedMessage = `${input} [Player rolled d${lastDiceRoll.sides}: ${lastDiceRoll.result}]`;\n      console.log(\"ðŸŽ² Including dice roll:\", lastDiceRoll);\n      setLastDiceRoll(null);\n    }\n\n    try {\n      const dmResponse = await playTurn({ message: enhancedMessage, campaign, party });\n      updateFromDM(dmResponse);\n\n      if (dmResponse?.aiResponse && party.length > 0) {\n        // XP Detection\n        const xpResult = processXPFromNarration(dmResponse.aiResponse, party);\n        if (xpResult) {\n          updateParty(xpResult.partyUpdates);\n          setXPNotification({ xpGained: xpResult.totalXP, reason: xpResult.message });\n          if (xpResult.levelUps.length > 0) {\n            setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n          }\n        }\n\n        // Loot Detection\n        const foundLoot = detectLootInNarration(dmResponse.aiResponse);\n        if (foundLoot.length > 0) {\n          const updatedParty = party.map((char, index) => {\n            if (index === 0) {\n              let newInventory = char.inventory || [];\n              foundLoot.forEach(item => { newInventory = addItemToInventory(newInventory, item); });\n              return { ...char, inventory: newInventory };\n            }\n            return char;\n          });\n          updateParty(updatedParty);\n          const itemNames = foundLoot.map(i => i.name).join(', ');\n          setTimeout(() => alert(`ðŸ“¦ Found: ${itemNames}!`), 1000);\n        }\n\n        // Status Effect Detection\n        const detectedEffects = detectStatusEffectsInNarration(dmResponse.aiResponse);\n        if (detectedEffects.length > 0) {\n          console.log(\"âœ¨ Status effects detected:\", detectedEffects);\n          const updatedParty = party.map((char, index) => {\n            if (index === 0) {\n              let updatedChar = { ...char };\n              detectedEffects.forEach(effectData => {\n                const effect = createStatusEffect(effectData);\n                if (effect) updatedChar = applyStatusEffect(updatedChar, effect);\n              });\n              return updatedChar;\n            }\n            return char;\n          });\n          updateParty(updatedParty);\n          const effectNames = detectedEffects.map(e => {\n            const effectDef = require('../utils/statusEffectSystem').STATUS_EFFECT_DEFINITIONS[e.type];\n            return effectDef ? effectDef.name : e.type;\n          }).join(', ');\n          setTimeout(() => { alert(`âœ¨ Status Effect Applied: ${effectNames}!`); }, 1500);\n        }\n\n        // Quest Detection\n        const questEvents = detectQuestEvents(dmResponse.aiResponse);\n        if (questEvents.length > 0) {\n          console.log(\"ðŸ“œ Quest events detected:\", questEvents);\n          questEvents.forEach(event => {\n            if (event.type === 'quest_started' && event.quest) {\n              addQuest(event.quest);\n              setTimeout(() => { alert(`ðŸ“œ New Quest: ${event.quest.title}!\\n\\n${event.quest.description}`); }, 1000);\n            } else if (event.type === 'quest_completed') {\n              const activeQuest = quests.find(q => q.status === 'active');\n              if (activeQuest) {\n                completeQuestById(activeQuest.id);\n                if (activeQuest.rewards.xp > 0) {\n                  const xpResult = awardXPToParty(party, activeQuest.rewards.xp, `Quest: ${activeQuest.title}`);\n                  updateParty(xpResult.partyUpdates);\n                  setXPNotification({ xpGained: activeQuest.rewards.xp, reason: `Quest Complete: ${activeQuest.title}` });\n                  if (xpResult.levelUps.length > 0) {\n                    setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n                  }\n                }\n                setTimeout(() => { alert(`âœ“ Quest Completed: ${activeQuest.title}!\\n\\nRewards:\\nâ€¢ ${activeQuest.rewards.xp} XP\\nâ€¢ ${activeQuest.rewards.gold} Gold`); }, 1500);\n              }\n            } else if (event.type === 'quest_updated') {\n              console.log(\"ðŸ“ Quest progress updated\");\n            } else if (event.type === 'quest_failed') {\n              const activeQuest = quests.find(q => q.status === 'active');\n              if (activeQuest) {\n                updateQuest(activeQuest.id, { status: 'failed', completedAt: new Date().toISOString() });\n                setTimeout(() => alert(`âœ— Quest Failed: ${activeQuest.title}`), 1000);\n              }\n            }\n          });\n        }\n\n        // Merchant Detection\n        const detectedMerchant = detectMerchantInNarration(dmResponse.aiResponse);\n        if (detectedMerchant && !activeMerchant) {\n          console.log('ðŸª Merchant detected:', detectedMerchant.name);\n          setActiveMerchant(detectedMerchant);\n          setShowShop(true);\n          setTimeout(() => {\n            alert(`ðŸª ${detectedMerchant.icon} ${detectedMerchant.name} is open for business!`);\n          }, 1200);\n        }\n\n        // Combat Detection\n        const combatDetection = detectCombatInNarration(dmResponse.aiResponse);\n        if (combatDetection) {\n          console.log(\"âš”ï¸ Combat detected:\", combatDetection.type);\n          if (combatDetection.type === 'start' && !combat?.isActive) {\n            setTimeout(() => { alert(\"âš”ï¸ Combat begins! Select your enemies.\"); setShowStartCombat(true); }, 1500);\n          } else if (combatDetection.type === 'end' && combat?.isActive) {\n            setTimeout(() => { handleEndCombat({ result: 'victory', message: 'Victory! All enemies defeated.', xpReward: 100 }); }, 1000);\n          }\n        }\n      }\n\n      autoSave(dmResponse.campaignState, party);\n\n      if (dmResponse?.aiResponse) {\n        await speakAIResponse(dmResponse.aiResponse);\n        if (musicSystemRef.current) {\n          const scene = detectScene(dmResponse.aiResponse, combat?.isActive || false);\n          if (scene) musicSystemRef.current.playTrack(scene.track);\n        }\n      }\n\n      setInput(\"\");\n    } catch (err) {\n      console.error(\"âŒ Turn error:\", err);\n    }\n  };\n\n  const handleLoadCampaign = (loadedCampaign, loadedParty) => {\n    setCampaign({ ...loadedCampaign, party: loadedParty });\n    alert(\"Campaign loaded successfully!\");\n  };\n\n  const handleCharacterUpdate = (updatedCharacter) => {\n    const updatedParty = party.map(char => char.name === updatedCharacter.name ? updatedCharacter : char);\n    updateParty(updatedParty);\n    setSelectedCharacter(updatedCharacter);\n  };\n\n  const handleViewCharacter = (character) => {\n    setSelectedCharacter(character);\n    setShowCharacterSheet(true);\n  };\n\n  const handleStartCombat = (newCombat) => {\n    setCombat(newCombat);\n    setShowStartCombat(false);\n    const newEnemies = newCombat.combatants.filter(c => c.isEnemy).map(e => e.id.split('_')[0]);\n    setEncounteredEnemies(prev => {\n      const unique = [...new Set([...prev, ...newEnemies])];\n      console.log(\"ðŸ“– Encountered enemies:\", unique);\n      return unique;\n    });\n    if (musicSystemRef.current) musicSystemRef.current.playTrack('combat_easy');\n  };\n\n  const handleUpdateCombat = (updatedCombat) => setCombat(updatedCombat);\n\n  const handleEndCombat = (result) => {\n    if (musicSystemRef.current) {\n      if (result.result === 'victory') {\n        musicSystemRef.current.playTrack('victory');\n        setTimeout(() => { if (musicSystemRef.current) musicSystemRef.current.playTrack('peaceful_village'); }, 8000);\n      } else if (result.result === 'defeat') {\n        musicSystemRef.current.playTrack('defeat');\n      }\n    }\n    if (result.result === 'victory' && result.xpReward) {\n      const xpResult = awardXPToParty(party, result.xpReward, 'Combat Victory');\n      updateParty(xpResult.partyUpdates);\n      setXPNotification({ xpGained: result.xpReward, reason: 'Combat Victory!' });\n      if (xpResult.levelUps.length > 0) {\n        setTimeout(() => setLevelUpData(xpResult.levelUps), 3500);\n      }\n    }\n    setCombat(null);\n    alert(result.message);\n  };\n\n  if (!campaign) return (\n    <div className=\"container\" style={{ textAlign: 'center', paddingTop: '100px' }}>\n      <h1>No Campaign Started</h1>\n      <p style={{ color: '#888', fontSize: '18px' }}>Please start a campaign from the setup screen.</p>\n    </div>\n  );\n\n  const activeQuestCount = quests.filter(q => q.status === 'active').length;\n\n  return (\n    <div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%)' }}>\n      <div className=\"container\">\n        {/* Header */}\n        <div className=\"card mb-lg\" style={{ marginBottom: '20px' }}>\n          <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n            <div>\n              <h2 style={{ margin: 0 }}>{campaign.theme} Adventure</h2>\n              <p style={{ margin: '5px 0 0 0', color: '#aaa', fontSize: '16px' }}>\n                Difficulty: {campaign.difficulty}\n              </p>\n            </div>\n            <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap' }}>\n              <button onClick={() => setShowQuestJournal(true)} className=\"btn btn-info\" style={{ position: 'relative' }}>\n                ðŸ“– Quests\n                {activeQuestCount > 0 && (\n                  <span style={{position: 'absolute', top: '-8px', right: '-8px', backgroundColor: '#ffd700', color: '#000', borderRadius: '50%', width: '24px', height: '24px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '12px', fontWeight: 'bold', border: '2px solid #1a1a1a'}}>\n                    {activeQuestCount}\n                  </span>\n                )}\n              </button>\n\n              <button onClick={() => setShowBestiary(true)} className=\"btn btn-danger\" style={{ position: 'relative' }}>\n                ðŸ“š Bestiary\n                {encounteredEnemies.length > 0 && (\n                  <span style={{position: 'absolute', top: '-8px', right: '-8px', backgroundColor: '#ffd700', color: '#000', borderRadius: '50%', width: '24px', height: '24px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '12px', fontWeight: 'bold', border: '2px solid #1a1a1a'}}>\n                    {encounteredEnemies.length}\n                  </span>\n                )}\n              </button>\n\n              {/* ðŸª Shop Button â€” always visible, opens last detected merchant or a travelling merchant */}\n              <button\n                onClick={() => {\n                  if (!activeMerchant) setActiveMerchant(createMerchant(MERCHANT_TYPES.GENERAL, 'Travelling Merchant'));\n                  setShowShop(true);\n                }}\n                className=\"btn\"\n                style={{\n                  backgroundColor: activeMerchant ? '#c9a84c' : '#3a3000',\n                  color: activeMerchant ? '#000' : '#c9a84c',\n                  border: '1px solid #c9a84c',\n                  position: 'relative'\n                }}\n              >\n                ðŸª {activeMerchant ? activeMerchant.name : 'Shop'}\n              </button>\n\n              <button onClick={() => setShowStartCombat(true)} className=\"btn btn-danger\">âš”ï¸ Combat</button>\n              <button onClick={() => setShowSaveModal(true)} className=\"btn btn-success\">ðŸ’¾ Save</button>\n              <button onClick={() => setShowLoadModal(true)} className=\"btn btn-info\">ðŸ“‚ Load</button>\n            </div>\n          </div>\n        </div>\n\n        {/* Audio Settings */}\n        <div className=\"card mb-lg\">\n          <h4 style={{ margin: '0 0 15px 0' }}>ðŸŽµ Audio Settings</h4>\n          <div style={{ display: 'flex', flexDirection: 'column', gap: '10px' }}>\n            <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>\n              <input type=\"checkbox\" checked={voiceMode} onChange={toggleVoice} />\n              <span>ðŸŽ™ï¸ Voice Narration {voiceMode ? \"ON\" : \"OFF\"}</span>\n            </label>\n            <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer' }}>\n              <input type=\"checkbox\" checked={soundEffectsEnabled} onChange={toggleSoundEffects} />\n              <span>ðŸ”Š Sound Effects {soundEffectsEnabled ? \"ON\" : \"OFF\"}</span>\n            </label>\n            {isGeneratingVoice && <div style={{ marginTop: '5px', color: '#888', fontSize: '14px' }}>â³ Generating audio...</div>}\n          </div>\n        </div>\n\n        {/* Party */}\n        <div className=\"mb-lg\">\n          <h3 style={{ marginBottom: '15px' }}>ðŸ‘¥ Your Party</h3>\n          <div className=\"grid grid-auto\">\n            {party.map((c, i) => {\n              const hpPercent = (c.hp / c.maxHp) * 100;\n              const hpColor = hpPercent > 50 ? '#4CAF50' : hpPercent > 25 ? '#ff9800' : '#f44336';\n              const isSpellcaster = SPELLCASTING_CLASSES[c.class] &&\n                (SPELLCASTING_CLASSES[c.class] !== 'third' || isThirdCaster(c));\n              const activeEffects = c.conditions?.length || 0;\n              \n              return (\n                <div key={i} className=\"card card-hover\" onClick={() => handleViewCharacter(c)} style={{ cursor: 'pointer' }}>\n                  <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>\n                    <div>\n                      <h4 style={{ margin: '0 0 5px 0' }}>{c.name}</h4>\n                      <p style={{ margin: 0, fontSize: '13px', color: '#aaa' }}>\n                        Lvl {c.level} {c.race} {c.class}\n                        {isSpellcaster && <span style={{ marginLeft: '5px', color: '#9C27B0' }}>âœ¨</span>}\n                      </p>\n                    </div>\n                    <div style={{ display: 'flex', gap: '5px', flexWrap: 'wrap' }}>\n                      <button onClick={(e) => { e.stopPropagation(); handleViewCharacter(c); }} className=\"btn btn-success btn-sm\">ðŸ“‹ Sheet</button>\n                      <button onClick={(e) => { e.stopPropagation(); handleOpenInventory(c); }} className=\"btn btn-info btn-sm\">ðŸŽ’ Bag</button>\n                      {isSpellcaster && (\n                        <button onClick={(e) => { e.stopPropagation(); handleOpenSpellBook(c); }} className=\"btn btn-sm\" style={{backgroundColor: '#9C27B0', color: 'white', padding: '4px 8px', fontSize: '12px'}}>\n                          âœ¨ Spells\n                        </button>\n                      )}\n                      <button\n                        onClick={(e) => { e.stopPropagation(); handleOpenStatusEffects(c); }}\n                        className=\"btn btn-sm\"\n                        style={{backgroundColor: '#FF9800', color: 'white', padding: '4px 8px', fontSize: '12px', position: 'relative'}}\n                      >\n                        ðŸŽ­ Effects\n                        {activeEffects > 0 && (\n                          <span style={{position: 'absolute', top: '-6px', right: '-6px', backgroundColor: '#f44336', color: 'white', borderRadius: '50%', width: '16px', height: '16px', fontSize: '10px', display: 'flex', alignItems: 'center', justifyContent: 'center', fontWeight: 'bold'}}>\n                            {activeEffects}\n                          </span>\n                        )}\n                      </button>\n                    </div>\n                  </div>\n                  <div style={{ marginTop: '12px' }}>\n                    <div style={{ fontSize: '12px', color: '#aaa', marginBottom: '5px' }}>HP: {c.hp} / {c.maxHp}</div>\n                    <div className=\"progress-bar\">\n                      <div className=\"progress-fill\" style={{ width: `${hpPercent}%`, backgroundColor: hpColor }} />\n                    </div>\n                  </div>\n                  {c.xp !== undefined && <div style={{ marginTop: '8px', fontSize: '12px', color: '#888' }}>XP: {c.xp}</div>}\n                  {isSpellcaster && c.spellSlots?.current && (\n                    <div style={{ marginTop: '8px', fontSize: '11px', color: '#9C27B0' }}>\n                      Spell Slots: {c.spellSlots.current.filter(s => s > 0).length > 0 ?\n                        c.spellSlots.current.slice(0, 5).map((slots, i) => slots > 0 ? `${i+1}:${slots} ` : '').join('').trim()\n                        : 'None'}\n                    </div>\n                  )}\n                  <StatusEffectsPanel\n                    character={c}\n                    onUpdateCharacter={(updated) => {\n                      const updatedParty = party.map(char => char.name === updated.name ? updated : char);\n                      updateParty(updatedParty);\n                    }}\n                    compact={true}\n                  />\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Dice Roller */}\n        <div style={{ marginBottom: '20px' }}>\n          <DiceRoller onRoll={handleDiceRoll} />\n        </div>\n\n        {/* Chat Log */}\n        <div className=\"card mb-lg\">\n          <h3 style={{ margin: '0 0 15px 0' }}>ðŸ“œ Adventure Log</h3>\n          <ChatLog history={campaign.history} />\n        </div>\n\n        {/* Input */}\n        <div className=\"card\">\n          <form onSubmit={handleSubmit} style={{ display: 'flex', gap: '10px' }}>\n            <input value={input} onChange={(e) => setInput(e.target.value)} placeholder=\"What do you do?\" className=\"input\" disabled={isGeneratingVoice} style={{ flex: 1 }} />\n            <button type=\"submit\" disabled={isGeneratingVoice} className=\"btn btn-primary\">Submit</button>\n          </form>\n        </div>\n      </div>\n\n      {/* â”€â”€ Modals â”€â”€ */}\n      {combat && combat.isActive && <CombatTracker combat={combat} onUpdate={handleUpdateCombat} onEnd={handleEndCombat} party={party} updateParty={updateParty} />}\n      {showStartCombat && <StartCombatModal party={party} onStart={handleStartCombat} onClose={() => setShowStartCombat(false)} />}\n      {levelUpData && <LevelUpNotification levelUps={levelUpData} onClose={() => setLevelUpData(null)} />}\n      {xpNotification && <XPNotification xpGained={xpNotification.xpGained} reason={xpNotification.reason} onComplete={() => setXPNotification(null)} />}\n      {showCharacterSheet && selectedCharacter && <CharacterSheet character={selectedCharacter} onUpdate={handleCharacterUpdate} onClose={() => { setShowCharacterSheet(false); setSelectedCharacter(null); }} />}\n\n      {showInventory && activeCharacterInventory && (\n        <div style={{ position: 'fixed', top: 0, left: 0, right: 0, bottom: 0, backgroundColor: 'rgba(0,0,0,0.8)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 5000, padding: '20px', overflow: 'auto' }}>\n          <div style={{ maxWidth: '900px', width: '100%', position: 'relative' }}>\n            <button onClick={() => setShowInventory(false)} style={{ position: 'absolute', top: '-10px', right: '-10px', backgroundColor: '#d32f2f', color: 'white', border: 'none', borderRadius: '50%', width: '40px', height: '40px', fontSize: '20px', cursor: 'pointer', zIndex: 1, boxShadow: '0 4px 8px rgba(0,0,0,0.5)' }}>âœ•</button>\n            <InventoryPanel character={activeCharacterInventory} inventory={activeCharacterInventory.inventory || []} onUpdateCharacter={handleUpdateCharacterInventory} onUpdateInventory={handleUpdateInventory} />\n          </div>\n        </div>\n      )}\n\n      {showQuestJournal && (\n        <QuestJournal quests={quests} onUpdateQuest={updateQuest} onCompleteQuest={completeQuestById} onClose={() => setShowQuestJournal(false)} />\n      )}\n\n      {showBestiary && (\n        <Bestiary encounteredEnemies={encounteredEnemies} onClose={() => setShowBestiary(false)} />\n      )}\n\n      {showSpellBook && activeSpellcaster && (\n        <SpellBook character={activeSpellcaster} onUpdateCharacter={handleUpdateSpellcaster} onClose={() => { setShowSpellBook(false); setActiveSpellcaster(null); }} />\n      )}\n\n      {showApplyStatusEffect && statusEffectTarget && (\n        <ApplyStatusEffectModal character={statusEffectTarget} onApply={handleApplyStatusEffect} onClose={() => { setShowApplyStatusEffect(false); setStatusEffectTarget(null); }} />\n      )}\n\n      {/* ðŸª Shop Modal */}\n      {showShop && activeMerchant && (\n        <ShopModal\n          merchant={activeMerchant}\n          party={party}\n          onUpdateParty={updateParty}\n          onUpdateMerchant={updateActiveMerchant}\n          onClose={() => {\n            setShowShop(false);\n            clearActiveMerchant();\n          }}\n        />\n      )}\n\n      <SaveLoadModal isOpen={showSaveModal} onClose={() => setShowSaveModal(false)} mode=\"save\" campaign={campaign} party={party} onLoad={handleLoadCampaign} />\n      <SaveLoadModal isOpen={showLoadModal} onClose={() => setShowLoadModal(false)} mode=\"load\" campaign={campaign} party={party} onLoad={handleLoadCampaign} />\n      <MusicSystem ref={musicSystemRef} />\n      <PatreonButton position=\"fixed\" />\n    </div>\n  );\n}"],"mappings":";;AAAA;AACA,SAASA,QAAQ,EAAEC,SAAS,EAAEC,MAAM,QAAQ,OAAO;AACnD,SAASC,gBAAgB,QAAQ,wBAAwB;AACzD,SAASC,QAAQ,QAAQ,iBAAiB;AAC1C,SAASC,aAAa,QAAQ,sBAAsB;AACpD,SAASC,oBAAoB,QAAQ,6BAA6B;AAClE,SAASC,cAAc,QAAQ,0BAA0B;AACzD,SAASC,QAAQ,QAAQ,6BAA6B;AACtD,SAASC,sBAAsB,EAAEC,cAAc,QAAQ,mBAAmB;AAC1E,SAASC,WAAW,QAAQ,8BAA8B;AAC1D,SAASC,qBAAqB,EAAEC,kBAAkB,QAAQ,0BAA0B;AACpF,SAASC,iBAAiB,QAAQ,sBAAsB;AACxD,SAASC,oBAAoB,EAAEC,aAAa,QAAQ,sBAAsB;AAC1E,SAASC,yBAAyB,EAAEC,cAAc,EAAEC,cAAc,QAAQ,yBAAyB;AACnG,SACEC,kBAAkB,EAClBC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,QACT,6BAA6B;AACpC,OAAOC,OAAO,MAAM,WAAW;AAC/B,OAAOC,UAAU,MAAM,cAAc;AACrC,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,mBAAmB,MAAM,uBAAuB;AACvD,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,gBAAgB,MAAM,oBAAoB;AACjD,OAAOC,WAAW,MAAM,eAAe;AACvC,OAAOC,cAAc,MAAM,kBAAkB;AAC7C,OAAOC,YAAY,MAAM,gBAAgB;AACzC,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,SAAS,MAAM,aAAa;AACnC,OAAOC,kBAAkB,MAAM,sBAAsB;AACrD,OAAOC,sBAAsB,MAAM,0BAA0B;AAC7D,OAAOC,aAAa,MAAM,iBAAiB;AAC3C,OAAOC,SAAS,MAAM,aAAa;;AAEnC;AACA;AACA;AAFA,SAAAC,MAAA,IAAAC,OAAA;AAGA,SAASC,uBAAuBA,CAACC,SAAS,EAAE;EAC1C,IAAI,CAACA,SAAS,EAAE,OAAO,IAAI;EAE3B,IAAIA,SAAS,CAACC,QAAQ,CAAC,kBAAkB,CAAC,EAAE;IAC1C,OAAO;MAAEC,IAAI,EAAE,OAAO;MAAEC,MAAM,EAAE;IAAmB,CAAC;EACtD;EAEA,IAAIH,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC,EAAE;IACxC,OAAO;MAAEC,IAAI,EAAE,KAAK;MAAEC,MAAM,EAAE;IAAiB,CAAC;EAClD;EAEA,MAAMC,SAAS,GAAGJ,SAAS,CAACK,WAAW,CAAC,CAAC;EACzC,MAAMC,mBAAmB,GAAG,CAC1B,aAAa,EAAE,oBAAoB,EAAE,gBAAgB,EACrD,YAAY,EAAE,qBAAqB,EAAE,eAAe,EACpD,gBAAgB,EAAE,QAAQ,EAAE,iBAAiB,CAC9C;EAED,MAAMC,cAAc,GAAGD,mBAAmB,CAACE,IAAI,CAACC,EAAE,IAAIL,SAAS,CAACH,QAAQ,CAACQ,EAAE,CAAC,CAAC;EAC7E,IAAIF,cAAc,EAAE,OAAO;IAAEL,IAAI,EAAE,OAAO;IAAEC,MAAM,EAAE;EAAK,CAAC;EAC1D,OAAO,IAAI;AACb;;AAEA;AACA;AACA;AACA,SAASO,8BAA8BA,CAACV,SAAS,EAAE;EACjD,MAAMI,SAAS,GAAGJ,SAAS,CAACK,WAAW,CAAC,CAAC;EACzC,MAAMM,eAAe,GAAG,EAAE;EAE1B,MAAMC,cAAc,GAAG;IACrB,CAAClC,cAAc,CAACmC,QAAQ,GAAG,CAAC,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,OAAO,CAAC;IACnE,CAACnC,cAAc,CAACoC,SAAS,GAAG,CAAC,WAAW,EAAE,WAAW,EAAE,aAAa,CAAC;IACrE,CAACpC,cAAc,CAACqC,OAAO,GAAG,CAAC,SAAS,EAAE,OAAO,EAAE,aAAa,CAAC;IAC7D,CAACrC,cAAc,CAACsC,UAAU,GAAG,CAAC,YAAY,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,CAAC;IAC1E,CAACtC,cAAc,CAACuC,OAAO,GAAG,CAAC,SAAS,EAAE,WAAW,EAAE,UAAU,CAAC;IAC9D,CAACvC,cAAc,CAACwC,OAAO,GAAG,CAAC,SAAS,EAAE,OAAO,EAAE,YAAY,CAAC;IAC5D,CAACxC,cAAc,CAACyC,KAAK,GAAG,CAAC,eAAe,EAAE,aAAa,EAAE,cAAc,CAAC;IACxE,CAACzC,cAAc,CAAC0C,UAAU,GAAG,CAAC,YAAY,EAAE,UAAU,EAAE,MAAM,EAAE,WAAW,CAAC;IAC5E,CAAC1C,cAAc,CAAC2C,WAAW,GAAG,CAAC,aAAa,EAAE,aAAa,EAAE,mBAAmB,CAAC;IACjF,CAAC3C,cAAc,CAAC4C,OAAO,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,CAAC;IAC3E,CAAC5C,cAAc,CAAC6C,QAAQ,GAAG,CAAC,UAAU,EAAE,OAAO,EAAE,SAAS,CAAC;IAC3D,CAAC7C,cAAc,CAAC8C,OAAO,GAAG,CAAC,SAAS,EAAE,cAAc,EAAE,OAAO,CAAC;IAC9D,CAAC9C,cAAc,CAAC+C,MAAM,GAAG,CAAC,QAAQ,EAAE,iBAAiB,EAAE,WAAW,CAAC;IACnE,CAAC/C,cAAc,CAACgD,MAAM,GAAG,CAAC,QAAQ,EAAE,UAAU,EAAE,eAAe;EACjE,CAAC;EAEDC,MAAM,CAACC,OAAO,CAAChB,cAAc,CAAC,CAACiB,OAAO,CAAC,CAAC,CAACC,UAAU,EAAEC,QAAQ,CAAC,KAAK;IACjE,IAAIA,QAAQ,CAACvB,IAAI,CAACwB,OAAO,IAAI5B,SAAS,CAACH,QAAQ,CAAC+B,OAAO,CAAC,CAAC,EAAE;MACzDC,OAAO,CAACC,GAAG,CAAC,6BAA6BJ,UAAU,EAAE,CAAC;MACtD,IAAIK,QAAQ,GAAG,CAAC;MAChB,IAAIC,YAAY,GAAGzD,cAAc,CAAC0D,MAAM;MACxC,IAAIP,UAAU,KAAKpD,cAAc,CAAC4C,OAAO,IAAIQ,UAAU,KAAKpD,cAAc,CAAC6C,QAAQ,EAAE;QACnFY,QAAQ,GAAG,CAAC;MACd;MACAxB,eAAe,CAAC2B,IAAI,CAAC;QAAEpC,IAAI,EAAE4B,UAAU;QAAEK,QAAQ;QAAEC,YAAY;QAAEG,MAAM,EAAE,QAAQ;QAAEC,MAAM,EAAE;MAAK,CAAC,CAAC;IACpG;EACF,CAAC,CAAC;EAEF,OAAO7B,eAAe;AACxB;AAEA,eAAe,SAAS8B,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGxF,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACyF,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG1F,QAAQ,CAAC,KAAK,CAAC;EACjE,MAAM,CAAC2F,aAAa,EAAEC,gBAAgB,CAAC,GAAG5F,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC6F,aAAa,EAAEC,gBAAgB,CAAC,GAAG9F,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC+F,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGhG,QAAQ,CAAC,IAAI,CAAC;EAChE,MAAM,CAACiG,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGlG,QAAQ,CAAC,KAAK,CAAC;EACnE,MAAM,CAACmG,WAAW,EAAEC,cAAc,CAAC,GAAGpG,QAAQ,CAAC,IAAI,CAAC;EACpD,MAAM,CAACqG,cAAc,EAAEC,iBAAiB,CAAC,GAAGtG,QAAQ,CAAC,IAAI,CAAC;EAC1D,MAAM,CAACuG,MAAM,EAAEC,SAAS,CAAC,GAAGxG,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM,CAACyG,eAAe,EAAEC,kBAAkB,CAAC,GAAG1G,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAAC2G,aAAa,EAAEC,gBAAgB,CAAC,GAAG5G,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAAC6G,wBAAwB,EAAEC,2BAA2B,CAAC,GAAG9G,QAAQ,CAAC,IAAI,CAAC;EAC9E,MAAM,CAAC+G,YAAY,EAAEC,eAAe,CAAC,GAAGhH,QAAQ,CAAC,IAAI,CAAC;EACtD,MAAM,CAACiH,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGlH,QAAQ,CAAC,KAAK,CAAC;EAC/D,MAAM,CAACmH,YAAY,EAAEC,eAAe,CAAC,GAAGpH,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACqH,kBAAkB,EAAEC,qBAAqB,CAAC,GAAGtH,QAAQ,CAAC,EAAE,CAAC;EAChE,MAAM,CAACuH,aAAa,EAAEC,gBAAgB,CAAC,GAAGxH,QAAQ,CAAC,KAAK,CAAC;EACzD,MAAM,CAACyH,iBAAiB,EAAEC,oBAAoB,CAAC,GAAG1H,QAAQ,CAAC,IAAI,CAAC;EAChE,MAAM,CAAC2H,qBAAqB,EAAEC,wBAAwB,CAAC,GAAG5H,QAAQ,CAAC,KAAK,CAAC;EACzE,MAAM,CAAC6H,kBAAkB,EAAEC,qBAAqB,CAAC,GAAG9H,QAAQ,CAAC,IAAI,CAAC;EAClE,MAAM,CAAC+H,QAAQ,EAAEC,WAAW,CAAC,GAAGhI,QAAQ,CAAC,KAAK,CAAC;EAE/C,MAAMiI,QAAQ,GAAG/H,MAAM,CAAC,IAAI,CAAC;EAC7B,MAAMgI,UAAU,GAAGhI,MAAM,CAAC,EAAE,CAAC;EAC7B,MAAMiI,SAAS,GAAGjI,MAAM,CAAC,KAAK,CAAC;EAC/B,MAAMkI,cAAc,GAAGlI,MAAM,CAAC,IAAI,CAAC;EACnC,MAAMmI,iBAAiB,GAAGnI,MAAM,CAAC,IAAI,CAAC;EACtC,MAAMoI,cAAc,GAAGpI,MAAM,CAAC,IAAI,CAAC;EAEnC,MAAMqI,QAAQ,GAAGpI,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACD,QAAQ,CAAC;EAC5D,MAAME,KAAK,GAAGtI,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACC,KAAK,CAAC;EACtD,MAAMC,YAAY,GAAGvI,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACE,YAAY,CAAC;EACpE,MAAMC,WAAW,GAAGxI,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACG,WAAW,CAAC;EAClE,MAAMC,WAAW,GAAGzI,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACI,WAAW,CAAC;EAClE,MAAMC,SAAS,GAAG1I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACK,SAAS,CAAC;EAC9D,MAAMC,mBAAmB,GAAG3I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACM,mBAAmB,IAAI,KAAK,CAAC;EAC3F,MAAMC,YAAY,GAAG5I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACO,YAAY,CAAC;EACpE,MAAMC,SAAS,GAAG7I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACQ,SAAS,CAAC;EAC9D,MAAMC,WAAW,GAAG9I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACS,WAAW,CAAC;EAClE,MAAMC,WAAW,GAAG/I,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACU,WAAW,CAAC;EAClE,MAAMC,kBAAkB,GAAGhJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACW,kBAAkB,KAAK,MAAM,CAAC,CAAC,CAAC,CAAC;EAC9F,MAAMC,MAAM,GAAGjJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACY,MAAM,IAAI,EAAE,CAAC;EAC9D,MAAMC,QAAQ,GAAGlJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACa,QAAQ,CAAC;EAC5D,MAAMC,iBAAiB,GAAGnJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACc,iBAAiB,CAAC;EAC9E,MAAMC,WAAW,GAAGpJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACe,WAAW,CAAC;EAClE,MAAMC,cAAc,GAASrJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACgB,cAAc,CAAC;EAC9E,MAAMC,iBAAiB,GAAMtJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACiB,iBAAiB,CAAC;EACjF,MAAMC,oBAAoB,GAAGvJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACkB,oBAAoB,CAAC;EACpF,MAAMC,mBAAmB,GAAIxJ,gBAAgB,CAAEqI,KAAK,IAAKA,KAAK,CAACmB,mBAAmB,CAAC;EAEnF1J,SAAS,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC8I,YAAY,CAAC,CAAC;EAEnC,MAAMa,cAAc,GAAGA,CAAA,KAAM;IAC3B,IAAIzB,SAAS,CAAC0B,OAAO,IAAI3B,UAAU,CAAC2B,OAAO,CAACC,MAAM,KAAK,CAAC,EAAE;IAC1D3B,SAAS,CAAC0B,OAAO,GAAG,IAAI;IACxB,MAAME,SAAS,GAAG7B,UAAU,CAAC2B,OAAO,CAACG,KAAK,CAAC,CAAC;IAC5C,IAAI,CAAC/B,QAAQ,CAAC4B,OAAO,EAAE5B,QAAQ,CAAC4B,OAAO,GAAG,IAAII,KAAK,CAAC,CAAC;IACrDhC,QAAQ,CAAC4B,OAAO,CAACK,GAAG,GAAGH,SAAS,CAACI,KAAK;IACtClC,QAAQ,CAAC4B,OAAO,CAACO,MAAM,GAAGL,SAAS,CAACK,MAAM,IAAI,GAAG;IACjDnC,QAAQ,CAAC4B,OAAO,CAACQ,OAAO,GAAG,MAAM;MAAElC,SAAS,CAAC0B,OAAO,GAAG,KAAK;MAAED,cAAc,CAAC,CAAC;IAAE,CAAC;IACjF3B,QAAQ,CAAC4B,OAAO,CAACS,OAAO,GAAG,MAAM;MAAEnC,SAAS,CAAC0B,OAAO,GAAG,KAAK;MAAED,cAAc,CAAC,CAAC;IAAE,CAAC;IACjF3B,QAAQ,CAAC4B,OAAO,CAACU,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM;MAAErC,SAAS,CAAC0B,OAAO,GAAG,KAAK;MAAED,cAAc,CAAC,CAAC;IAAE,CAAC,CAAC;EACvF,CAAC;EAED,MAAMa,mBAAmB,GAAGA,CAACC,SAAS,EAAEC,QAAQ,KAAK;IACnD,IAAI;MACF,MAAMR,KAAK,GAAG,IAAIF,KAAK,CAACS,SAAS,CAAC;MAClCP,KAAK,CAACC,MAAM,GAAG,GAAG;MAClBD,KAAK,CAACS,IAAI,GAAG,KAAK;MAClBT,KAAK,CAACI,IAAI,CAAC,CAAC,CAACC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOK,GAAG,EAAE,CAAC;EACjB,CAAC;EAED,MAAMC,gBAAgB,GAAG,MAAOC,IAAI,IAAK;IACvC,IAAI,CAACjC,mBAAmB,EAAE;IAC1B,IAAI;MACF,MAAMkC,YAAY,GAAG,MAAM1K,oBAAoB,CAACyK,IAAI,CAAC;MACrDC,YAAY,CAACvG,OAAO,CAACwG,GAAG,IAAIR,mBAAmB,CAACQ,GAAG,CAACd,KAAK,EAAEc,GAAG,CAACN,QAAQ,CAAC,CAAC;IAC3E,CAAC,CAAC,OAAOE,GAAG,EAAE,CAAC;EACjB,CAAC;EAED,MAAMK,mBAAmB,GAAG,MAAAA,CAAOH,IAAI,EAAEI,KAAK,GAAG,UAAU,KAAK;IAC9D,IAAI,CAACtC,SAAS,EAAE;IAChB,IAAI;MACFnD,oBAAoB,CAAC,IAAI,CAAC;MAC1B,MAAM0F,SAAS,GAAGL,IAAI,CAACM,OAAO,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAACA,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,CAACA,OAAO,CAAC,WAAW,EAAE,EAAE,CAAC;MAC3G,MAAMX,SAAS,GAAG,MAAMrK,aAAa,CAAC;QAAE0K,IAAI,EAAEK,SAAS;QAAED;MAAM,CAAC,CAAC;MACjEjD,UAAU,CAAC2B,OAAO,CAAC3E,IAAI,CAAC;QAAEiF,KAAK,EAAEO,SAAS;QAAE5H,IAAI,EAAE,aAAaqI,KAAK,EAAE;QAAEf,MAAM,EAAE;MAAI,CAAC,CAAC;MACtF,IAAI,CAACjC,SAAS,CAAC0B,OAAO,EAAED,cAAc,CAAC,CAAC;MACxClE,oBAAoB,CAAC,KAAK,CAAC;IAC7B,CAAC,CAAC,OAAOmF,GAAG,EAAE;MACZnF,oBAAoB,CAAC,KAAK,CAAC;MAC3B,MAAM4F,SAAS,GAAG,IAAIC,wBAAwB,CAACR,IAAI,CAAC;MACpDS,eAAe,CAACC,KAAK,CAACH,SAAS,CAAC;IAClC;EACF,CAAC;EAED,MAAMI,eAAe,GAAG,MAAOC,UAAU,IAAK;IAC5C,IAAI,CAAC9C,SAAS,EAAE;IAChB,MAAM+C,QAAQ,GAAG,OAAOD,UAAU,KAAK,QAAQ,GAAGA,UAAU,GAAGE,KAAK,CAACC,OAAO,CAACH,UAAU,CAAC,GAAGA,UAAU,CAACI,GAAG,CAACC,CAAC,IAAIA,CAAC,CAACjB,IAAI,CAAC,CAACkB,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE;IACrI,IAAInD,mBAAmB,IAAI8C,QAAQ,EAAEd,gBAAgB,CAACc,QAAQ,CAAC;IAC/D,IAAIC,KAAK,CAACC,OAAO,CAACH,UAAU,CAAC,EAAE;MAC7B,KAAK,MAAMO,KAAK,IAAIP,UAAU,EAAE;QAAA,IAAAQ,kBAAA,EAAAC,mBAAA,EAAAC,mBAAA;QAC9B,MAAMlB,KAAK,GAAG,CAAAgB,kBAAA,GAAAD,KAAK,CAACI,WAAW,cAAAH,kBAAA,eAAjBA,kBAAA,CAAmBlJ,WAAW,CAAC,CAAC,CAACJ,QAAQ,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,CAAAuJ,mBAAA,GAAAF,KAAK,CAACI,WAAW,cAAAF,mBAAA,eAAjBA,mBAAA,CAAmBnJ,WAAW,CAAC,CAAC,CAACJ,QAAQ,CAAC,KAAK,CAAC,GAAG,UAAU,GAAG,CAAAwJ,mBAAA,GAAAH,KAAK,CAACI,WAAW,cAAAD,mBAAA,eAAjBA,mBAAA,CAAmBpJ,WAAW,CAAC,CAAC,CAACJ,QAAQ,CAAC,OAAO,CAAC,GAAG,OAAO,GAAG,UAAU;QACpN,MAAMqI,mBAAmB,CAACgB,KAAK,CAACnB,IAAI,EAAEI,KAAK,CAAC;MAC9C;MACA;IACF;IACA,IAAI,OAAOQ,UAAU,KAAK,QAAQ,IAAIA,UAAU,CAACY,IAAI,CAAC,CAAC,EAAE;MACvD,MAAMC,QAAQ,GAAGjM,cAAc,CAACoL,UAAU,CAAC;MAC3C,KAAK,MAAMc,OAAO,IAAID,QAAQ,EAAE;QAC9B,MAAMtB,mBAAmB,CAACuB,OAAO,CAAC1B,IAAI,EAAE0B,OAAO,CAACtB,KAAK,CAAC;MACxD;IACF;EACF,CAAC;EAED,MAAMuB,cAAc,GAAGA,CAAC;IAAEC,KAAK;IAAEC;EAAO,CAAC,KAAK;IAC5C/H,OAAO,CAACC,GAAG,CAAC,aAAa,GAAG6H,KAAK,GAAG,GAAG,EAAEC,MAAM,CAAC;IAChD5F,eAAe,CAAC;MAAE2F,KAAK;MAAEC,MAAM;MAAEC,SAAS,EAAEC,IAAI,CAACC,GAAG,CAAC;IAAE,CAAC,CAAC;IACzD9D,WAAW,CAAC;MAAE0D,KAAK;MAAEC;IAAO,CAAC,CAAC;EAChC,CAAC;EAED,MAAMI,mBAAmB,GAAIC,SAAS,IAAK;IACzCnG,2BAA2B,CAACmG,SAAS,CAAC;IACtCrG,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC;EAED,MAAMsG,8BAA8B,GAAIC,WAAW,IAAK;IACtD,MAAMC,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAACsB,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKH,WAAW,CAACG,IAAI,GAAGH,WAAW,GAAGE,CAAC,CAAC;IAClFzE,WAAW,CAACwE,YAAY,CAAC;IACzBtG,2BAA2B,CAACqG,WAAW,CAAC;EAC1C,CAAC;EAED,MAAMI,qBAAqB,GAAIC,YAAY,IAAK;IAC9C,IAAI3G,wBAAwB,EAAE;MAC5B,MAAMsG,WAAW,GAAG;QAAE,GAAGtG,wBAAwB;QAAE4G,SAAS,EAAED;MAAa,CAAC;MAC5EN,8BAA8B,CAACC,WAAW,CAAC;IAC7C;EACF,CAAC;EAED,MAAMO,mBAAmB,GAAIT,SAAS,IAAK;IACzCvF,oBAAoB,CAACuF,SAAS,CAAC;IAC/BzF,gBAAgB,CAAC,IAAI,CAAC;EACxB,CAAC;EAED,MAAMmG,uBAAuB,GAAIR,WAAW,IAAK;IAC/C,MAAMC,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAACsB,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKH,WAAW,CAACG,IAAI,GAAGH,WAAW,GAAGE,CAAC,CAAC;IAClFzE,WAAW,CAACwE,YAAY,CAAC;IACzB1F,oBAAoB,CAACyF,WAAW,CAAC;EACnC,CAAC;EAED,MAAMS,uBAAuB,GAAIX,SAAS,IAAK;IAC7CnF,qBAAqB,CAACmF,SAAS,CAAC;IAChCrF,wBAAwB,CAAC,IAAI,CAAC;EAChC,CAAC;EAED,MAAMiG,uBAAuB,GAAIV,WAAW,IAAK;IAC/C,MAAMC,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAACsB,CAAC,IAAIA,CAAC,CAACC,IAAI,KAAKH,WAAW,CAACG,IAAI,GAAGH,WAAW,GAAGE,CAAC,CAAC;IAClFzE,WAAW,CAACwE,YAAY,CAAC;IACzBxF,wBAAwB,CAAC,KAAK,CAAC;IAC/BE,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAMgG,YAAY,GAAG,MAAO9B,CAAC,IAAK;IAChCA,CAAC,CAAC+B,cAAc,CAAC,CAAC;IAClB,IAAI,CAACxI,KAAK,CAACgH,IAAI,CAAC,CAAC,EAAE;IAEnB,IAAIyB,eAAe,GAAGzI,KAAK;IAC3B,IAAIwB,YAAY,IAAK+F,IAAI,CAACC,GAAG,CAAC,CAAC,GAAGhG,YAAY,CAAC8F,SAAS,GAAI,KAAK,EAAE;MACjEmB,eAAe,GAAG,GAAGzI,KAAK,oBAAoBwB,YAAY,CAAC4F,KAAK,KAAK5F,YAAY,CAAC6F,MAAM,GAAG;MAC3F/H,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEiC,YAAY,CAAC;MACpDC,eAAe,CAAC,IAAI,CAAC;IACvB;IAEA,IAAI;MACF,MAAMiH,UAAU,GAAG,MAAM7N,QAAQ,CAAC;QAAE8N,OAAO,EAAEF,eAAe;QAAEzF,QAAQ;QAAEE;MAAM,CAAC,CAAC;MAChFC,YAAY,CAACuF,UAAU,CAAC;MAExB,IAAIA,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEtC,UAAU,IAAIlD,KAAK,CAACqB,MAAM,GAAG,CAAC,EAAE;QAC9C;QACA,MAAMqE,QAAQ,GAAG1N,sBAAsB,CAACwN,UAAU,CAACtC,UAAU,EAAElD,KAAK,CAAC;QACrE,IAAI0F,QAAQ,EAAE;UACZvF,WAAW,CAACuF,QAAQ,CAACC,YAAY,CAAC;UAClC9H,iBAAiB,CAAC;YAAE+H,QAAQ,EAAEF,QAAQ,CAACG,OAAO;YAAEC,MAAM,EAAEJ,QAAQ,CAACD;UAAQ,CAAC,CAAC;UAC3E,IAAIC,QAAQ,CAACK,QAAQ,CAAC1E,MAAM,GAAG,CAAC,EAAE;YAChC2E,UAAU,CAAC,MAAMrI,cAAc,CAAC+H,QAAQ,CAACK,QAAQ,CAAC,EAAE,IAAI,CAAC;UAC3D;QACF;;QAEA;QACA,MAAME,SAAS,GAAG9N,qBAAqB,CAACqN,UAAU,CAACtC,UAAU,CAAC;QAC9D,IAAI+C,SAAS,CAAC5E,MAAM,GAAG,CAAC,EAAE;UACxB,MAAMsD,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAAC,CAAC4C,IAAI,EAAEC,KAAK,KAAK;YAC9C,IAAIA,KAAK,KAAK,CAAC,EAAE;cACf,IAAIpB,YAAY,GAAGmB,IAAI,CAAClB,SAAS,IAAI,EAAE;cACvCiB,SAAS,CAACjK,OAAO,CAACoK,IAAI,IAAI;gBAAErB,YAAY,GAAG3M,kBAAkB,CAAC2M,YAAY,EAAEqB,IAAI,CAAC;cAAE,CAAC,CAAC;cACrF,OAAO;gBAAE,GAAGF,IAAI;gBAAElB,SAAS,EAAED;cAAa,CAAC;YAC7C;YACA,OAAOmB,IAAI;UACb,CAAC,CAAC;UACF/F,WAAW,CAACwE,YAAY,CAAC;UACzB,MAAM0B,SAAS,GAAGJ,SAAS,CAAC3C,GAAG,CAACgD,CAAC,IAAIA,CAAC,CAACzB,IAAI,CAAC,CAACrB,IAAI,CAAC,IAAI,CAAC;UACvDwC,UAAU,CAAC,MAAMO,KAAK,CAAC,aAAaF,SAAS,GAAG,CAAC,EAAE,IAAI,CAAC;QAC1D;;QAEA;QACA,MAAMvL,eAAe,GAAGD,8BAA8B,CAAC2K,UAAU,CAACtC,UAAU,CAAC;QAC7E,IAAIpI,eAAe,CAACuG,MAAM,GAAG,CAAC,EAAE;UAC9BjF,OAAO,CAACC,GAAG,CAAC,4BAA4B,EAAEvB,eAAe,CAAC;UAC1D,MAAM6J,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAAC,CAAC4C,IAAI,EAAEC,KAAK,KAAK;YAC9C,IAAIA,KAAK,KAAK,CAAC,EAAE;cACf,IAAIzB,WAAW,GAAG;gBAAE,GAAGwB;cAAK,CAAC;cAC7BpL,eAAe,CAACkB,OAAO,CAACwK,UAAU,IAAI;gBACpC,MAAMC,MAAM,GAAG9N,kBAAkB,CAAC6N,UAAU,CAAC;gBAC7C,IAAIC,MAAM,EAAE/B,WAAW,GAAG9L,iBAAiB,CAAC8L,WAAW,EAAE+B,MAAM,CAAC;cAClE,CAAC,CAAC;cACF,OAAO/B,WAAW;YACpB;YACA,OAAOwB,IAAI;UACb,CAAC,CAAC;UACF/F,WAAW,CAACwE,YAAY,CAAC;UACzB,MAAM+B,WAAW,GAAG5L,eAAe,CAACwI,GAAG,CAACC,CAAC,IAAI;YAC3C,MAAMoD,SAAS,GAAGC,OAAO,CAAC,6BAA6B,CAAC,CAACC,yBAAyB,CAACtD,CAAC,CAAClJ,IAAI,CAAC;YAC1F,OAAOsM,SAAS,GAAGA,SAAS,CAAC9B,IAAI,GAAGtB,CAAC,CAAClJ,IAAI;UAC5C,CAAC,CAAC,CAACmJ,IAAI,CAAC,IAAI,CAAC;UACbwC,UAAU,CAAC,MAAM;YAAEO,KAAK,CAAC,4BAA4BG,WAAW,GAAG,CAAC;UAAE,CAAC,EAAE,IAAI,CAAC;QAChF;;QAEA;QACA,MAAMI,WAAW,GAAGzO,iBAAiB,CAACmN,UAAU,CAACtC,UAAU,CAAC;QAC5D,IAAI4D,WAAW,CAACzF,MAAM,GAAG,CAAC,EAAE;UAC1BjF,OAAO,CAACC,GAAG,CAAC,2BAA2B,EAAEyK,WAAW,CAAC;UACrDA,WAAW,CAAC9K,OAAO,CAAC+K,KAAK,IAAI;YAC3B,IAAIA,KAAK,CAAC1M,IAAI,KAAK,eAAe,IAAI0M,KAAK,CAACC,KAAK,EAAE;cACjDpG,QAAQ,CAACmG,KAAK,CAACC,KAAK,CAAC;cACrBhB,UAAU,CAAC,MAAM;gBAAEO,KAAK,CAAC,iBAAiBQ,KAAK,CAACC,KAAK,CAACC,KAAK,QAAQF,KAAK,CAACC,KAAK,CAACnD,WAAW,EAAE,CAAC;cAAE,CAAC,EAAE,IAAI,CAAC;YACzG,CAAC,MAAM,IAAIkD,KAAK,CAAC1M,IAAI,KAAK,iBAAiB,EAAE;cAC3C,MAAM6M,WAAW,GAAGvG,MAAM,CAACwG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,QAAQ,CAAC;cAC3D,IAAIH,WAAW,EAAE;gBACfrG,iBAAiB,CAACqG,WAAW,CAACI,EAAE,CAAC;gBACjC,IAAIJ,WAAW,CAACK,OAAO,CAACC,EAAE,GAAG,CAAC,EAAE;kBAC9B,MAAM9B,QAAQ,GAAGzN,cAAc,CAAC+H,KAAK,EAAEkH,WAAW,CAACK,OAAO,CAACC,EAAE,EAAE,UAAUN,WAAW,CAACD,KAAK,EAAE,CAAC;kBAC7F9G,WAAW,CAACuF,QAAQ,CAACC,YAAY,CAAC;kBAClC9H,iBAAiB,CAAC;oBAAE+H,QAAQ,EAAEsB,WAAW,CAACK,OAAO,CAACC,EAAE;oBAAE1B,MAAM,EAAE,mBAAmBoB,WAAW,CAACD,KAAK;kBAAG,CAAC,CAAC;kBACvG,IAAIvB,QAAQ,CAACK,QAAQ,CAAC1E,MAAM,GAAG,CAAC,EAAE;oBAChC2E,UAAU,CAAC,MAAMrI,cAAc,CAAC+H,QAAQ,CAACK,QAAQ,CAAC,EAAE,IAAI,CAAC;kBAC3D;gBACF;gBACAC,UAAU,CAAC,MAAM;kBAAEO,KAAK,CAAC,sBAAsBW,WAAW,CAACD,KAAK,oBAAoBC,WAAW,CAACK,OAAO,CAACC,EAAE,UAAUN,WAAW,CAACK,OAAO,CAACE,IAAI,OAAO,CAAC;gBAAE,CAAC,EAAE,IAAI,CAAC;cAChK;YACF,CAAC,MAAM,IAAIV,KAAK,CAAC1M,IAAI,KAAK,eAAe,EAAE;cACzC+B,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;YAC1C,CAAC,MAAM,IAAI0K,KAAK,CAAC1M,IAAI,KAAK,cAAc,EAAE;cACxC,MAAM6M,WAAW,GAAGvG,MAAM,CAACwG,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,QAAQ,CAAC;cAC3D,IAAIH,WAAW,EAAE;gBACfpG,WAAW,CAACoG,WAAW,CAACI,EAAE,EAAE;kBAAED,MAAM,EAAE,QAAQ;kBAAEK,WAAW,EAAE,IAAIrD,IAAI,CAAC,CAAC,CAACsD,WAAW,CAAC;gBAAE,CAAC,CAAC;gBACxF3B,UAAU,CAAC,MAAMO,KAAK,CAAC,mBAAmBW,WAAW,CAACD,KAAK,EAAE,CAAC,EAAE,IAAI,CAAC;cACvE;YACF;UACF,CAAC,CAAC;QACJ;;QAEA;QACA,MAAMW,gBAAgB,GAAGpP,yBAAyB,CAACgN,UAAU,CAACtC,UAAU,CAAC;QACzE,IAAI0E,gBAAgB,IAAI,CAAC7G,cAAc,EAAE;UACvC3E,OAAO,CAACC,GAAG,CAAC,uBAAuB,EAAEuL,gBAAgB,CAAC/C,IAAI,CAAC;UAC3D7D,iBAAiB,CAAC4G,gBAAgB,CAAC;UACnCrI,WAAW,CAAC,IAAI,CAAC;UACjByG,UAAU,CAAC,MAAM;YACfO,KAAK,CAAC,MAAMqB,gBAAgB,CAACC,IAAI,IAAID,gBAAgB,CAAC/C,IAAI,wBAAwB,CAAC;UACrF,CAAC,EAAE,IAAI,CAAC;QACV;;QAEA;QACA,MAAMiD,eAAe,GAAG5N,uBAAuB,CAACsL,UAAU,CAACtC,UAAU,CAAC;QACtE,IAAI4E,eAAe,EAAE;UACnB1L,OAAO,CAACC,GAAG,CAAC,qBAAqB,EAAEyL,eAAe,CAACzN,IAAI,CAAC;UACxD,IAAIyN,eAAe,CAACzN,IAAI,KAAK,OAAO,IAAI,EAACyD,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEiK,QAAQ,GAAE;YACzD/B,UAAU,CAAC,MAAM;cAAEO,KAAK,CAAC,wCAAwC,CAAC;cAAEtI,kBAAkB,CAAC,IAAI,CAAC;YAAE,CAAC,EAAE,IAAI,CAAC;UACxG,CAAC,MAAM,IAAI6J,eAAe,CAACzN,IAAI,KAAK,KAAK,IAAIyD,MAAM,aAANA,MAAM,eAANA,MAAM,CAAEiK,QAAQ,EAAE;YAC7D/B,UAAU,CAAC,MAAM;cAAEgC,eAAe,CAAC;gBAAE7D,MAAM,EAAE,SAAS;gBAAEsB,OAAO,EAAE,gCAAgC;gBAAEwC,QAAQ,EAAE;cAAI,CAAC,CAAC;YAAE,CAAC,EAAE,IAAI,CAAC;UAC/H;QACF;MACF;MAEAlQ,QAAQ,CAACyN,UAAU,CAAC0C,aAAa,EAAElI,KAAK,CAAC;MAEzC,IAAIwF,UAAU,aAAVA,UAAU,eAAVA,UAAU,CAAEtC,UAAU,EAAE;QAC1B,MAAMD,eAAe,CAACuC,UAAU,CAACtC,UAAU,CAAC;QAC5C,IAAIrD,cAAc,CAACuB,OAAO,EAAE;UAC1B,MAAM+G,KAAK,GAAGjQ,WAAW,CAACsN,UAAU,CAACtC,UAAU,EAAE,CAAApF,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEiK,QAAQ,KAAI,KAAK,CAAC;UAC3E,IAAII,KAAK,EAAEtI,cAAc,CAACuB,OAAO,CAACgH,SAAS,CAACD,KAAK,CAACE,KAAK,CAAC;QAC1D;MACF;MAEAtL,QAAQ,CAAC,EAAE,CAAC;IACd,CAAC,CAAC,OAAOqF,GAAG,EAAE;MACZhG,OAAO,CAACkM,KAAK,CAAC,eAAe,EAAElG,GAAG,CAAC;IACrC;EACF,CAAC;EAED,MAAMmG,kBAAkB,GAAGA,CAACC,cAAc,EAAEC,WAAW,KAAK;IAC1DvI,WAAW,CAAC;MAAE,GAAGsI,cAAc;MAAExI,KAAK,EAAEyI;IAAY,CAAC,CAAC;IACtDlC,KAAK,CAAC,+BAA+B,CAAC;EACxC,CAAC;EAED,MAAMmC,qBAAqB,GAAIC,gBAAgB,IAAK;IAClD,MAAMhE,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAAC4C,IAAI,IAAIA,IAAI,CAACrB,IAAI,KAAK8D,gBAAgB,CAAC9D,IAAI,GAAG8D,gBAAgB,GAAGzC,IAAI,CAAC;IACrG/F,WAAW,CAACwE,YAAY,CAAC;IACzBpH,oBAAoB,CAACoL,gBAAgB,CAAC;EACxC,CAAC;EAED,MAAMC,mBAAmB,GAAIpE,SAAS,IAAK;IACzCjH,oBAAoB,CAACiH,SAAS,CAAC;IAC/B/G,qBAAqB,CAAC,IAAI,CAAC;EAC7B,CAAC;EAED,MAAMoL,iBAAiB,GAAIC,SAAS,IAAK;IACvC/K,SAAS,CAAC+K,SAAS,CAAC;IACpB7K,kBAAkB,CAAC,KAAK,CAAC;IACzB,MAAM8K,UAAU,GAAGD,SAAS,CAACE,UAAU,CAACC,MAAM,CAACrE,CAAC,IAAIA,CAAC,CAACsE,OAAO,CAAC,CAAC5F,GAAG,CAACC,CAAC,IAAIA,CAAC,CAAC+D,EAAE,CAAC6B,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;IAC3FtK,qBAAqB,CAACuK,IAAI,IAAI;MAC5B,MAAMC,MAAM,GAAG,CAAC,GAAG,IAAIC,GAAG,CAAC,CAAC,GAAGF,IAAI,EAAE,GAAGL,UAAU,CAAC,CAAC,CAAC;MACrD3M,OAAO,CAACC,GAAG,CAAC,yBAAyB,EAAEgN,MAAM,CAAC;MAC9C,OAAOA,MAAM;IACf,CAAC,CAAC;IACF,IAAIxJ,cAAc,CAACuB,OAAO,EAAEvB,cAAc,CAACuB,OAAO,CAACgH,SAAS,CAAC,aAAa,CAAC;EAC7E,CAAC;EAED,MAAMmB,kBAAkB,GAAIC,aAAa,IAAKzL,SAAS,CAACyL,aAAa,CAAC;EAEtE,MAAMxB,eAAe,GAAI7D,MAAM,IAAK;IAClC,IAAItE,cAAc,CAACuB,OAAO,EAAE;MAC1B,IAAI+C,MAAM,CAACA,MAAM,KAAK,SAAS,EAAE;QAC/BtE,cAAc,CAACuB,OAAO,CAACgH,SAAS,CAAC,SAAS,CAAC;QAC3CpC,UAAU,CAAC,MAAM;UAAE,IAAInG,cAAc,CAACuB,OAAO,EAAEvB,cAAc,CAACuB,OAAO,CAACgH,SAAS,CAAC,kBAAkB,CAAC;QAAE,CAAC,EAAE,IAAI,CAAC;MAC/G,CAAC,MAAM,IAAIjE,MAAM,CAACA,MAAM,KAAK,QAAQ,EAAE;QACrCtE,cAAc,CAACuB,OAAO,CAACgH,SAAS,CAAC,QAAQ,CAAC;MAC5C;IACF;IACA,IAAIjE,MAAM,CAACA,MAAM,KAAK,SAAS,IAAIA,MAAM,CAAC8D,QAAQ,EAAE;MAClD,MAAMvC,QAAQ,GAAGzN,cAAc,CAAC+H,KAAK,EAAEmE,MAAM,CAAC8D,QAAQ,EAAE,gBAAgB,CAAC;MACzE9H,WAAW,CAACuF,QAAQ,CAACC,YAAY,CAAC;MAClC9H,iBAAiB,CAAC;QAAE+H,QAAQ,EAAEzB,MAAM,CAAC8D,QAAQ;QAAEnC,MAAM,EAAE;MAAkB,CAAC,CAAC;MAC3E,IAAIJ,QAAQ,CAACK,QAAQ,CAAC1E,MAAM,GAAG,CAAC,EAAE;QAChC2E,UAAU,CAAC,MAAMrI,cAAc,CAAC+H,QAAQ,CAACK,QAAQ,CAAC,EAAE,IAAI,CAAC;MAC3D;IACF;IACAhI,SAAS,CAAC,IAAI,CAAC;IACfwI,KAAK,CAACpC,MAAM,CAACsB,OAAO,CAAC;EACvB,CAAC;EAED,IAAI,CAAC3F,QAAQ,EAAE,oBACb7F,OAAA;IAAKwP,SAAS,EAAC,WAAW;IAACC,KAAK,EAAE;MAAEC,SAAS,EAAE,QAAQ;MAAEC,UAAU,EAAE;IAAQ,CAAE;IAAAC,QAAA,gBAC7E5P,OAAA;MAAA4P,QAAA,EAAI;IAAmB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eAC5BhQ,OAAA;MAAGyP,KAAK,EAAE;QAAEQ,KAAK,EAAE,MAAM;QAAEC,QAAQ,EAAE;MAAO,CAAE;MAAAN,QAAA,EAAC;IAA8C;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAG,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC9F,CAAC;EAGR,MAAMG,gBAAgB,GAAGzJ,MAAM,CAACsI,MAAM,CAAC7B,CAAC,IAAIA,CAAC,CAACC,MAAM,KAAK,QAAQ,CAAC,CAAChG,MAAM;EAEzE,oBACEpH,OAAA;IAAKyP,KAAK,EAAE;MAAEW,SAAS,EAAE,OAAO;MAAEC,UAAU,EAAE;IAAoD,CAAE;IAAAT,QAAA,gBAClG5P,OAAA;MAAKwP,SAAS,EAAC,WAAW;MAAAI,QAAA,gBAExB5P,OAAA;QAAKwP,SAAS,EAAC,YAAY;QAACC,KAAK,EAAE;UAAEa,YAAY,EAAE;QAAO,CAAE;QAAAV,QAAA,eAC1D5P,OAAA;UAAKyP,KAAK,EAAE;YAAEc,OAAO,EAAE,MAAM;YAAEC,cAAc,EAAE,eAAe;YAAEC,UAAU,EAAE;UAAS,CAAE;UAAAb,QAAA,gBACrF5P,OAAA;YAAA4P,QAAA,gBACE5P,OAAA;cAAIyP,KAAK,EAAE;gBAAEiB,MAAM,EAAE;cAAE,CAAE;cAAAd,QAAA,GAAE/J,QAAQ,CAAC8K,KAAK,EAAC,YAAU;YAAA;cAAAd,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAI,CAAC,eACzDhQ,OAAA;cAAGyP,KAAK,EAAE;gBAAEiB,MAAM,EAAE,WAAW;gBAAET,KAAK,EAAE,MAAM;gBAAEC,QAAQ,EAAE;cAAO,CAAE;cAAAN,QAAA,GAAC,cACtD,EAAC/J,QAAQ,CAAC+K,UAAU;YAAA;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC/B,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACD,CAAC,eACNhQ,OAAA;YAAKyP,KAAK,EAAE;cAAEc,OAAO,EAAE,MAAM;cAAEM,GAAG,EAAE,MAAM;cAAEC,QAAQ,EAAE;YAAO,CAAE;YAAAlB,QAAA,gBAC7D5P,OAAA;cAAQ+Q,OAAO,EAAEA,CAAA,KAAMvM,mBAAmB,CAAC,IAAI,CAAE;cAACgL,SAAS,EAAC,cAAc;cAACC,KAAK,EAAE;gBAAEuB,QAAQ,EAAE;cAAW,CAAE;cAAApB,QAAA,GAAC,qBAE1G,EAACO,gBAAgB,GAAG,CAAC,iBACnBnQ,OAAA;gBAAMyP,KAAK,EAAE;kBAACuB,QAAQ,EAAE,UAAU;kBAAEC,GAAG,EAAE,MAAM;kBAAEC,KAAK,EAAE,MAAM;kBAAEC,eAAe,EAAE,SAAS;kBAAElB,KAAK,EAAE,MAAM;kBAAEmB,YAAY,EAAE,KAAK;kBAAEC,KAAK,EAAE,MAAM;kBAAEC,MAAM,EAAE,MAAM;kBAAEf,OAAO,EAAE,MAAM;kBAAEE,UAAU,EAAE,QAAQ;kBAAED,cAAc,EAAE,QAAQ;kBAAEN,QAAQ,EAAE,MAAM;kBAAEqB,UAAU,EAAE,MAAM;kBAAEC,MAAM,EAAE;gBAAmB,CAAE;gBAAA5B,QAAA,EAChSO;cAAgB;gBAAAN,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACb,CACP;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eAEThQ,OAAA;cAAQ+Q,OAAO,EAAEA,CAAA,KAAMrM,eAAe,CAAC,IAAI,CAAE;cAAC8K,SAAS,EAAC,gBAAgB;cAACC,KAAK,EAAE;gBAAEuB,QAAQ,EAAE;cAAW,CAAE;cAAApB,QAAA,GAAC,uBAExG,EAACjL,kBAAkB,CAACyC,MAAM,GAAG,CAAC,iBAC5BpH,OAAA;gBAAMyP,KAAK,EAAE;kBAACuB,QAAQ,EAAE,UAAU;kBAAEC,GAAG,EAAE,MAAM;kBAAEC,KAAK,EAAE,MAAM;kBAAEC,eAAe,EAAE,SAAS;kBAAElB,KAAK,EAAE,MAAM;kBAAEmB,YAAY,EAAE,KAAK;kBAAEC,KAAK,EAAE,MAAM;kBAAEC,MAAM,EAAE,MAAM;kBAAEf,OAAO,EAAE,MAAM;kBAAEE,UAAU,EAAE,QAAQ;kBAAED,cAAc,EAAE,QAAQ;kBAAEN,QAAQ,EAAE,MAAM;kBAAEqB,UAAU,EAAE,MAAM;kBAAEC,MAAM,EAAE;gBAAmB,CAAE;gBAAA5B,QAAA,EAChSjL,kBAAkB,CAACyC;cAAM;gBAAAyI,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACtB,CACP;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACK,CAAC,eAGThQ,OAAA;cACE+Q,OAAO,EAAEA,CAAA,KAAM;gBACb,IAAI,CAACjK,cAAc,EAAEC,iBAAiB,CAACvI,cAAc,CAACC,cAAc,CAACgT,OAAO,EAAE,qBAAqB,CAAC,CAAC;gBACrGnM,WAAW,CAAC,IAAI,CAAC;cACnB,CAAE;cACFkK,SAAS,EAAC,KAAK;cACfC,KAAK,EAAE;gBACL0B,eAAe,EAAErK,cAAc,GAAG,SAAS,GAAG,SAAS;gBACvDmJ,KAAK,EAAEnJ,cAAc,GAAG,MAAM,GAAG,SAAS;gBAC1C0K,MAAM,EAAE,mBAAmB;gBAC3BR,QAAQ,EAAE;cACZ,CAAE;cAAApB,QAAA,GACH,eACI,EAAC9I,cAAc,GAAGA,cAAc,CAAC8D,IAAI,GAAG,MAAM;YAAA;cAAAiF,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC3C,CAAC,eAEThQ,OAAA;cAAQ+Q,OAAO,EAAEA,CAAA,KAAM/M,kBAAkB,CAAC,IAAI,CAAE;cAACwL,SAAS,EAAC,gBAAgB;cAAAI,QAAA,EAAC;YAAS;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC9FhQ,OAAA;cAAQ+Q,OAAO,EAAEA,CAAA,KAAM7N,gBAAgB,CAAC,IAAI,CAAE;cAACsM,SAAS,EAAC,iBAAiB;cAAAI,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eAC3FhQ,OAAA;cAAQ+Q,OAAO,EAAEA,CAAA,KAAM3N,gBAAgB,CAAC,IAAI,CAAE;cAACoM,SAAS,EAAC,cAAc;cAAAI,QAAA,EAAC;YAAO;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhQ,OAAA;QAAKwP,SAAS,EAAC,YAAY;QAAAI,QAAA,gBACzB5P,OAAA;UAAIyP,KAAK,EAAE;YAAEiB,MAAM,EAAE;UAAa,CAAE;UAAAd,QAAA,EAAC;QAAiB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC3DhQ,OAAA;UAAKyP,KAAK,EAAE;YAAEc,OAAO,EAAE,MAAM;YAAEmB,aAAa,EAAE,QAAQ;YAAEb,GAAG,EAAE;UAAO,CAAE;UAAAjB,QAAA,gBACpE5P,OAAA;YAAOyP,KAAK,EAAE;cAAEc,OAAO,EAAE,MAAM;cAAEE,UAAU,EAAE,QAAQ;cAAEI,GAAG,EAAE,MAAM;cAAEc,MAAM,EAAE;YAAU,CAAE;YAAA/B,QAAA,gBACtF5P,OAAA;cAAOI,IAAI,EAAC,UAAU;cAACwR,OAAO,EAAEzL,SAAU;cAAC0L,QAAQ,EAAErL;YAAY;cAAAqJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACpEhQ,OAAA;cAAA4P,QAAA,GAAM,qCAAoB,EAACzJ,SAAS,GAAG,IAAI,GAAG,KAAK;YAAA;cAAA0J,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtD,CAAC,eACRhQ,OAAA;YAAOyP,KAAK,EAAE;cAAEc,OAAO,EAAE,MAAM;cAAEE,UAAU,EAAE,QAAQ;cAAEI,GAAG,EAAE,MAAM;cAAEc,MAAM,EAAE;YAAU,CAAE;YAAA/B,QAAA,gBACtF5P,OAAA;cAAOI,IAAI,EAAC,UAAU;cAACwR,OAAO,EAAExL,mBAAoB;cAACyL,QAAQ,EAAEpL;YAAmB;cAAAoJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAE,CAAC,eACrFhQ,OAAA;cAAA4P,QAAA,GAAM,6BAAiB,EAACxJ,mBAAmB,GAAG,IAAI,GAAG,KAAK;YAAA;cAAAyJ,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAO,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC7D,CAAC,EACPjN,iBAAiB,iBAAI/C,OAAA;YAAKyP,KAAK,EAAE;cAAEqC,SAAS,EAAE,KAAK;cAAE7B,KAAK,EAAE,MAAM;cAAEC,QAAQ,EAAE;YAAO,CAAE;YAAAN,QAAA,EAAC;UAAqB;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjH,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhQ,OAAA;QAAKwP,SAAS,EAAC,OAAO;QAAAI,QAAA,gBACpB5P,OAAA;UAAIyP,KAAK,EAAE;YAAEa,YAAY,EAAE;UAAO,CAAE;UAAAV,QAAA,EAAC;QAAa;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACvDhQ,OAAA;UAAKwP,SAAS,EAAC,gBAAgB;UAAAI,QAAA,EAC5B7J,KAAK,CAACsD,GAAG,CAAC,CAACsB,CAAC,EAAE0B,CAAC,KAAK;YAAA,IAAA0F,aAAA,EAAAC,aAAA;YACnB,MAAMC,SAAS,GAAItH,CAAC,CAACuH,EAAE,GAAGvH,CAAC,CAACwH,KAAK,GAAI,GAAG;YACxC,MAAMC,OAAO,GAAGH,SAAS,GAAG,EAAE,GAAG,SAAS,GAAGA,SAAS,GAAG,EAAE,GAAG,SAAS,GAAG,SAAS;YACnF,MAAMI,aAAa,GAAGhU,oBAAoB,CAACsM,CAAC,CAAC2H,KAAK,CAAC,KAChDjU,oBAAoB,CAACsM,CAAC,CAAC2H,KAAK,CAAC,KAAK,OAAO,IAAIhU,aAAa,CAACqM,CAAC,CAAC,CAAC;YACjE,MAAM4H,aAAa,GAAG,EAAAR,aAAA,GAAApH,CAAC,CAAC6H,UAAU,cAAAT,aAAA,uBAAZA,aAAA,CAAc3K,MAAM,KAAI,CAAC;YAE/C,oBACEpH,OAAA;cAAawP,SAAS,EAAC,iBAAiB;cAACuB,OAAO,EAAEA,CAAA,KAAMpC,mBAAmB,CAAChE,CAAC,CAAE;cAAC8E,KAAK,EAAE;gBAAEkC,MAAM,EAAE;cAAU,CAAE;cAAA/B,QAAA,gBAC3G5P,OAAA;gBAAKyP,KAAK,EAAE;kBAAEc,OAAO,EAAE,MAAM;kBAAEC,cAAc,EAAE,eAAe;kBAAEC,UAAU,EAAE,YAAY;kBAAEH,YAAY,EAAE;gBAAO,CAAE;gBAAAV,QAAA,gBAC/G5P,OAAA;kBAAA4P,QAAA,gBACE5P,OAAA;oBAAIyP,KAAK,EAAE;sBAAEiB,MAAM,EAAE;oBAAY,CAAE;oBAAAd,QAAA,EAAEjF,CAAC,CAACC;kBAAI;oBAAAiF,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAK,CAAC,eACjDhQ,OAAA;oBAAGyP,KAAK,EAAE;sBAAEiB,MAAM,EAAE,CAAC;sBAAER,QAAQ,EAAE,MAAM;sBAAED,KAAK,EAAE;oBAAO,CAAE;oBAAAL,QAAA,GAAC,MACpD,EAACjF,CAAC,CAAC8H,KAAK,EAAC,GAAC,EAAC9H,CAAC,CAAC+H,IAAI,EAAC,GAAC,EAAC/H,CAAC,CAAC2H,KAAK,EAC9BD,aAAa,iBAAIrS,OAAA;sBAAMyP,KAAK,EAAE;wBAAEkD,UAAU,EAAE,KAAK;wBAAE1C,KAAK,EAAE;sBAAU,CAAE;sBAAAL,QAAA,EAAC;oBAAC;sBAAAC,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OAAM,CAAC;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAC/E,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACD,CAAC,eACNhQ,OAAA;kBAAKyP,KAAK,EAAE;oBAAEc,OAAO,EAAE,MAAM;oBAAEM,GAAG,EAAE,KAAK;oBAAEC,QAAQ,EAAE;kBAAO,CAAE;kBAAAlB,QAAA,gBAC5D5P,OAAA;oBAAQ+Q,OAAO,EAAGzH,CAAC,IAAK;sBAAEA,CAAC,CAACsJ,eAAe,CAAC,CAAC;sBAAEjE,mBAAmB,CAAChE,CAAC,CAAC;oBAAE,CAAE;oBAAC6E,SAAS,EAAC,wBAAwB;oBAAAI,QAAA,EAAC;kBAAQ;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,eAC9HhQ,OAAA;oBAAQ+Q,OAAO,EAAGzH,CAAC,IAAK;sBAAEA,CAAC,CAACsJ,eAAe,CAAC,CAAC;sBAAEtI,mBAAmB,CAACK,CAAC,CAAC;oBAAE,CAAE;oBAAC6E,SAAS,EAAC,qBAAqB;oBAAAI,QAAA,EAAC;kBAAM;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CAAC,EACxHqC,aAAa,iBACZrS,OAAA;oBAAQ+Q,OAAO,EAAGzH,CAAC,IAAK;sBAAEA,CAAC,CAACsJ,eAAe,CAAC,CAAC;sBAAE5H,mBAAmB,CAACL,CAAC,CAAC;oBAAE,CAAE;oBAAC6E,SAAS,EAAC,YAAY;oBAACC,KAAK,EAAE;sBAAC0B,eAAe,EAAE,SAAS;sBAAElB,KAAK,EAAE,OAAO;sBAAE4C,OAAO,EAAE,SAAS;sBAAE3C,QAAQ,EAAE;oBAAM,CAAE;oBAAAN,QAAA,EAAC;kBAE5L;oBAAAC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAQ,CACT,eACDhQ,OAAA;oBACE+Q,OAAO,EAAGzH,CAAC,IAAK;sBAAEA,CAAC,CAACsJ,eAAe,CAAC,CAAC;sBAAE1H,uBAAuB,CAACP,CAAC,CAAC;oBAAE,CAAE;oBACrE6E,SAAS,EAAC,YAAY;oBACtBC,KAAK,EAAE;sBAAC0B,eAAe,EAAE,SAAS;sBAAElB,KAAK,EAAE,OAAO;sBAAE4C,OAAO,EAAE,SAAS;sBAAE3C,QAAQ,EAAE,MAAM;sBAAEc,QAAQ,EAAE;oBAAU,CAAE;oBAAApB,QAAA,GACjH,sBAEC,EAAC2C,aAAa,GAAG,CAAC,iBAChBvS,OAAA;sBAAMyP,KAAK,EAAE;wBAACuB,QAAQ,EAAE,UAAU;wBAAEC,GAAG,EAAE,MAAM;wBAAEC,KAAK,EAAE,MAAM;wBAAEC,eAAe,EAAE,SAAS;wBAAElB,KAAK,EAAE,OAAO;wBAAEmB,YAAY,EAAE,KAAK;wBAAEC,KAAK,EAAE,MAAM;wBAAEC,MAAM,EAAE,MAAM;wBAAEpB,QAAQ,EAAE,MAAM;wBAAEK,OAAO,EAAE,MAAM;wBAAEE,UAAU,EAAE,QAAQ;wBAAED,cAAc,EAAE,QAAQ;wBAAEe,UAAU,EAAE;sBAAM,CAAE;sBAAA3B,QAAA,EACpQ2C;oBAAa;sBAAA1C,QAAA,EAAAC,YAAA;sBAAAC,UAAA;sBAAAC,YAAA;oBAAA,OACV,CACP;kBAAA;oBAAAH,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OACK,CAAC;gBAAA;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACN,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,eACNhQ,OAAA;gBAAKyP,KAAK,EAAE;kBAAEqC,SAAS,EAAE;gBAAO,CAAE;gBAAAlC,QAAA,gBAChC5P,OAAA;kBAAKyP,KAAK,EAAE;oBAAES,QAAQ,EAAE,MAAM;oBAAED,KAAK,EAAE,MAAM;oBAAEK,YAAY,EAAE;kBAAM,CAAE;kBAAAV,QAAA,GAAC,MAAI,EAACjF,CAAC,CAACuH,EAAE,EAAC,KAAG,EAACvH,CAAC,CAACwH,KAAK;gBAAA;kBAAAtC,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAM,CAAC,eAClGhQ,OAAA;kBAAKwP,SAAS,EAAC,cAAc;kBAAAI,QAAA,eAC3B5P,OAAA;oBAAKwP,SAAS,EAAC,eAAe;oBAACC,KAAK,EAAE;sBAAE4B,KAAK,EAAE,GAAGY,SAAS,GAAG;sBAAEd,eAAe,EAAEiB;oBAAQ;kBAAE;oBAAAvC,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC3F,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACH,CAAC,EACLrF,CAAC,CAAC4C,EAAE,KAAKuF,SAAS,iBAAI9S,OAAA;gBAAKyP,KAAK,EAAE;kBAAEqC,SAAS,EAAE,KAAK;kBAAE5B,QAAQ,EAAE,MAAM;kBAAED,KAAK,EAAE;gBAAO,CAAE;gBAAAL,QAAA,GAAC,MAAI,EAACjF,CAAC,CAAC4C,EAAE;cAAA;gBAAAsC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAM,CAAC,EACzGqC,aAAa,MAAAL,aAAA,GAAIrH,CAAC,CAACoI,UAAU,cAAAf,aAAA,uBAAZA,aAAA,CAAc7K,OAAO,kBACrCnH,OAAA;gBAAKyP,KAAK,EAAE;kBAAEqC,SAAS,EAAE,KAAK;kBAAE5B,QAAQ,EAAE,MAAM;kBAAED,KAAK,EAAE;gBAAU,CAAE;gBAAAL,QAAA,GAAC,eACvD,EAACjF,CAAC,CAACoI,UAAU,CAAC5L,OAAO,CAAC6H,MAAM,CAACgE,CAAC,IAAIA,CAAC,GAAG,CAAC,CAAC,CAAC5L,MAAM,GAAG,CAAC,GAC9DuD,CAAC,CAACoI,UAAU,CAAC5L,OAAO,CAAC8L,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC5J,GAAG,CAAC,CAAC6J,KAAK,EAAE7G,CAAC,KAAK6G,KAAK,GAAG,CAAC,GAAG,GAAG7G,CAAC,GAAC,CAAC,IAAI6G,KAAK,GAAG,GAAG,EAAE,CAAC,CAAC3J,IAAI,CAAC,EAAE,CAAC,CAACM,IAAI,CAAC,CAAC,GACrG,MAAM;cAAA;gBAAAgG,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACP,CACN,eACDhQ,OAAA,CAACL,kBAAkB;gBACjB4K,SAAS,EAAEI,CAAE;gBACbwI,iBAAiB,EAAGC,OAAO,IAAK;kBAC9B,MAAM1I,YAAY,GAAG3E,KAAK,CAACsD,GAAG,CAAC4C,IAAI,IAAIA,IAAI,CAACrB,IAAI,KAAKwI,OAAO,CAACxI,IAAI,GAAGwI,OAAO,GAAGnH,IAAI,CAAC;kBACnF/F,WAAW,CAACwE,YAAY,CAAC;gBAC3B,CAAE;gBACF2I,OAAO,EAAE;cAAK;gBAAAxD,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACf,CAAC;YAAA,GApDM3D,CAAC;cAAAwD,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAqDN,CAAC;UAEV,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNhQ,OAAA;QAAKyP,KAAK,EAAE;UAAEa,YAAY,EAAE;QAAO,CAAE;QAAAV,QAAA,eACnC5P,OAAA,CAACjB,UAAU;UAACuU,MAAM,EAAEtJ;QAAe;UAAA6F,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC,eAGNhQ,OAAA;QAAKwP,SAAS,EAAC,YAAY;QAAAI,QAAA,gBACzB5P,OAAA;UAAIyP,KAAK,EAAE;YAAEiB,MAAM,EAAE;UAAa,CAAE;UAAAd,QAAA,EAAC;QAAgB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAC1DhQ,OAAA,CAAClB,OAAO;UAACyU,OAAO,EAAE1N,QAAQ,CAAC0N;QAAQ;UAAA1D,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC,eAGNhQ,OAAA;QAAKwP,SAAS,EAAC,MAAM;QAAAI,QAAA,eACnB5P,OAAA;UAAMwT,QAAQ,EAAEpI,YAAa;UAACqE,KAAK,EAAE;YAAEc,OAAO,EAAE,MAAM;YAAEM,GAAG,EAAE;UAAO,CAAE;UAAAjB,QAAA,gBACpE5P,OAAA;YAAOyT,KAAK,EAAE5Q,KAAM;YAACgP,QAAQ,EAAGvI,CAAC,IAAKxG,QAAQ,CAACwG,CAAC,CAACoK,MAAM,CAACD,KAAK,CAAE;YAACE,WAAW,EAAC,iBAAiB;YAACnE,SAAS,EAAC,OAAO;YAACoE,QAAQ,EAAE7Q,iBAAkB;YAAC0M,KAAK,EAAE;cAAEoE,IAAI,EAAE;YAAE;UAAE;YAAAhE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC,eACnKhQ,OAAA;YAAQI,IAAI,EAAC,QAAQ;YAACwT,QAAQ,EAAE7Q,iBAAkB;YAACyM,SAAS,EAAC,iBAAiB;YAAAI,QAAA,EAAC;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1F;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACJ,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC,EAGLnM,MAAM,IAAIA,MAAM,CAACiK,QAAQ,iBAAI9N,OAAA,CAACZ,aAAa;MAACyE,MAAM,EAAEA,MAAO;MAACiQ,QAAQ,EAAExE,kBAAmB;MAACyE,KAAK,EAAEhG,eAAgB;MAAChI,KAAK,EAAEA,KAAM;MAACG,WAAW,EAAEA;IAAY;MAAA2J,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAC5JjM,eAAe,iBAAI/D,OAAA,CAACX,gBAAgB;MAAC0G,KAAK,EAAEA,KAAM;MAACiO,OAAO,EAAEpF,iBAAkB;MAACqF,OAAO,EAAEA,CAAA,KAAMjQ,kBAAkB,CAAC,KAAK;IAAE;MAAA6L,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAC3HvM,WAAW,iBAAIzD,OAAA,CAACd,mBAAmB;MAAC4M,QAAQ,EAAErI,WAAY;MAACwQ,OAAO,EAAEA,CAAA,KAAMvQ,cAAc,CAAC,IAAI;IAAE;MAAAmM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAClGrM,cAAc,iBAAI3D,OAAA,CAACb,cAAc;MAACwM,QAAQ,EAAEhI,cAAc,CAACgI,QAAS;MAACE,MAAM,EAAElI,cAAc,CAACkI,MAAO;MAACqI,UAAU,EAAEA,CAAA,KAAMtQ,iBAAiB,CAAC,IAAI;IAAE;MAAAiM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EACjJzM,kBAAkB,IAAIF,iBAAiB,iBAAIrD,OAAA,CAACf,cAAc;MAACsL,SAAS,EAAElH,iBAAkB;MAACyQ,QAAQ,EAAErF,qBAAsB;MAACwF,OAAO,EAAEA,CAAA,KAAM;QAAEzQ,qBAAqB,CAAC,KAAK,CAAC;QAAEF,oBAAoB,CAAC,IAAI,CAAC;MAAE;IAAE;MAAAuM,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,EAE1M/L,aAAa,IAAIE,wBAAwB,iBACxCnE,OAAA;MAAKyP,KAAK,EAAE;QAAEuB,QAAQ,EAAE,OAAO;QAAEC,GAAG,EAAE,CAAC;QAAEkD,IAAI,EAAE,CAAC;QAAEjD,KAAK,EAAE,CAAC;QAAEkD,MAAM,EAAE,CAAC;QAAEjD,eAAe,EAAE,iBAAiB;QAAEZ,OAAO,EAAE,MAAM;QAAEE,UAAU,EAAE,QAAQ;QAAED,cAAc,EAAE,QAAQ;QAAE6D,MAAM,EAAE,IAAI;QAAExB,OAAO,EAAE,MAAM;QAAEyB,QAAQ,EAAE;MAAO,CAAE;MAAA1E,QAAA,eAC5N5P,OAAA;QAAKyP,KAAK,EAAE;UAAE8E,QAAQ,EAAE,OAAO;UAAElD,KAAK,EAAE,MAAM;UAAEL,QAAQ,EAAE;QAAW,CAAE;QAAApB,QAAA,gBACrE5P,OAAA;UAAQ+Q,OAAO,EAAEA,CAAA,KAAM7M,gBAAgB,CAAC,KAAK,CAAE;UAACuL,KAAK,EAAE;YAAEuB,QAAQ,EAAE,UAAU;YAAEC,GAAG,EAAE,OAAO;YAAEC,KAAK,EAAE,OAAO;YAAEC,eAAe,EAAE,SAAS;YAAElB,KAAK,EAAE,OAAO;YAAEuB,MAAM,EAAE,MAAM;YAAEJ,YAAY,EAAE,KAAK;YAAEC,KAAK,EAAE,MAAM;YAAEC,MAAM,EAAE,MAAM;YAAEpB,QAAQ,EAAE,MAAM;YAAEyB,MAAM,EAAE,SAAS;YAAE0C,MAAM,EAAE,CAAC;YAAEG,SAAS,EAAE;UAA4B,CAAE;UAAA5E,QAAA,EAAC;QAAC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC,eACjUhQ,OAAA,CAACT,cAAc;UAACgL,SAAS,EAAEpG,wBAAyB;UAAC4G,SAAS,EAAE5G,wBAAwB,CAAC4G,SAAS,IAAI,EAAG;UAACoI,iBAAiB,EAAE3I,8BAA+B;UAACiK,iBAAiB,EAAE5J;QAAsB;UAAAgF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACtM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACN,EAEAzL,gBAAgB,iBACfvE,OAAA,CAACR,YAAY;MAACkH,MAAM,EAAEA,MAAO;MAACgO,aAAa,EAAE7N,WAAY;MAAC8N,eAAe,EAAE/N,iBAAkB;MAACqN,OAAO,EAAEA,CAAA,KAAMzP,mBAAmB,CAAC,KAAK;IAAE;MAAAqL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC3I,EAEAvL,YAAY,iBACXzE,OAAA,CAACP,QAAQ;MAACkF,kBAAkB,EAAEA,kBAAmB;MAACsP,OAAO,EAAEA,CAAA,KAAMvP,eAAe,CAAC,KAAK;IAAE;MAAAmL,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC3F,EAEAnL,aAAa,IAAIE,iBAAiB,iBACjC/E,OAAA,CAACN,SAAS;MAAC6K,SAAS,EAAExF,iBAAkB;MAACoO,iBAAiB,EAAElI,uBAAwB;MAACgJ,OAAO,EAAEA,CAAA,KAAM;QAAEnP,gBAAgB,CAAC,KAAK,CAAC;QAAEE,oBAAoB,CAAC,IAAI,CAAC;MAAE;IAAE;MAAA6K,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAChK,EAEA/K,qBAAqB,IAAIE,kBAAkB,iBAC1CnF,OAAA,CAACJ,sBAAsB;MAAC2K,SAAS,EAAEpF,kBAAmB;MAACyP,OAAO,EAAEzJ,uBAAwB;MAAC8I,OAAO,EAAEA,CAAA,KAAM;QAAE/O,wBAAwB,CAAC,KAAK,CAAC;QAAEE,qBAAqB,CAAC,IAAI,CAAC;MAAE;IAAE;MAAAyK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAC7K,EAGA3K,QAAQ,IAAIyB,cAAc,iBACzB9G,OAAA,CAACF,SAAS;MACR+U,QAAQ,EAAE/N,cAAe;MACzBf,KAAK,EAAEA,KAAM;MACb+O,aAAa,EAAE5O,WAAY;MAC3B6O,gBAAgB,EAAE/N,oBAAqB;MACvCiN,OAAO,EAAEA,CAAA,KAAM;QACb3O,WAAW,CAAC,KAAK,CAAC;QAClB2B,mBAAmB,CAAC,CAAC;MACvB;IAAE;MAAA4I,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CACF,eAEDhQ,OAAA,CAAChB,aAAa;MAACgW,MAAM,EAAE/R,aAAc;MAACgR,OAAO,EAAEA,CAAA,KAAM/Q,gBAAgB,CAAC,KAAK,CAAE;MAAC+R,IAAI,EAAC,MAAM;MAACpP,QAAQ,EAAEA,QAAS;MAACE,KAAK,EAAEA,KAAM;MAACmP,MAAM,EAAE5G;IAAmB;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC1JhQ,OAAA,CAAChB,aAAa;MAACgW,MAAM,EAAE7R,aAAc;MAAC8Q,OAAO,EAAEA,CAAA,KAAM7Q,gBAAgB,CAAC,KAAK,CAAE;MAAC6R,IAAI,EAAC,MAAM;MAACpP,QAAQ,EAAEA,QAAS;MAACE,KAAK,EAAEA,KAAM;MAACmP,MAAM,EAAE5G;IAAmB;MAAAuB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eAC1JhQ,OAAA,CAACV,WAAW;MAAC6V,GAAG,EAAEvP;IAAe;MAAAiK,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACpChQ,OAAA,CAACH,aAAa;MAACmR,QAAQ,EAAC;IAAO;MAAAnB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAC/B,CAAC;AAEV;AAACpN,EAAA,CAhkBuBD,UAAU;EAAA,QA8BflF,gBAAgB,EACnBA,gBAAgB,EACTA,gBAAgB,EACjBA,gBAAgB,EAChBA,gBAAgB,EAClBA,gBAAgB,EACNA,gBAAgB,EACvBA,gBAAgB,EACnBA,gBAAgB,EACdA,gBAAgB,EAChBA,gBAAgB,EACTA,gBAAgB,EAC5BA,gBAAgB,EACdA,gBAAgB,EACPA,gBAAgB,EACtBA,gBAAgB,EACPA,gBAAgB,EAChBA,gBAAgB,EAChBA,gBAAgB,EAChBA,gBAAgB;AAAA;AAAA2X,EAAA,GAjDvBzS,UAAU;AAAA,IAAAyS,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}