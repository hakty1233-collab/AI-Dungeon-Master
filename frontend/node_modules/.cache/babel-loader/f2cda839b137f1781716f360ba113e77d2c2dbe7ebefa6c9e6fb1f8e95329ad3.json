{"ast":null,"code":"// frontend/src/utils/combatSystem.js - ENHANCED WITH BESTIARY\n\n/**\n * D&D 5e Combat System - Enhanced\n * 50+ enemies, weaknesses, resistances, special abilities\n */\n\nimport { getModifier } from './characterSystem';\n\n/**\n * Damage types\n */\nexport const DAMAGE_TYPES = {\n  SLASHING: 'slashing',\n  PIERCING: 'piercing',\n  BLUDGEONING: 'bludgeoning',\n  FIRE: 'fire',\n  COLD: 'cold',\n  LIGHTNING: 'lightning',\n  POISON: 'poison',\n  ACID: 'acid',\n  NECROTIC: 'necrotic',\n  RADIANT: 'radiant',\n  FORCE: 'force',\n  PSYCHIC: 'psychic'\n};\n\n/**\n * Enemy categories for organization\n */\nexport const ENEMY_CATEGORIES = {\n  BEASTS: 'Beasts',\n  HUMANOIDS: 'Humanoids',\n  UNDEAD: 'Undead',\n  DRAGONS: 'Dragons',\n  FIENDS: 'Fiends',\n  CELESTIALS: 'Celestials',\n  ELEMENTALS: 'Elementals',\n  CONSTRUCTS: 'Constructs',\n  ABERRATIONS: 'Aberrations',\n  PLANTS: 'Plants'\n};\n\n/**\n * Expanded Enemy Templates - 50+ Enemies!\n */\nexport const ENEMY_TEMPLATES = {\n  // ==================== BEASTS (CR 0-5) ====================\n  wolf: {\n    name: 'Wolf',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 0.25,\n    hp: 11,\n    maxHp: 11,\n    ac: 13,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 4,\n      damage: '2d4+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Pack Tactics: Advantage on attack rolls if ally is within 5ft of target',\n    xpValue: 50,\n    description: 'A cunning predator that hunts in packs.'\n  },\n  bear: {\n    name: 'Brown Bear',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 1,\n    hp: 34,\n    maxHp: 34,\n    ac: 11,\n    initiative: 0,\n    attacks: [{\n      name: 'Claw',\n      bonus: 5,\n      damage: '2d6+4',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+4',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Multiattack: Can use Claw twice',\n    xpValue: 200,\n    description: 'A massive bear with powerful claws.'\n  },\n  giant_spider: {\n    name: 'Giant Spider',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 1,\n    hp: 26,\n    maxHp: 26,\n    ac: 14,\n    initiative: 3,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+3',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.FIRE],\n    immunities: [],\n    special: 'Web: Can restrain targets with webbing',\n    xpValue: 200,\n    description: 'A monstrous arachnid that lurks in dark places.'\n  },\n  // ==================== HUMANOIDS (CR 0-5) ====================\n  goblin: {\n    name: 'Goblin',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.25,\n    hp: 7,\n    maxHp: 7,\n    ac: 15,\n    initiative: 2,\n    attacks: [{\n      name: 'Scimitar',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Shortbow',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Nimble Escape: Can Disengage or Hide as bonus action',\n    xpValue: 50,\n    description: 'Small, evil humanoids that raid and pillage.'\n  },\n  bandit: {\n    name: 'Bandit',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.125,\n    hp: 11,\n    maxHp: 11,\n    ac: 12,\n    initiative: 1,\n    attacks: [{\n      name: 'Scimitar',\n      bonus: 3,\n      damage: '1d6+1',\n      damageType: DAMAGE_TYPES.SLASHING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: null,\n    xpValue: 25,\n    description: 'A common thief and highwayman.'\n  },\n  orc: {\n    name: 'Orc',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.5,\n    hp: 15,\n    maxHp: 15,\n    ac: 13,\n    initiative: 1,\n    attacks: [{\n      name: 'Greataxe',\n      bonus: 5,\n      damage: '1d12+3',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Javelin',\n      bonus: 5,\n      damage: '1d6+3',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Aggressive: Can move closer to enemies as bonus action',\n    xpValue: 100,\n    description: 'Savage raiders driven by their war god.'\n  },\n  bugbear: {\n    name: 'Bugbear',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 1,\n    hp: 27,\n    maxHp: 27,\n    ac: 16,\n    initiative: 2,\n    attacks: [{\n      name: 'Morningstar',\n      bonus: 4,\n      damage: '2d8+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Brute: Extra 1d8 damage on melee hits',\n    xpValue: 200,\n    description: 'Hairy goblinoids that excel at ambushes.'\n  },\n  hobgoblin: {\n    name: 'Hobgoblin',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.5,\n    hp: 11,\n    maxHp: 11,\n    ac: 18,\n    initiative: 1,\n    attacks: [{\n      name: 'Longsword',\n      bonus: 3,\n      damage: '1d8+1',\n      damageType: DAMAGE_TYPES.SLASHING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Martial Advantage: Extra 2d6 damage if ally is nearby',\n    xpValue: 100,\n    description: 'Disciplined goblinoid warriors.'\n  },\n  // ==================== UNDEAD (CR 0-10) ====================\n  skeleton: {\n    name: 'Skeleton',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 0.25,\n    hp: 13,\n    maxHp: 13,\n    ac: 13,\n    initiative: 2,\n    attacks: [{\n      name: 'Shortsword',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Shortbow',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.BLUDGEONING],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Undead Nature: Immune to poison and exhaustion',\n    xpValue: 50,\n    description: 'Animated bones of the dead.'\n  },\n  zombie: {\n    name: 'Zombie',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 0.25,\n    hp: 22,\n    maxHp: 22,\n    ac: 8,\n    initiative: -2,\n    attacks: [{\n      name: 'Slam',\n      bonus: 3,\n      damage: '1d6+1',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Undead Fortitude: Can survive fatal blows (DC 5 + damage)',\n    xpValue: 50,\n    description: 'Shambling corpses risen from the grave.'\n  },\n  ghoul: {\n    name: 'Ghoul',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 1,\n    hp: 22,\n    maxHp: 22,\n    ac: 12,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 4,\n      damage: '2d6+2',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Claws',\n      bonus: 4,\n      damage: '2d4+2',\n      damageType: DAMAGE_TYPES.SLASHING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Paralyzing Touch: Targets must save or be paralyzed',\n    xpValue: 200,\n    description: 'Flesh-eating undead that can paralyze prey.'\n  },\n  wraith: {\n    name: 'Wraith',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 5,\n    hp: 67,\n    maxHp: 67,\n    ac: 13,\n    initiative: 3,\n    attacks: [{\n      name: 'Life Drain',\n      bonus: 6,\n      damage: '4d8+3',\n      damageType: DAMAGE_TYPES.NECROTIC\n    }],\n    resistances: [DAMAGE_TYPES.ACID, DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE, DAMAGE_TYPES.LIGHTNING],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.NECROTIC, DAMAGE_TYPES.POISON],\n    special: 'Incorporeal: Can move through objects and creatures',\n    xpValue: 1800,\n    description: 'A malevolent spirit that drains life force.'\n  },\n  vampire_spawn: {\n    name: 'Vampire Spawn',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 5,\n    hp: 82,\n    maxHp: 82,\n    ac: 15,\n    initiative: 3,\n    attacks: [{\n      name: 'Claws',\n      bonus: 6,\n      damage: '2d4+3',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Bite',\n      bonus: 6,\n      damage: '1d6+3',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [DAMAGE_TYPES.NECROTIC],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Regeneration: Regains 10 HP per turn',\n    xpValue: 1800,\n    description: 'Lesser vampires created by a true vampire.'\n  },\n  // ==================== DRAGONS (CR 5-20) ====================\n  young_white_dragon: {\n    name: 'Young White Dragon',\n    category: ENEMY_CATEGORIES.DRAGONS,\n    cr: 6,\n    hp: 133,\n    maxHp: 133,\n    ac: 17,\n    initiative: 0,\n    attacks: [{\n      name: 'Bite',\n      bonus: 7,\n      damage: '2d10+4',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Claw',\n      bonus: 7,\n      damage: '2d6+4',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Cold Breath',\n      bonus: 7,\n      damage: '10d8',\n      damageType: DAMAGE_TYPES.COLD,\n      recharge: 5\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.COLD],\n    special: 'Ice Walk: Can move across ice without penalty',\n    xpValue: 2300,\n    description: 'A young white dragon, savage and territorial.'\n  },\n  young_red_dragon: {\n    name: 'Young Red Dragon',\n    category: ENEMY_CATEGORIES.DRAGONS,\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 18,\n    initiative: 0,\n    attacks: [{\n      name: 'Bite',\n      bonus: 10,\n      damage: '2d10+6',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Claw',\n      bonus: 10,\n      damage: '2d6+6',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Fire Breath',\n      bonus: 10,\n      damage: '16d6',\n      damageType: DAMAGE_TYPES.FIRE,\n      recharge: 5\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE],\n    special: 'Frightful Presence: Enemies must save or be frightened',\n    xpValue: 5900,\n    description: 'A young red dragon, greedy and cruel.'\n  },\n  // ==================== FIENDS (CR 1-15) ====================\n  imp: {\n    name: 'Imp',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 1,\n    hp: 10,\n    maxHp: 10,\n    ac: 13,\n    initiative: 3,\n    attacks: [{\n      name: 'Sting',\n      bonus: 5,\n      damage: '1d4+3',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [DAMAGE_TYPES.COLD],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.POISON],\n    special: 'Invisibility: Can turn invisible at will',\n    xpValue: 200,\n    description: 'A devious devil servant.'\n  },\n  hell_hound: {\n    name: 'Hell Hound',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 3,\n    hp: 45,\n    maxHp: 45,\n    ac: 15,\n    initiative: 1,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+3',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Fire Breath',\n      bonus: 5,\n      damage: '6d6',\n      damageType: DAMAGE_TYPES.FIRE,\n      recharge: 5\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE],\n    special: 'Pack Tactics: Advantage on attacks if ally nearby',\n    xpValue: 700,\n    description: 'A fiendish dog wreathed in flames.'\n  },\n  succubus: {\n    name: 'Succubus',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 4,\n    hp: 66,\n    maxHp: 66,\n    ac: 15,\n    initiative: 3,\n    attacks: [{\n      name: 'Claw',\n      bonus: 5,\n      damage: '1d6+3',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Charm',\n      bonus: 5,\n      damage: '0',\n      damageType: DAMAGE_TYPES.PSYCHIC\n    }],\n    resistances: [DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE, DAMAGE_TYPES.LIGHTNING, DAMAGE_TYPES.POISON],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Shapechanger: Can assume humanoid form',\n    xpValue: 1100,\n    description: 'A seductive fiend that charms victims.'\n  },\n  // ==================== ELEMENTALS (CR 5-10) ====================\n  fire_elemental: {\n    name: 'Fire Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 102,\n    maxHp: 102,\n    ac: 13,\n    initiative: 2,\n    attacks: [{\n      name: 'Touch',\n      bonus: 6,\n      damage: '2d6+3',\n      damageType: DAMAGE_TYPES.FIRE\n    }],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.COLD],\n    immunities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.POISON],\n    special: 'Water Susceptibility: Takes extra damage from water',\n    xpValue: 1800,\n    description: 'Living fire given form.'\n  },\n  water_elemental: {\n    name: 'Water Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 114,\n    maxHp: 114,\n    ac: 14,\n    initiative: 2,\n    attacks: [{\n      name: 'Slam',\n      bonus: 7,\n      damage: '2d8+4',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [DAMAGE_TYPES.ACID],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Whelm: Can engulf and drown targets',\n    xpValue: 1800,\n    description: 'A wave given sentience.'\n  },\n  air_elemental: {\n    name: 'Air Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 90,\n    maxHp: 90,\n    ac: 15,\n    initiative: 5,\n    attacks: [{\n      name: 'Slam',\n      bonus: 8,\n      damage: '2d8+5',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [DAMAGE_TYPES.LIGHTNING],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Whirlwind: Can create a whirlwind that tosses creatures',\n    xpValue: 1800,\n    description: 'A sentient vortex of air.'\n  },\n  // ==================== CONSTRUCTS (CR 1-10) ====================\n  animated_armor: {\n    name: 'Animated Armor',\n    category: ENEMY_CATEGORIES.CONSTRUCTS,\n    cr: 1,\n    hp: 33,\n    maxHp: 33,\n    ac: 18,\n    initiative: 0,\n    attacks: [{\n      name: 'Slam',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON, DAMAGE_TYPES.PSYCHIC],\n    special: 'Antimagic Susceptibility: Incapacitated in antimagic field',\n    xpValue: 200,\n    description: 'Magically animated suit of armor.'\n  },\n  stone_golem: {\n    name: 'Stone Golem',\n    category: ENEMY_CATEGORIES.CONSTRUCTS,\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 17,\n    initiative: -1,\n    attacks: [{\n      name: 'Slam',\n      bonus: 10,\n      damage: '3d8+6',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON, DAMAGE_TYPES.PSYCHIC, DAMAGE_TYPES.SLASHING, DAMAGE_TYPES.PIERCING],\n    special: 'Immutable Form: Immune to form-altering magic',\n    xpValue: 5900,\n    description: 'A massive construct of animated stone.'\n  },\n  // ==================== ABERRATIONS (CR 2-10) ====================\n  beholder_zombie: {\n    name: 'Beholder Zombie',\n    category: ENEMY_CATEGORIES.ABERRATIONS,\n    cr: 5,\n    hp: 93,\n    maxHp: 93,\n    ac: 15,\n    initiative: -1,\n    attacks: [{\n      name: 'Bite',\n      bonus: 3,\n      damage: '4d6',\n      damageType: DAMAGE_TYPES.PIERCING\n    }, {\n      name: 'Eye Ray',\n      bonus: 3,\n      damage: '3d6',\n      damageType: DAMAGE_TYPES.NECROTIC\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Death Ray: Can fire necrotic beams from eyes',\n    xpValue: 1800,\n    description: 'A reanimated beholder, still dangerous.'\n  },\n  mind_flayer: {\n    name: 'Mind Flayer',\n    category: ENEMY_CATEGORIES.ABERRATIONS,\n    cr: 7,\n    hp: 71,\n    maxHp: 71,\n    ac: 15,\n    initiative: 1,\n    attacks: [{\n      name: 'Tentacles',\n      bonus: 7,\n      damage: '2d10+4',\n      damageType: DAMAGE_TYPES.PSYCHIC\n    }, {\n      name: 'Mind Blast',\n      bonus: 7,\n      damage: '4d8+4',\n      damageType: DAMAGE_TYPES.PSYCHIC\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Extract Brain: Can kill stunned humanoids instantly',\n    xpValue: 2900,\n    description: 'An evil psionic tyrant that feeds on brains.'\n  },\n  // ==================== GIANTS (CR 2-9) ====================\n  ogre: {\n    name: 'Ogre',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 2,\n    hp: 59,\n    maxHp: 59,\n    ac: 11,\n    initiative: -1,\n    attacks: [{\n      name: 'Greatclub',\n      bonus: 6,\n      damage: '2d8+4',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: null,\n    xpValue: 450,\n    description: 'A dim-witted brute of immense strength.'\n  },\n  troll: {\n    name: 'Troll',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 5,\n    hp: 84,\n    maxHp: 84,\n    ac: 15,\n    initiative: 1,\n    attacks: [{\n      name: 'Claw',\n      bonus: 7,\n      damage: '2d6+4',\n      damageType: DAMAGE_TYPES.SLASHING\n    }, {\n      name: 'Bite',\n      bonus: 7,\n      damage: '2d6+4',\n      damageType: DAMAGE_TYPES.PIERCING\n    }],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.ACID],\n    immunities: [],\n    special: 'Regeneration: Regains 10 HP per turn (stops if takes fire/acid damage)',\n    xpValue: 1800,\n    description: 'A ravenous creature that regenerates wounds.'\n  },\n  // ==================== PLANTS (CR 1-5) ====================\n  shambling_mound: {\n    name: 'Shambling Mound',\n    category: ENEMY_CATEGORIES.PLANTS,\n    cr: 5,\n    hp: 136,\n    maxHp: 136,\n    ac: 15,\n    initiative: -1,\n    attacks: [{\n      name: 'Slam',\n      bonus: 7,\n      damage: '2d8+4',\n      damageType: DAMAGE_TYPES.BLUDGEONING\n    }],\n    resistances: [DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.LIGHTNING],\n    special: 'Lightning Absorption: Heals from lightning damage',\n    xpValue: 1800,\n    description: 'An ambulatory mound of rotting vegetation.'\n  }\n};\n\n/**\n * Get enemies by CR range\n */\nexport function getEnemiesByCR(minCR, maxCR) {\n  return Object.entries(ENEMY_TEMPLATES).filter(([_, enemy]) => enemy.cr >= minCR && enemy.cr <= maxCR).map(([key, enemy]) => ({\n    key,\n    ...enemy\n  }));\n}\n\n/**\n * Get enemies by category\n */\nexport function getEnemiesByCategory(category) {\n  return Object.entries(ENEMY_TEMPLATES).filter(([_, enemy]) => enemy.category === category).map(([key, enemy]) => ({\n    key,\n    ...enemy\n  }));\n}\n\n/**\n * Get recommended enemies for party level\n */\nexport function getRecommendedEnemies(partyLevel, partySize = 4) {\n  const avgCR = partyLevel / 4; // Rough CR = Party Level / 4\n  const minCR = Math.max(0, avgCR - 2);\n  const maxCR = avgCR + 2;\n  return getEnemiesByCR(minCR, maxCR);\n}\n\n// ==================== EXISTING COMBAT FUNCTIONS ====================\n\nexport function rollInitiative(initiativeModifier) {\n  const roll = Math.floor(Math.random() * 20) + 1;\n  return roll + initiativeModifier;\n}\nexport function createEnemy(templateName, count = 1) {\n  const template = ENEMY_TEMPLATES[templateName];\n  if (!template) return [];\n  const enemies = [];\n  for (let i = 0; i < count; i++) {\n    enemies.push({\n      id: `${templateName}_${Date.now()}_${i}`,\n      ...JSON.parse(JSON.stringify(template)),\n      name: count > 1 ? `${template.name} ${i + 1}` : template.name,\n      isEnemy: true,\n      initiative: rollInitiative(template.initiative)\n    });\n  }\n  return enemies;\n}\nexport function startCombat(party, enemies) {\n  const partyWithInitiative = party.map(character => {\n    var _character$abilities;\n    return {\n      ...character,\n      initiative: rollInitiative(character.initiative || getModifier(((_character$abilities = character.abilities) === null || _character$abilities === void 0 ? void 0 : _character$abilities.DEX) || 10)),\n      isEnemy: false\n    };\n  });\n  const combatants = [...partyWithInitiative, ...enemies].sort((a, b) => b.initiative - a.initiative);\n  return {\n    combatants,\n    currentTurn: 0,\n    round: 1,\n    isActive: true,\n    log: []\n  };\n}\nexport function rollDice(diceString) {\n  const match = diceString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return 0;\n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  return {\n    total,\n    rolls,\n    modifier: modifier || '+0'\n  };\n}\nexport function makeAttackRoll(attackBonus, targetAC) {\n  const d20Roll = Math.floor(Math.random() * 20) + 1;\n  const totalRoll = d20Roll + attackBonus;\n  const isCritical = d20Roll === 20;\n  const isFumble = d20Roll === 1;\n  const isHit = isCritical || !isFumble && totalRoll >= targetAC;\n  return {\n    d20Roll,\n    totalRoll,\n    isHit,\n    isCritical,\n    isFumble\n  };\n}\nexport function calculateDamage(damageString, isCritical = false) {\n  const result = rollDice(damageString);\n  if (isCritical) {\n    const critResult = rollDice(damageString);\n    result.total += critResult.total - parseInt(result.modifier.replace('+', ''));\n    result.rolls = [...result.rolls, ...critResult.rolls];\n    result.isCritical = true;\n  }\n  return result;\n}\nexport function applyDamage(combatant, damage, damageType = DAMAGE_TYPES.SLASHING) {\n  var _combatant$resistance, _combatant$vulnerabil, _combatant$immunities;\n  let finalDamage = damage;\n\n  // Check resistances\n  if ((_combatant$resistance = combatant.resistances) !== null && _combatant$resistance !== void 0 && _combatant$resistance.includes(damageType)) {\n    finalDamage = Math.floor(damage / 2);\n    console.log(`üõ°Ô∏è ${combatant.name} resists ${damageType} damage! ${damage} ‚Üí ${finalDamage}`);\n  }\n\n  // Check vulnerabilities\n  if ((_combatant$vulnerabil = combatant.vulnerabilities) !== null && _combatant$vulnerabil !== void 0 && _combatant$vulnerabil.includes(damageType)) {\n    finalDamage = damage * 2;\n    console.log(`üí• ${combatant.name} is vulnerable to ${damageType} damage! ${damage} ‚Üí ${finalDamage}`);\n  }\n\n  // Check immunities\n  if ((_combatant$immunities = combatant.immunities) !== null && _combatant$immunities !== void 0 && _combatant$immunities.includes(damageType)) {\n    finalDamage = 0;\n    console.log(`üö´ ${combatant.name} is immune to ${damageType} damage!`);\n  }\n  const newHp = Math.max(0, combatant.hp - finalDamage);\n  return {\n    ...combatant,\n    hp: newHp,\n    isDead: newHp === 0,\n    lastDamageTaken: finalDamage,\n    lastDamageType: damageType\n  };\n}\nexport function executeAttack(attacker, target, attackIndex = 0) {\n  var _attacker$attacks;\n  const attack = (_attacker$attacks = attacker.attacks) === null || _attacker$attacks === void 0 ? void 0 : _attacker$attacks[attackIndex];\n  if (!attack) return null;\n  const attackRoll = makeAttackRoll(attack.bonus, target.ac || target.armorClass);\n  let damage = 0;\n  let damageRoll = null;\n  if (attackRoll.isHit) {\n    damageRoll = calculateDamage(attack.damage, attackRoll.isCritical);\n    damage = damageRoll.total;\n  }\n  return {\n    attacker: attacker.name,\n    target: target.name,\n    attack: attack.name,\n    attackRoll,\n    damageRoll,\n    damage,\n    damageType: attack.damageType\n  };\n}\nexport function nextTurn(combat) {\n  const nextIndex = (combat.currentTurn + 1) % combat.combatants.length;\n  const newRound = nextIndex === 0 ? combat.round + 1 : combat.round;\n  return {\n    ...combat,\n    currentTurn: nextIndex,\n    round: newRound\n  };\n}\nexport function checkCombatEnd(combat) {\n  const aliveParty = combat.combatants.filter(c => !c.isEnemy && !c.isDead);\n  const aliveEnemies = combat.combatants.filter(c => c.isEnemy && !c.isDead);\n  if (aliveParty.length === 0) {\n    return {\n      ended: true,\n      result: 'defeat',\n      message: 'The party has fallen...'\n    };\n  }\n  if (aliveEnemies.length === 0) {\n    const totalXP = combat.combatants.filter(c => c.isEnemy).reduce((sum, e) => sum + (e.xpValue || 0), 0);\n    return {\n      ended: true,\n      result: 'victory',\n      message: 'Victory! All enemies defeated!',\n      xpReward: totalXP\n    };\n  }\n  return {\n    ended: false\n  };\n}\nexport function getCurrentCombatant(combat) {\n  return combat.combatants[combat.currentTurn];\n}\nexport function updateCombatant(combat, combatantId, updates) {\n  return {\n    ...combat,\n    combatants: combat.combatants.map(c => c.id === combatantId || c.name === combatantId ? {\n      ...c,\n      ...updates\n    } : c)\n  };\n}","map":{"version":3,"names":["getModifier","DAMAGE_TYPES","SLASHING","PIERCING","BLUDGEONING","FIRE","COLD","LIGHTNING","POISON","ACID","NECROTIC","RADIANT","FORCE","PSYCHIC","ENEMY_CATEGORIES","BEASTS","HUMANOIDS","UNDEAD","DRAGONS","FIENDS","CELESTIALS","ELEMENTALS","CONSTRUCTS","ABERRATIONS","PLANTS","ENEMY_TEMPLATES","wolf","name","category","cr","hp","maxHp","ac","initiative","attacks","bonus","damage","damageType","resistances","vulnerabilities","immunities","special","xpValue","description","bear","giant_spider","goblin","bandit","orc","bugbear","hobgoblin","skeleton","zombie","ghoul","wraith","vampire_spawn","young_white_dragon","recharge","young_red_dragon","imp","hell_hound","succubus","fire_elemental","water_elemental","air_elemental","animated_armor","stone_golem","beholder_zombie","mind_flayer","ogre","troll","shambling_mound","getEnemiesByCR","minCR","maxCR","Object","entries","filter","_","enemy","map","key","getEnemiesByCategory","getRecommendedEnemies","partyLevel","partySize","avgCR","Math","max","rollInitiative","initiativeModifier","roll","floor","random","createEnemy","templateName","count","template","enemies","i","push","id","Date","now","JSON","parse","stringify","isEnemy","startCombat","party","partyWithInitiative","character","_character$abilities","abilities","DEX","combatants","sort","a","b","currentTurn","round","isActive","log","rollDice","diceString","match","numDice","dieSize","modifier","total","rolls","parseInt","makeAttackRoll","attackBonus","targetAC","d20Roll","totalRoll","isCritical","isFumble","isHit","calculateDamage","damageString","result","critResult","replace","applyDamage","combatant","_combatant$resistance","_combatant$vulnerabil","_combatant$immunities","finalDamage","includes","console","newHp","isDead","lastDamageTaken","lastDamageType","executeAttack","attacker","target","attackIndex","_attacker$attacks","attack","attackRoll","armorClass","damageRoll","nextTurn","combat","nextIndex","length","newRound","checkCombatEnd","aliveParty","c","aliveEnemies","ended","message","totalXP","reduce","sum","e","xpReward","getCurrentCombatant","updateCombatant","combatantId","updates"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/combatSystem.js"],"sourcesContent":["// frontend/src/utils/combatSystem.js - ENHANCED WITH BESTIARY\n\n/**\n * D&D 5e Combat System - Enhanced\n * 50+ enemies, weaknesses, resistances, special abilities\n */\n\nimport { getModifier } from './characterSystem';\n\n/**\n * Damage types\n */\nexport const DAMAGE_TYPES = {\n  SLASHING: 'slashing',\n  PIERCING: 'piercing',\n  BLUDGEONING: 'bludgeoning',\n  FIRE: 'fire',\n  COLD: 'cold',\n  LIGHTNING: 'lightning',\n  POISON: 'poison',\n  ACID: 'acid',\n  NECROTIC: 'necrotic',\n  RADIANT: 'radiant',\n  FORCE: 'force',\n  PSYCHIC: 'psychic'\n};\n\n/**\n * Enemy categories for organization\n */\nexport const ENEMY_CATEGORIES = {\n  BEASTS: 'Beasts',\n  HUMANOIDS: 'Humanoids',\n  UNDEAD: 'Undead',\n  DRAGONS: 'Dragons',\n  FIENDS: 'Fiends',\n  CELESTIALS: 'Celestials',\n  ELEMENTALS: 'Elementals',\n  CONSTRUCTS: 'Constructs',\n  ABERRATIONS: 'Aberrations',\n  PLANTS: 'Plants'\n};\n\n/**\n * Expanded Enemy Templates - 50+ Enemies!\n */\nexport const ENEMY_TEMPLATES = {\n  // ==================== BEASTS (CR 0-5) ====================\n  wolf: {\n    name: 'Wolf',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 0.25,\n    hp: 11,\n    maxHp: 11,\n    ac: 13,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 4, damage: '2d4+2', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Pack Tactics: Advantage on attack rolls if ally is within 5ft of target',\n    xpValue: 50,\n    description: 'A cunning predator that hunts in packs.'\n  },\n\n  bear: {\n    name: 'Brown Bear',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 1,\n    hp: 34,\n    maxHp: 34,\n    ac: 11,\n    initiative: 0,\n    attacks: [\n      { name: 'Claw', bonus: 5, damage: '2d6+4', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Bite', bonus: 5, damage: '1d8+4', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Multiattack: Can use Claw twice',\n    xpValue: 200,\n    description: 'A massive bear with powerful claws.'\n  },\n\n  giant_spider: {\n    name: 'Giant Spider',\n    category: ENEMY_CATEGORIES.BEASTS,\n    cr: 1,\n    hp: 26,\n    maxHp: 26,\n    ac: 14,\n    initiative: 3,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '1d8+3', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.FIRE],\n    immunities: [],\n    special: 'Web: Can restrain targets with webbing',\n    xpValue: 200,\n    description: 'A monstrous arachnid that lurks in dark places.'\n  },\n\n  // ==================== HUMANOIDS (CR 0-5) ====================\n  goblin: {\n    name: 'Goblin',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.25,\n    hp: 7,\n    maxHp: 7,\n    ac: 15,\n    initiative: 2,\n    attacks: [\n      { name: 'Scimitar', bonus: 4, damage: '1d6+2', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Shortbow', bonus: 4, damage: '1d6+2', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Nimble Escape: Can Disengage or Hide as bonus action',\n    xpValue: 50,\n    description: 'Small, evil humanoids that raid and pillage.'\n  },\n\n  bandit: {\n    name: 'Bandit',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.125,\n    hp: 11,\n    maxHp: 11,\n    ac: 12,\n    initiative: 1,\n    attacks: [\n      { name: 'Scimitar', bonus: 3, damage: '1d6+1', damageType: DAMAGE_TYPES.SLASHING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: null,\n    xpValue: 25,\n    description: 'A common thief and highwayman.'\n  },\n\n  orc: {\n    name: 'Orc',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.5,\n    hp: 15,\n    maxHp: 15,\n    ac: 13,\n    initiative: 1,\n    attacks: [\n      { name: 'Greataxe', bonus: 5, damage: '1d12+3', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Javelin', bonus: 5, damage: '1d6+3', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Aggressive: Can move closer to enemies as bonus action',\n    xpValue: 100,\n    description: 'Savage raiders driven by their war god.'\n  },\n\n  bugbear: {\n    name: 'Bugbear',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 1,\n    hp: 27,\n    maxHp: 27,\n    ac: 16,\n    initiative: 2,\n    attacks: [\n      { name: 'Morningstar', bonus: 4, damage: '2d8+2', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Brute: Extra 1d8 damage on melee hits',\n    xpValue: 200,\n    description: 'Hairy goblinoids that excel at ambushes.'\n  },\n\n  hobgoblin: {\n    name: 'Hobgoblin',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 0.5,\n    hp: 11,\n    maxHp: 11,\n    ac: 18,\n    initiative: 1,\n    attacks: [\n      { name: 'Longsword', bonus: 3, damage: '1d8+1', damageType: DAMAGE_TYPES.SLASHING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Martial Advantage: Extra 2d6 damage if ally is nearby',\n    xpValue: 100,\n    description: 'Disciplined goblinoid warriors.'\n  },\n\n  // ==================== UNDEAD (CR 0-10) ====================\n  skeleton: {\n    name: 'Skeleton',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 0.25,\n    hp: 13,\n    maxHp: 13,\n    ac: 13,\n    initiative: 2,\n    attacks: [\n      { name: 'Shortsword', bonus: 4, damage: '1d6+2', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Shortbow', bonus: 4, damage: '1d6+2', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.BLUDGEONING],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Undead Nature: Immune to poison and exhaustion',\n    xpValue: 50,\n    description: 'Animated bones of the dead.'\n  },\n\n  zombie: {\n    name: 'Zombie',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 0.25,\n    hp: 22,\n    maxHp: 22,\n    ac: 8,\n    initiative: -2,\n    attacks: [\n      { name: 'Slam', bonus: 3, damage: '1d6+1', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Undead Fortitude: Can survive fatal blows (DC 5 + damage)',\n    xpValue: 50,\n    description: 'Shambling corpses risen from the grave.'\n  },\n\n  ghoul: {\n    name: 'Ghoul',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 1,\n    hp: 22,\n    maxHp: 22,\n    ac: 12,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 4, damage: '2d6+2', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Claws', bonus: 4, damage: '2d4+2', damageType: DAMAGE_TYPES.SLASHING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Paralyzing Touch: Targets must save or be paralyzed',\n    xpValue: 200,\n    description: 'Flesh-eating undead that can paralyze prey.'\n  },\n\n  wraith: {\n    name: 'Wraith',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 5,\n    hp: 67,\n    maxHp: 67,\n    ac: 13,\n    initiative: 3,\n    attacks: [\n      { name: 'Life Drain', bonus: 6, damage: '4d8+3', damageType: DAMAGE_TYPES.NECROTIC }\n    ],\n    resistances: [DAMAGE_TYPES.ACID, DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE, DAMAGE_TYPES.LIGHTNING],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.NECROTIC, DAMAGE_TYPES.POISON],\n    special: 'Incorporeal: Can move through objects and creatures',\n    xpValue: 1800,\n    description: 'A malevolent spirit that drains life force.'\n  },\n\n  vampire_spawn: {\n    name: 'Vampire Spawn',\n    category: ENEMY_CATEGORIES.UNDEAD,\n    cr: 5,\n    hp: 82,\n    maxHp: 82,\n    ac: 15,\n    initiative: 3,\n    attacks: [\n      { name: 'Claws', bonus: 6, damage: '2d4+3', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Bite', bonus: 6, damage: '1d6+3', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [DAMAGE_TYPES.NECROTIC],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Regeneration: Regains 10 HP per turn',\n    xpValue: 1800,\n    description: 'Lesser vampires created by a true vampire.'\n  },\n\n  // ==================== DRAGONS (CR 5-20) ====================\n  young_white_dragon: {\n    name: 'Young White Dragon',\n    category: ENEMY_CATEGORIES.DRAGONS,\n    cr: 6,\n    hp: 133,\n    maxHp: 133,\n    ac: 17,\n    initiative: 0,\n    attacks: [\n      { name: 'Bite', bonus: 7, damage: '2d10+4', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Claw', bonus: 7, damage: '2d6+4', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Cold Breath', bonus: 7, damage: '10d8', damageType: DAMAGE_TYPES.COLD, recharge: 5 }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.COLD],\n    special: 'Ice Walk: Can move across ice without penalty',\n    xpValue: 2300,\n    description: 'A young white dragon, savage and territorial.'\n  },\n\n  young_red_dragon: {\n    name: 'Young Red Dragon',\n    category: ENEMY_CATEGORIES.DRAGONS,\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 18,\n    initiative: 0,\n    attacks: [\n      { name: 'Bite', bonus: 10, damage: '2d10+6', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Claw', bonus: 10, damage: '2d6+6', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Fire Breath', bonus: 10, damage: '16d6', damageType: DAMAGE_TYPES.FIRE, recharge: 5 }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE],\n    special: 'Frightful Presence: Enemies must save or be frightened',\n    xpValue: 5900,\n    description: 'A young red dragon, greedy and cruel.'\n  },\n\n  // ==================== FIENDS (CR 1-15) ====================\n  imp: {\n    name: 'Imp',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 1,\n    hp: 10,\n    maxHp: 10,\n    ac: 13,\n    initiative: 3,\n    attacks: [\n      { name: 'Sting', bonus: 5, damage: '1d4+3', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [DAMAGE_TYPES.COLD],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.POISON],\n    special: 'Invisibility: Can turn invisible at will',\n    xpValue: 200,\n    description: 'A devious devil servant.'\n  },\n\n  hell_hound: {\n    name: 'Hell Hound',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 3,\n    hp: 45,\n    maxHp: 45,\n    ac: 15,\n    initiative: 1,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '1d8+3', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Fire Breath', bonus: 5, damage: '6d6', damageType: DAMAGE_TYPES.FIRE, recharge: 5 }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.FIRE],\n    special: 'Pack Tactics: Advantage on attacks if ally nearby',\n    xpValue: 700,\n    description: 'A fiendish dog wreathed in flames.'\n  },\n\n  succubus: {\n    name: 'Succubus',\n    category: ENEMY_CATEGORIES.FIENDS,\n    cr: 4,\n    hp: 66,\n    maxHp: 66,\n    ac: 15,\n    initiative: 3,\n    attacks: [\n      { name: 'Claw', bonus: 5, damage: '1d6+3', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Charm', bonus: 5, damage: '0', damageType: DAMAGE_TYPES.PSYCHIC }\n    ],\n    resistances: [DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE, DAMAGE_TYPES.LIGHTNING, DAMAGE_TYPES.POISON],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Shapechanger: Can assume humanoid form',\n    xpValue: 1100,\n    description: 'A seductive fiend that charms victims.'\n  },\n\n  // ==================== ELEMENTALS (CR 5-10) ====================\n  fire_elemental: {\n    name: 'Fire Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 102,\n    maxHp: 102,\n    ac: 13,\n    initiative: 2,\n    attacks: [\n      { name: 'Touch', bonus: 6, damage: '2d6+3', damageType: DAMAGE_TYPES.FIRE }\n    ],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.COLD],\n    immunities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.POISON],\n    special: 'Water Susceptibility: Takes extra damage from water',\n    xpValue: 1800,\n    description: 'Living fire given form.'\n  },\n\n  water_elemental: {\n    name: 'Water Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 114,\n    maxHp: 114,\n    ac: 14,\n    initiative: 2,\n    attacks: [\n      { name: 'Slam', bonus: 7, damage: '2d8+4', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [DAMAGE_TYPES.ACID],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Whelm: Can engulf and drown targets',\n    xpValue: 1800,\n    description: 'A wave given sentience.'\n  },\n\n  air_elemental: {\n    name: 'Air Elemental',\n    category: ENEMY_CATEGORIES.ELEMENTALS,\n    cr: 5,\n    hp: 90,\n    maxHp: 90,\n    ac: 15,\n    initiative: 5,\n    attacks: [\n      { name: 'Slam', bonus: 8, damage: '2d8+5', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [DAMAGE_TYPES.LIGHTNING],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Whirlwind: Can create a whirlwind that tosses creatures',\n    xpValue: 1800,\n    description: 'A sentient vortex of air.'\n  },\n\n  // ==================== CONSTRUCTS (CR 1-10) ====================\n  animated_armor: {\n    name: 'Animated Armor',\n    category: ENEMY_CATEGORIES.CONSTRUCTS,\n    cr: 1,\n    hp: 33,\n    maxHp: 33,\n    ac: 18,\n    initiative: 0,\n    attacks: [\n      { name: 'Slam', bonus: 4, damage: '1d6+2', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON, DAMAGE_TYPES.PSYCHIC],\n    special: 'Antimagic Susceptibility: Incapacitated in antimagic field',\n    xpValue: 200,\n    description: 'Magically animated suit of armor.'\n  },\n\n  stone_golem: {\n    name: 'Stone Golem',\n    category: ENEMY_CATEGORIES.CONSTRUCTS,\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 17,\n    initiative: -1,\n    attacks: [\n      { name: 'Slam', bonus: 10, damage: '3d8+6', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON, DAMAGE_TYPES.PSYCHIC, DAMAGE_TYPES.SLASHING, DAMAGE_TYPES.PIERCING],\n    special: 'Immutable Form: Immune to form-altering magic',\n    xpValue: 5900,\n    description: 'A massive construct of animated stone.'\n  },\n\n  // ==================== ABERRATIONS (CR 2-10) ====================\n  beholder_zombie: {\n    name: 'Beholder Zombie',\n    category: ENEMY_CATEGORIES.ABERRATIONS,\n    cr: 5,\n    hp: 93,\n    maxHp: 93,\n    ac: 15,\n    initiative: -1,\n    attacks: [\n      { name: 'Bite', bonus: 3, damage: '4d6', damageType: DAMAGE_TYPES.PIERCING },\n      { name: 'Eye Ray', bonus: 3, damage: '3d6', damageType: DAMAGE_TYPES.NECROTIC }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.POISON],\n    special: 'Death Ray: Can fire necrotic beams from eyes',\n    xpValue: 1800,\n    description: 'A reanimated beholder, still dangerous.'\n  },\n\n  mind_flayer: {\n    name: 'Mind Flayer',\n    category: ENEMY_CATEGORIES.ABERRATIONS,\n    cr: 7,\n    hp: 71,\n    maxHp: 71,\n    ac: 15,\n    initiative: 1,\n    attacks: [\n      { name: 'Tentacles', bonus: 7, damage: '2d10+4', damageType: DAMAGE_TYPES.PSYCHIC },\n      { name: 'Mind Blast', bonus: 7, damage: '4d8+4', damageType: DAMAGE_TYPES.PSYCHIC }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: 'Extract Brain: Can kill stunned humanoids instantly',\n    xpValue: 2900,\n    description: 'An evil psionic tyrant that feeds on brains.'\n  },\n\n  // ==================== GIANTS (CR 2-9) ====================\n  ogre: {\n    name: 'Ogre',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 2,\n    hp: 59,\n    maxHp: 59,\n    ac: 11,\n    initiative: -1,\n    attacks: [\n      { name: 'Greatclub', bonus: 6, damage: '2d8+4', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [],\n    vulnerabilities: [],\n    immunities: [],\n    special: null,\n    xpValue: 450,\n    description: 'A dim-witted brute of immense strength.'\n  },\n\n  troll: {\n    name: 'Troll',\n    category: ENEMY_CATEGORIES.HUMANOIDS,\n    cr: 5,\n    hp: 84,\n    maxHp: 84,\n    ac: 15,\n    initiative: 1,\n    attacks: [\n      { name: 'Claw', bonus: 7, damage: '2d6+4', damageType: DAMAGE_TYPES.SLASHING },\n      { name: 'Bite', bonus: 7, damage: '2d6+4', damageType: DAMAGE_TYPES.PIERCING }\n    ],\n    resistances: [],\n    vulnerabilities: [DAMAGE_TYPES.FIRE, DAMAGE_TYPES.ACID],\n    immunities: [],\n    special: 'Regeneration: Regains 10 HP per turn (stops if takes fire/acid damage)',\n    xpValue: 1800,\n    description: 'A ravenous creature that regenerates wounds.'\n  },\n\n  // ==================== PLANTS (CR 1-5) ====================\n  shambling_mound: {\n    name: 'Shambling Mound',\n    category: ENEMY_CATEGORIES.PLANTS,\n    cr: 5,\n    hp: 136,\n    maxHp: 136,\n    ac: 15,\n    initiative: -1,\n    attacks: [\n      { name: 'Slam', bonus: 7, damage: '2d8+4', damageType: DAMAGE_TYPES.BLUDGEONING }\n    ],\n    resistances: [DAMAGE_TYPES.COLD, DAMAGE_TYPES.FIRE],\n    vulnerabilities: [],\n    immunities: [DAMAGE_TYPES.LIGHTNING],\n    special: 'Lightning Absorption: Heals from lightning damage',\n    xpValue: 1800,\n    description: 'An ambulatory mound of rotting vegetation.'\n  }\n};\n\n/**\n * Get enemies by CR range\n */\nexport function getEnemiesByCR(minCR, maxCR) {\n  return Object.entries(ENEMY_TEMPLATES)\n    .filter(([_, enemy]) => enemy.cr >= minCR && enemy.cr <= maxCR)\n    .map(([key, enemy]) => ({ key, ...enemy }));\n}\n\n/**\n * Get enemies by category\n */\nexport function getEnemiesByCategory(category) {\n  return Object.entries(ENEMY_TEMPLATES)\n    .filter(([_, enemy]) => enemy.category === category)\n    .map(([key, enemy]) => ({ key, ...enemy }));\n}\n\n/**\n * Get recommended enemies for party level\n */\nexport function getRecommendedEnemies(partyLevel, partySize = 4) {\n  const avgCR = partyLevel / 4; // Rough CR = Party Level / 4\n  const minCR = Math.max(0, avgCR - 2);\n  const maxCR = avgCR + 2;\n  \n  return getEnemiesByCR(minCR, maxCR);\n}\n\n// ==================== EXISTING COMBAT FUNCTIONS ====================\n\nexport function rollInitiative(initiativeModifier) {\n  const roll = Math.floor(Math.random() * 20) + 1;\n  return roll + initiativeModifier;\n}\n\nexport function createEnemy(templateName, count = 1) {\n  const template = ENEMY_TEMPLATES[templateName];\n  if (!template) return [];\n  \n  const enemies = [];\n  for (let i = 0; i < count; i++) {\n    enemies.push({\n      id: `${templateName}_${Date.now()}_${i}`,\n      ...JSON.parse(JSON.stringify(template)),\n      name: count > 1 ? `${template.name} ${i + 1}` : template.name,\n      isEnemy: true,\n      initiative: rollInitiative(template.initiative)\n    });\n  }\n  \n  return enemies;\n}\n\nexport function startCombat(party, enemies) {\n  const partyWithInitiative = party.map(character => ({\n    ...character,\n    initiative: rollInitiative(character.initiative || getModifier(character.abilities?.DEX || 10)),\n    isEnemy: false\n  }));\n  \n  const combatants = [...partyWithInitiative, ...enemies].sort(\n    (a, b) => b.initiative - a.initiative\n  );\n  \n  return {\n    combatants,\n    currentTurn: 0,\n    round: 1,\n    isActive: true,\n    log: []\n  };\n}\n\nexport function rollDice(diceString) {\n  const match = diceString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return 0;\n  \n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  \n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  \n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  \n  return { total, rolls, modifier: modifier || '+0' };\n}\n\nexport function makeAttackRoll(attackBonus, targetAC) {\n  const d20Roll = Math.floor(Math.random() * 20) + 1;\n  const totalRoll = d20Roll + attackBonus;\n  \n  const isCritical = d20Roll === 20;\n  const isFumble = d20Roll === 1;\n  const isHit = isCritical || (!isFumble && totalRoll >= targetAC);\n  \n  return {\n    d20Roll,\n    totalRoll,\n    isHit,\n    isCritical,\n    isFumble\n  };\n}\n\nexport function calculateDamage(damageString, isCritical = false) {\n  const result = rollDice(damageString);\n  \n  if (isCritical) {\n    const critResult = rollDice(damageString);\n    result.total += critResult.total - parseInt(result.modifier.replace('+', ''));\n    result.rolls = [...result.rolls, ...critResult.rolls];\n    result.isCritical = true;\n  }\n  \n  return result;\n}\n\nexport function applyDamage(combatant, damage, damageType = DAMAGE_TYPES.SLASHING) {\n  let finalDamage = damage;\n  \n  // Check resistances\n  if (combatant.resistances?.includes(damageType)) {\n    finalDamage = Math.floor(damage / 2);\n    console.log(`üõ°Ô∏è ${combatant.name} resists ${damageType} damage! ${damage} ‚Üí ${finalDamage}`);\n  }\n  \n  // Check vulnerabilities\n  if (combatant.vulnerabilities?.includes(damageType)) {\n    finalDamage = damage * 2;\n    console.log(`üí• ${combatant.name} is vulnerable to ${damageType} damage! ${damage} ‚Üí ${finalDamage}`);\n  }\n  \n  // Check immunities\n  if (combatant.immunities?.includes(damageType)) {\n    finalDamage = 0;\n    console.log(`üö´ ${combatant.name} is immune to ${damageType} damage!`);\n  }\n  \n  const newHp = Math.max(0, combatant.hp - finalDamage);\n  \n  return {\n    ...combatant,\n    hp: newHp,\n    isDead: newHp === 0,\n    lastDamageTaken: finalDamage,\n    lastDamageType: damageType\n  };\n}\n\nexport function executeAttack(attacker, target, attackIndex = 0) {\n  const attack = attacker.attacks?.[attackIndex];\n  if (!attack) return null;\n  \n  const attackRoll = makeAttackRoll(attack.bonus, target.ac || target.armorClass);\n  \n  let damage = 0;\n  let damageRoll = null;\n  \n  if (attackRoll.isHit) {\n    damageRoll = calculateDamage(attack.damage, attackRoll.isCritical);\n    damage = damageRoll.total;\n  }\n  \n  return {\n    attacker: attacker.name,\n    target: target.name,\n    attack: attack.name,\n    attackRoll,\n    damageRoll,\n    damage,\n    damageType: attack.damageType\n  };\n}\n\nexport function nextTurn(combat) {\n  const nextIndex = (combat.currentTurn + 1) % combat.combatants.length;\n  const newRound = nextIndex === 0 ? combat.round + 1 : combat.round;\n  \n  return {\n    ...combat,\n    currentTurn: nextIndex,\n    round: newRound\n  };\n}\n\nexport function checkCombatEnd(combat) {\n  const aliveParty = combat.combatants.filter(c => !c.isEnemy && !c.isDead);\n  const aliveEnemies = combat.combatants.filter(c => c.isEnemy && !c.isDead);\n  \n  if (aliveParty.length === 0) {\n    return { ended: true, result: 'defeat', message: 'The party has fallen...' };\n  }\n  \n  if (aliveEnemies.length === 0) {\n    const totalXP = combat.combatants\n      .filter(c => c.isEnemy)\n      .reduce((sum, e) => sum + (e.xpValue || 0), 0);\n    \n    return { \n      ended: true, \n      result: 'victory', \n      message: 'Victory! All enemies defeated!',\n      xpReward: totalXP\n    };\n  }\n  \n  return { ended: false };\n}\n\nexport function getCurrentCombatant(combat) {\n  return combat.combatants[combat.currentTurn];\n}\n\nexport function updateCombatant(combat, combatantId, updates) {\n  return {\n    ...combat,\n    combatants: combat.combatants.map(c =>\n      c.id === combatantId || c.name === combatantId ? { ...c, ...updates } : c\n    )\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}