{"ast":null,"code":"// frontend/src/state/campaignStore.js\nimport { create } from \"zustand\";\nexport const useCampaignStore = create(set => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n  setCampaign: campaign => {\n    var _campaign$history, _campaign$history2, _campaign$history2$sl;\n    return set({\n      campaign: {\n        ...campaign,\n        history: (_campaign$history = campaign.history) !== null && _campaign$history !== void 0 && _campaign$history.length ? campaign.history : [{\n          role: \"assistant\",\n          content: \"The air grows still as your adventure begins...\"\n        }]\n      },\n      party: campaign.party || [],\n      lastResponse: ((_campaign$history2 = campaign.history) === null || _campaign$history2 === void 0 ? void 0 : (_campaign$history2$sl = _campaign$history2.slice(-1)[0]) === null || _campaign$history2$sl === void 0 ? void 0 : _campaign$history2$sl.content) || \"\"\n    });\n  },\n  updateFromDM: ({\n    aiResponse,\n    campaignState\n  }) => set(state => {\n    var _state$campaign;\n    return {\n      campaign: {\n        ...campaignState,\n        history: [...(((_state$campaign = state.campaign) === null || _state$campaign === void 0 ? void 0 : _state$campaign.history) || []), {\n          role: \"assistant\",\n          content: aiResponse\n        }]\n      },\n      lastResponse: aiResponse,\n      party: campaignState.party || state.party\n    };\n  }),\n  addDiceRoll: roll => set(state => ({\n    campaign: {\n      ...state.campaign,\n      history: [...(state.campaign.history || []), {\n        role: \"system\",\n        content: `ðŸŽ² Rolled d${roll.sides}: ${roll.result}`\n      }]\n    }\n  })),\n  toggleMic: () => set(s => ({\n    micListening: !s.micListening\n  })),\n  toggleVoice: () => set(s => ({\n    voiceMode: !s.voiceMode\n  }))\n}));","map":{"version":3,"names":["create","useCampaignStore","set","campaign","party","lastResponse","voiceMode","micListening","setCampaign","_campaign$history","_campaign$history2","_campaign$history2$sl","history","length","role","content","slice","updateFromDM","aiResponse","campaignState","state","_state$campaign","addDiceRoll","roll","sides","result","toggleMic","s","toggleVoice"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/state/campaignStore.js"],"sourcesContent":["// frontend/src/state/campaignStore.js\nimport { create } from \"zustand\";\n\nexport const useCampaignStore = create((set) => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n\n  setCampaign: (campaign) =>\n    set({\n      campaign: {\n        ...campaign,\n        history: campaign.history?.length\n          ? campaign.history\n          : [\n              {\n                role: \"assistant\",\n                content: \"The air grows still as your adventure begins...\",\n              },\n            ],\n      },\n      party: campaign.party || [],\n      lastResponse: campaign.history?.slice(-1)[0]?.content || \"\",\n    }),\n\n  updateFromDM: ({ aiResponse, campaignState }) =>\n    set((state) => ({\n      campaign: {\n        ...campaignState,\n        history: [\n          ...(state.campaign?.history || []),\n          { role: \"assistant\", content: aiResponse },\n        ],\n      },\n      lastResponse: aiResponse,\n      party: campaignState.party || state.party,\n    })),\n\n  addDiceRoll: (roll) =>\n  set((state) => ({\n    campaign: {\n      ...state.campaign,\n      history: [\n        ...(state.campaign.history || []),\n        {\n          role: \"system\",\n          content: `ðŸŽ² Rolled d${roll.sides}: ${roll.result}`,\n        },\n      ],\n    },\n  })),\n\n  toggleMic: () => set((s) => ({ micListening: !s.micListening })),\n  toggleVoice: () => set((s) => ({ voiceMode: !s.voiceMode })),\n}));\n"],"mappings":"AAAA;AACA,SAASA,MAAM,QAAQ,SAAS;AAEhC,OAAO,MAAMC,gBAAgB,GAAGD,MAAM,CAAEE,GAAG,KAAM;EAC/CC,QAAQ,EAAE,IAAI;EACdC,KAAK,EAAE,EAAE;EACTC,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,IAAI;EACfC,YAAY,EAAE,KAAK;EAEnBC,WAAW,EAAGL,QAAQ;IAAA,IAAAM,iBAAA,EAAAC,kBAAA,EAAAC,qBAAA;IAAA,OACpBT,GAAG,CAAC;MACFC,QAAQ,EAAE;QACR,GAAGA,QAAQ;QACXS,OAAO,EAAE,CAAAH,iBAAA,GAAAN,QAAQ,CAACS,OAAO,cAAAH,iBAAA,eAAhBA,iBAAA,CAAkBI,MAAM,GAC7BV,QAAQ,CAACS,OAAO,GAChB,CACE;UACEE,IAAI,EAAE,WAAW;UACjBC,OAAO,EAAE;QACX,CAAC;MAET,CAAC;MACDX,KAAK,EAAED,QAAQ,CAACC,KAAK,IAAI,EAAE;MAC3BC,YAAY,EAAE,EAAAK,kBAAA,GAAAP,QAAQ,CAACS,OAAO,cAAAF,kBAAA,wBAAAC,qBAAA,GAAhBD,kBAAA,CAAkBM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAAL,qBAAA,uBAA9BA,qBAAA,CAAgCI,OAAO,KAAI;IAC3D,CAAC,CAAC;EAAA;EAEJE,YAAY,EAAEA,CAAC;IAAEC,UAAU;IAAEC;EAAc,CAAC,KAC1CjB,GAAG,CAAEkB,KAAK;IAAA,IAAAC,eAAA;IAAA,OAAM;MACdlB,QAAQ,EAAE;QACR,GAAGgB,aAAa;QAChBP,OAAO,EAAE,CACP,IAAI,EAAAS,eAAA,GAAAD,KAAK,CAACjB,QAAQ,cAAAkB,eAAA,uBAAdA,eAAA,CAAgBT,OAAO,KAAI,EAAE,CAAC,EAClC;UAAEE,IAAI,EAAE,WAAW;UAAEC,OAAO,EAAEG;QAAW,CAAC;MAE9C,CAAC;MACDb,YAAY,EAAEa,UAAU;MACxBd,KAAK,EAAEe,aAAa,CAACf,KAAK,IAAIgB,KAAK,CAAChB;IACtC,CAAC;EAAA,CAAC,CAAC;EAELkB,WAAW,EAAGC,IAAI,IAClBrB,GAAG,CAAEkB,KAAK,KAAM;IACdjB,QAAQ,EAAE;MACR,GAAGiB,KAAK,CAACjB,QAAQ;MACjBS,OAAO,EAAE,CACP,IAAIQ,KAAK,CAACjB,QAAQ,CAACS,OAAO,IAAI,EAAE,CAAC,EACjC;QACEE,IAAI,EAAE,QAAQ;QACdC,OAAO,EAAE,cAAcQ,IAAI,CAACC,KAAK,KAAKD,IAAI,CAACE,MAAM;MACnD,CAAC;IAEL;EACF,CAAC,CAAC,CAAC;EAEHC,SAAS,EAAEA,CAAA,KAAMxB,GAAG,CAAEyB,CAAC,KAAM;IAAEpB,YAAY,EAAE,CAACoB,CAAC,CAACpB;EAAa,CAAC,CAAC,CAAC;EAChEqB,WAAW,EAAEA,CAAA,KAAM1B,GAAG,CAAEyB,CAAC,KAAM;IAAErB,SAAS,EAAE,CAACqB,CAAC,CAACrB;EAAU,CAAC,CAAC;AAC7D,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}