{"ast":null,"code":"import { create } from \"zustand\";\nexport const useCampaignStore = create(set => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n  setCampaign: campaign => {\n    var _campaign$history, _campaign$history$sli;\n    return set({\n      campaign,\n      party: campaign.party || [],\n      lastResponse: ((_campaign$history = campaign.history) === null || _campaign$history === void 0 ? void 0 : (_campaign$history$sli = _campaign$history.slice(-1)[0]) === null || _campaign$history$sli === void 0 ? void 0 : _campaign$history$sli.content) || \"\"\n    });\n  },\n  updateFromDM: ({\n    aiResponse,\n    campaignState\n  }) => set({\n    campaign: campaignState,\n    lastResponse: aiResponse,\n    party: campaignState.party || []\n  }),\n  startCombat: ({\n    enemies,\n    initiativeOrder\n  }) => set(state => ({\n    campaign: {\n      ...state.campaign,\n      gameState: {\n        inCombat: true,\n        turnIndex: 0,\n        enemies,\n        initiativeOrder\n      }\n    }\n  })),\n  nextTurn: () => set(state => {\n    const gs = state.campaign.gameState;\n    return {\n      campaign: {\n        ...state.campaign,\n        gameState: {\n          ...gs,\n          turnIndex: (gs.turnIndex + 1) % gs.initiativeOrder.length\n        }\n      }\n    };\n  }),\n  endCombat: () => set(state => ({\n    campaign: {\n      ...state.campaign,\n      gameState: {\n        inCombat: false,\n        enemies: [],\n        initiativeOrder: [],\n        turnIndex: 0\n      }\n    }\n  })),\n  toggleMic: () => set(s => ({\n    micListening: !s.micListening\n  })),\n  toggleVoice: () => set(s => ({\n    voiceMode: !s.voiceMode\n  }))\n}));","map":{"version":3,"names":["create","useCampaignStore","set","campaign","party","lastResponse","voiceMode","micListening","setCampaign","_campaign$history","_campaign$history$sli","history","slice","content","updateFromDM","aiResponse","campaignState","startCombat","enemies","initiativeOrder","state","gameState","inCombat","turnIndex","nextTurn","gs","length","endCombat","toggleMic","s","toggleVoice"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/state/campaignStore.js"],"sourcesContent":["import { create } from \"zustand\";\n\nexport const useCampaignStore = create((set) => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n\n  setCampaign: (campaign) =>\n    set({\n      campaign,\n      party: campaign.party || [],\n      lastResponse: campaign.history?.slice(-1)[0]?.content || \"\",\n    }),\n\n  updateFromDM: ({ aiResponse, campaignState }) =>\n    set({\n      campaign: campaignState,\n      lastResponse: aiResponse,\n      party: campaignState.party || [],\n    }),\n\n  startCombat: ({ enemies, initiativeOrder }) =>\n    set((state) => ({\n      campaign: {\n        ...state.campaign,\n        gameState: {\n          inCombat: true,\n          turnIndex: 0,\n          enemies,\n          initiativeOrder,\n        },\n      },\n    })),\n\n  nextTurn: () =>\n    set((state) => {\n      const gs = state.campaign.gameState;\n      return {\n        campaign: {\n          ...state.campaign,\n          gameState: {\n            ...gs,\n            turnIndex:\n              (gs.turnIndex + 1) % gs.initiativeOrder.length,\n          },\n        },\n      };\n    }),\n\n  endCombat: () =>\n    set((state) => ({\n      campaign: {\n        ...state.campaign,\n        gameState: {\n          inCombat: false,\n          enemies: [],\n          initiativeOrder: [],\n          turnIndex: 0,\n        },\n      },\n    })),\n\n  toggleMic: () => set((s) => ({ micListening: !s.micListening })),\n  toggleVoice: () => set((s) => ({ voiceMode: !s.voiceMode })),\n}));\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAEhC,OAAO,MAAMC,gBAAgB,GAAGD,MAAM,CAAEE,GAAG,KAAM;EAC/CC,QAAQ,EAAE,IAAI;EACdC,KAAK,EAAE,EAAE;EACTC,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,IAAI;EACfC,YAAY,EAAE,KAAK;EAEnBC,WAAW,EAAGL,QAAQ;IAAA,IAAAM,iBAAA,EAAAC,qBAAA;IAAA,OACpBR,GAAG,CAAC;MACFC,QAAQ;MACRC,KAAK,EAAED,QAAQ,CAACC,KAAK,IAAI,EAAE;MAC3BC,YAAY,EAAE,EAAAI,iBAAA,GAAAN,QAAQ,CAACQ,OAAO,cAAAF,iBAAA,wBAAAC,qBAAA,GAAhBD,iBAAA,CAAkBG,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAAF,qBAAA,uBAA9BA,qBAAA,CAAgCG,OAAO,KAAI;IAC3D,CAAC,CAAC;EAAA;EAEJC,YAAY,EAAEA,CAAC;IAAEC,UAAU;IAAEC;EAAc,CAAC,KAC1Cd,GAAG,CAAC;IACFC,QAAQ,EAAEa,aAAa;IACvBX,YAAY,EAAEU,UAAU;IACxBX,KAAK,EAAEY,aAAa,CAACZ,KAAK,IAAI;EAChC,CAAC,CAAC;EAEJa,WAAW,EAAEA,CAAC;IAAEC,OAAO;IAAEC;EAAgB,CAAC,KACxCjB,GAAG,CAAEkB,KAAK,KAAM;IACdjB,QAAQ,EAAE;MACR,GAAGiB,KAAK,CAACjB,QAAQ;MACjBkB,SAAS,EAAE;QACTC,QAAQ,EAAE,IAAI;QACdC,SAAS,EAAE,CAAC;QACZL,OAAO;QACPC;MACF;IACF;EACF,CAAC,CAAC,CAAC;EAELK,QAAQ,EAAEA,CAAA,KACRtB,GAAG,CAAEkB,KAAK,IAAK;IACb,MAAMK,EAAE,GAAGL,KAAK,CAACjB,QAAQ,CAACkB,SAAS;IACnC,OAAO;MACLlB,QAAQ,EAAE;QACR,GAAGiB,KAAK,CAACjB,QAAQ;QACjBkB,SAAS,EAAE;UACT,GAAGI,EAAE;UACLF,SAAS,EACP,CAACE,EAAE,CAACF,SAAS,GAAG,CAAC,IAAIE,EAAE,CAACN,eAAe,CAACO;QAC5C;MACF;IACF,CAAC;EACH,CAAC,CAAC;EAEJC,SAAS,EAAEA,CAAA,KACTzB,GAAG,CAAEkB,KAAK,KAAM;IACdjB,QAAQ,EAAE;MACR,GAAGiB,KAAK,CAACjB,QAAQ;MACjBkB,SAAS,EAAE;QACTC,QAAQ,EAAE,KAAK;QACfJ,OAAO,EAAE,EAAE;QACXC,eAAe,EAAE,EAAE;QACnBI,SAAS,EAAE;MACb;IACF;EACF,CAAC,CAAC,CAAC;EAELK,SAAS,EAAEA,CAAA,KAAM1B,GAAG,CAAE2B,CAAC,KAAM;IAAEtB,YAAY,EAAE,CAACsB,CAAC,CAACtB;EAAa,CAAC,CAAC,CAAC;EAChEuB,WAAW,EAAEA,CAAA,KAAM5B,GAAG,CAAE2B,CAAC,KAAM;IAAEvB,SAAS,EAAE,CAACuB,CAAC,CAACvB;EAAU,CAAC,CAAC;AAC7D,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}