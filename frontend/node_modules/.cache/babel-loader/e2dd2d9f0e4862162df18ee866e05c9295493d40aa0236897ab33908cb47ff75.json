{"ast":null,"code":"// frontend/src/state/campaignStore.js\nimport { create } from \"zustand\";\nexport const useCampaignStore = create(set => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n  // Set a new campaign and normalize DM messages for ChatLog\n  setCampaign: campaign => {\n    var _campaign$history, _campaign$history$sli;\n    return set({\n      campaign: {\n        ...campaign,\n        history: (campaign.history || []).map(entry => ({\n          role: entry.role || \"DM\",\n          content: entry.content || entry.narration || JSON.stringify(entry)\n        }))\n      },\n      party: campaign.party || [],\n      lastResponse: ((_campaign$history = campaign.history) === null || _campaign$history === void 0 ? void 0 : (_campaign$history$sli = _campaign$history.slice(-1)[0]) === null || _campaign$history$sli === void 0 ? void 0 : _campaign$history$sli.content) || \"The adventure begins...\"\n    });\n  },\n  // Update from DM response\n  updateFromDM: ({\n    aiResponse,\n    campaignState\n  }) => set({\n    campaign: {\n      ...campaignState,\n      history: (campaignState.history || []).map(entry => ({\n        role: entry.role || \"DM\",\n        content: entry.content || entry.narration || JSON.stringify(entry)\n      }))\n    },\n    lastResponse: aiResponse,\n    party: campaignState.party || []\n  }),\n  toggleMic: () => set(state => ({\n    micListening: !state.micListening\n  })),\n  toggleVoice: () => set(state => ({\n    voiceMode: !state.voiceMode\n  }))\n}));","map":{"version":3,"names":["create","useCampaignStore","set","campaign","party","lastResponse","voiceMode","micListening","setCampaign","_campaign$history","_campaign$history$sli","history","map","entry","role","content","narration","JSON","stringify","slice","updateFromDM","aiResponse","campaignState","toggleMic","state","toggleVoice"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/state/campaignStore.js"],"sourcesContent":["// frontend/src/state/campaignStore.js\nimport { create } from \"zustand\";\n\nexport const useCampaignStore = create((set) => ({\n  campaign: null,\n  party: [],\n  lastResponse: \"\",\n  voiceMode: true,\n  micListening: false,\n\n  // Set a new campaign and normalize DM messages for ChatLog\n  setCampaign: (campaign) =>\n    set({\n      campaign: {\n        ...campaign,\n        history: (campaign.history || []).map((entry) => ({\n          role: entry.role || \"DM\",\n          content: entry.content || entry.narration || JSON.stringify(entry),\n        })),\n      },\n      party: campaign.party || [],\n      lastResponse:\n        (campaign.history?.slice(-1)[0]?.content) || \"The adventure begins...\",\n    }),\n\n  // Update from DM response\n  updateFromDM: ({ aiResponse, campaignState }) =>\n    set({\n      campaign: {\n        ...campaignState,\n        history: (campaignState.history || []).map((entry) => ({\n          role: entry.role || \"DM\",\n          content: entry.content || entry.narration || JSON.stringify(entry),\n        })),\n      },\n      lastResponse: aiResponse,\n      party: campaignState.party || [],\n    }),\n\n  toggleMic: () => set((state) => ({ micListening: !state.micListening })),\n  toggleVoice: () => set((state) => ({ voiceMode: !state.voiceMode })),\n}));\n"],"mappings":"AAAA;AACA,SAASA,MAAM,QAAQ,SAAS;AAEhC,OAAO,MAAMC,gBAAgB,GAAGD,MAAM,CAAEE,GAAG,KAAM;EAC/CC,QAAQ,EAAE,IAAI;EACdC,KAAK,EAAE,EAAE;EACTC,YAAY,EAAE,EAAE;EAChBC,SAAS,EAAE,IAAI;EACfC,YAAY,EAAE,KAAK;EAEnB;EACAC,WAAW,EAAGL,QAAQ;IAAA,IAAAM,iBAAA,EAAAC,qBAAA;IAAA,OACpBR,GAAG,CAAC;MACFC,QAAQ,EAAE;QACR,GAAGA,QAAQ;QACXQ,OAAO,EAAE,CAACR,QAAQ,CAACQ,OAAO,IAAI,EAAE,EAAEC,GAAG,CAAEC,KAAK,KAAM;UAChDC,IAAI,EAAED,KAAK,CAACC,IAAI,IAAI,IAAI;UACxBC,OAAO,EAAEF,KAAK,CAACE,OAAO,IAAIF,KAAK,CAACG,SAAS,IAAIC,IAAI,CAACC,SAAS,CAACL,KAAK;QACnE,CAAC,CAAC;MACJ,CAAC;MACDT,KAAK,EAAED,QAAQ,CAACC,KAAK,IAAI,EAAE;MAC3BC,YAAY,EACV,EAAAI,iBAAA,GAACN,QAAQ,CAACQ,OAAO,cAAAF,iBAAA,wBAAAC,qBAAA,GAAhBD,iBAAA,CAAkBU,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,cAAAT,qBAAA,uBAA9BA,qBAAA,CAAgCK,OAAO,KAAK;IACjD,CAAC,CAAC;EAAA;EAEJ;EACAK,YAAY,EAAEA,CAAC;IAAEC,UAAU;IAAEC;EAAc,CAAC,KAC1CpB,GAAG,CAAC;IACFC,QAAQ,EAAE;MACR,GAAGmB,aAAa;MAChBX,OAAO,EAAE,CAACW,aAAa,CAACX,OAAO,IAAI,EAAE,EAAEC,GAAG,CAAEC,KAAK,KAAM;QACrDC,IAAI,EAAED,KAAK,CAACC,IAAI,IAAI,IAAI;QACxBC,OAAO,EAAEF,KAAK,CAACE,OAAO,IAAIF,KAAK,CAACG,SAAS,IAAIC,IAAI,CAACC,SAAS,CAACL,KAAK;MACnE,CAAC,CAAC;IACJ,CAAC;IACDR,YAAY,EAAEgB,UAAU;IACxBjB,KAAK,EAAEkB,aAAa,CAAClB,KAAK,IAAI;EAChC,CAAC,CAAC;EAEJmB,SAAS,EAAEA,CAAA,KAAMrB,GAAG,CAAEsB,KAAK,KAAM;IAAEjB,YAAY,EAAE,CAACiB,KAAK,CAACjB;EAAa,CAAC,CAAC,CAAC;EACxEkB,WAAW,EAAEA,CAAA,KAAMvB,GAAG,CAAEsB,KAAK,KAAM;IAAElB,SAAS,EAAE,CAACkB,KAAK,CAAClB;EAAU,CAAC,CAAC;AACrE,CAAC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}