{"ast":null,"code":"// frontend/src/utils/musicSceneDetection.js\n\n/**\n * Auto Scene Detection for Background Music\n * Analyzes DM narration and suggests appropriate music tracks\n */\n\nconst SCENE_PATTERNS = {\n  combat: {\n    keywords: ['battle', 'fight', 'combat', 'attack', 'weapon', 'sword', 'enemy', 'foe', 'charge', 'strike']\n  },\n  tavern: {\n    keywords: ['tavern', 'inn', 'alehouse', 'pub', 'bar', 'drink', 'ale', 'beer'],\n    track: 'tavern'\n  },\n  dungeon: {\n    keywords: ['dungeon', 'cave', 'crypt', 'tomb', 'underground', 'dark corridor', 'chamber', 'vault'],\n    track: 'dungeon_explore'\n  },\n  forest: {\n    keywords: ['forest', 'woods', 'trees', 'grove', 'woodland', 'jungle', 'foliage'],\n    track: 'forest_exploration'\n  },\n  village: {\n    keywords: ['village', 'town', 'city', 'settlement', 'marketplace', 'square', 'peaceful', 'street'],\n    track: 'peaceful_village'\n  },\n  victory: {\n    keywords: ['victory', 'triumph', 'defeated all', 'won the battle', 'enemies fall', 'victorious'],\n    track: 'victory'\n  },\n  defeat: {\n    keywords: ['defeat', 'fallen', 'death', 'party falls', 'overwhelmed', 'last breath'],\n    track: 'defeat'\n  },\n  boss: {\n    keywords: ['boss', 'dragon', 'ancient', 'lord', 'king', 'queen', 'master', 'overlord', 'legendary', 'powerful being']\n  }\n};\nfunction hasKeywords(text, keywords) {\n  return keywords.some(keyword => text.includes(keyword));\n}\nexport function detectScene(narration, inCombat = false) {\n  if (!narration) return null;\n  const lowerText = narration.toLowerCase();\n\n  // Victory/defeat\n  if (hasKeywords(lowerText, SCENE_PATTERNS.victory.keywords)) {\n    return {\n      type: 'victory',\n      track: 'victory',\n      reason: 'Victory celebration'\n    };\n  }\n  if (hasKeywords(lowerText, SCENE_PATTERNS.defeat.keywords)) {\n    return {\n      type: 'defeat',\n      track: 'defeat',\n      reason: 'Defeat theme'\n    };\n  }\n\n  // Combat\n  if (inCombat) {\n    if (hasKeywords(lowerText, SCENE_PATTERNS.boss.keywords)) {\n      return {\n        type: 'boss_combat',\n        track: 'boss_fight',\n        reason: 'Boss battle music'\n      };\n    }\n    if (hasKeywords(lowerText, ['fierce', 'deadly', 'overwhelming', 'powerful', 'dangerous'])) {\n      return {\n        type: 'hard_combat',\n        track: 'combat_hard',\n        reason: 'Intense battle music'\n      };\n    }\n    return {\n      type: 'easy_combat',\n      track: 'combat_easy',\n      reason: 'Combat music'\n    };\n  }\n  if (hasKeywords(lowerText, SCENE_PATTERNS.combat.keywords)) {\n    if (hasKeywords(lowerText, SCENE_PATTERNS.boss.keywords)) {\n      return {\n        type: 'boss_combat',\n        track: 'boss_fight',\n        reason: 'Boss encounter'\n      };\n    }\n    return {\n      type: 'combat',\n      track: 'combat_easy',\n      reason: 'Battle begins'\n    };\n  }\n\n  // Locations\n  if (hasKeywords(lowerText, SCENE_PATTERNS.tavern.keywords)) {\n    return {\n      type: 'tavern',\n      track: 'tavern',\n      reason: 'Tavern ambience'\n    };\n  }\n  if (hasKeywords(lowerText, SCENE_PATTERNS.dungeon.keywords)) {\n    return {\n      type: 'dungeon',\n      track: 'dungeon_explore',\n      reason: 'Dark dungeon exploration'\n    };\n  }\n  if (hasKeywords(lowerText, SCENE_PATTERNS.forest.keywords)) {\n    return {\n      type: 'forest',\n      track: 'forest_exploration',\n      reason: 'Forest exploration'\n    };\n  }\n  if (hasKeywords(lowerText, SCENE_PATTERNS.village.keywords)) {\n    return {\n      type: 'village',\n      track: 'peaceful_village',\n      reason: 'Village exploration'\n    };\n  }\n  return null;\n}","map":{"version":3,"names":["SCENE_PATTERNS","combat","keywords","tavern","track","dungeon","forest","village","victory","defeat","boss","hasKeywords","text","some","keyword","includes","detectScene","narration","inCombat","lowerText","toLowerCase","type","reason"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/musicSceneDetection.js"],"sourcesContent":["// frontend/src/utils/musicSceneDetection.js\n\n/**\n * Auto Scene Detection for Background Music\n * Analyzes DM narration and suggests appropriate music tracks\n */\n\nconst SCENE_PATTERNS = {\n  combat: {\n    keywords: ['battle', 'fight', 'combat', 'attack', 'weapon', 'sword', 'enemy', 'foe', 'charge', 'strike'],\n  },\n  tavern: {\n    keywords: ['tavern', 'inn', 'alehouse', 'pub', 'bar', 'drink', 'ale', 'beer'],\n    track: 'tavern'\n  },\n  dungeon: {\n    keywords: ['dungeon', 'cave', 'crypt', 'tomb', 'underground', 'dark corridor', 'chamber', 'vault'],\n    track: 'dungeon_explore'\n  },\n  forest: {\n    keywords: ['forest', 'woods', 'trees', 'grove', 'woodland', 'jungle', 'foliage'],\n    track: 'forest_exploration'\n  },\n  village: {\n    keywords: ['village', 'town', 'city', 'settlement', 'marketplace', 'square', 'peaceful', 'street'],\n    track: 'peaceful_village'\n  },\n  victory: {\n    keywords: ['victory', 'triumph', 'defeated all', 'won the battle', 'enemies fall', 'victorious'],\n    track: 'victory'\n  },\n  defeat: {\n    keywords: ['defeat', 'fallen', 'death', 'party falls', 'overwhelmed', 'last breath'],\n    track: 'defeat'\n  },\n  boss: {\n    keywords: ['boss', 'dragon', 'ancient', 'lord', 'king', 'queen', 'master', 'overlord', 'legendary', 'powerful being']\n  }\n};\n\nfunction hasKeywords(text, keywords) {\n  return keywords.some(keyword => text.includes(keyword));\n}\n\nexport function detectScene(narration, inCombat = false) {\n  if (!narration) return null;\n  \n  const lowerText = narration.toLowerCase();\n  \n  // Victory/defeat\n  if (hasKeywords(lowerText, SCENE_PATTERNS.victory.keywords)) {\n    return { type: 'victory', track: 'victory', reason: 'Victory celebration' };\n  }\n  \n  if (hasKeywords(lowerText, SCENE_PATTERNS.defeat.keywords)) {\n    return { type: 'defeat', track: 'defeat', reason: 'Defeat theme' };\n  }\n  \n  // Combat\n  if (inCombat) {\n    if (hasKeywords(lowerText, SCENE_PATTERNS.boss.keywords)) {\n      return { type: 'boss_combat', track: 'boss_fight', reason: 'Boss battle music' };\n    }\n    \n    if (hasKeywords(lowerText, ['fierce', 'deadly', 'overwhelming', 'powerful', 'dangerous'])) {\n      return { type: 'hard_combat', track: 'combat_hard', reason: 'Intense battle music' };\n    }\n    \n    return { type: 'easy_combat', track: 'combat_easy', reason: 'Combat music' };\n  }\n  \n  if (hasKeywords(lowerText, SCENE_PATTERNS.combat.keywords)) {\n    if (hasKeywords(lowerText, SCENE_PATTERNS.boss.keywords)) {\n      return { type: 'boss_combat', track: 'boss_fight', reason: 'Boss encounter' };\n    }\n    return { type: 'combat', track: 'combat_easy', reason: 'Battle begins' };\n  }\n  \n  // Locations\n  if (hasKeywords(lowerText, SCENE_PATTERNS.tavern.keywords)) {\n    return { type: 'tavern', track: 'tavern', reason: 'Tavern ambience' };\n  }\n  \n  if (hasKeywords(lowerText, SCENE_PATTERNS.dungeon.keywords)) {\n    return { type: 'dungeon', track: 'dungeon_explore', reason: 'Dark dungeon exploration' };\n  }\n  \n  if (hasKeywords(lowerText, SCENE_PATTERNS.forest.keywords)) {\n    return { type: 'forest', track: 'forest_exploration', reason: 'Forest exploration' };\n  }\n  \n  if (hasKeywords(lowerText, SCENE_PATTERNS.village.keywords)) {\n    return { type: 'village', track: 'peaceful_village', reason: 'Village exploration' };\n  }\n  \n  return null;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}