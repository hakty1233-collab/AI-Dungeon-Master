{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hakty\\\\Desktop\\\\AI-Dungeon-Master\\\\frontend\\\\src\\\\components\\\\CombatTracker.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// frontend/src/components/CombatTracker.jsx - WITH SPELL DAMAGE IN COMBAT\nimport { useState } from 'react';\nimport { executeAttack, nextTurn, checkCombatEnd, getCurrentCombatant, updateCombatant, applyDamage } from '../utils/combatSystem';\nimport { SPELL_DATABASE, getSpellSlots, canCastSpell, castSpell, getSpellAttackBonus, getSpellSaveDC, calculateSpellDamage, rollSpellDamage, SPELLCASTING_CLASSES } from '../utils/spellSystem';\nimport { createStatusEffect, applyStatusEffect, STATUS_EFFECTS, DURATION_TYPES } from '../utils/statusEffectSystem';\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  HELPERS\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction rollD20() {\n  return Math.floor(Math.random() * 20) + 1;\n}\n\n/** Map spell types that apply status effects */\nconst SPELL_STATUS_EFFECTS = {\n  hold_person: {\n    type: STATUS_EFFECTS.PARALYZED,\n    duration: 10,\n    durationType: DURATION_TYPES.SAVE_ENDS,\n    saveDC: null\n  },\n  sleep: {\n    type: STATUS_EFFECTS.UNCONSCIOUS,\n    duration: 1,\n    durationType: DURATION_TYPES.MINUTES\n  },\n  haste: {\n    type: STATUS_EFFECTS.HASTED,\n    duration: 10,\n    durationType: DURATION_TYPES.ROUNDS\n  },\n  invisibility: {\n    type: STATUS_EFFECTS.INVISIBLE,\n    duration: 60,\n    durationType: DURATION_TYPES.MINUTES\n  },\n  greater_invisibility: {\n    type: STATUS_EFFECTS.INVISIBLE,\n    duration: 10,\n    durationType: DURATION_TYPES.ROUNDS\n  }\n};\n\n/** Colour band per spell level */\nfunction spellLevelColor(level) {\n  const c = ['#4CAF50', '#2196F3', '#03A9F4', '#00BCD4', '#009688', '#8BC34A', '#CDDC39', '#FFEB3B', '#FFC107', '#FF9800'];\n  return c[level] || '#888';\n}\n\n/** Get accessible spells for combat (cantrips + prepared/known) */\nfunction getCombatSpells(character) {\n  var _character$spells, _character$spells2, _character$spells3;\n  const cantrips = (((_character$spells = character.spells) === null || _character$spells === void 0 ? void 0 : _character$spells.cantrips) || []).map(k => ({\n    key: k,\n    ...SPELL_DATABASE[k]\n  })).filter(s => s.name);\n  const prepared = (((_character$spells2 = character.spells) === null || _character$spells2 === void 0 ? void 0 : _character$spells2.prepared) || []).map(k => ({\n    key: k,\n    ...SPELL_DATABASE[k]\n  })).filter(s => s.name);\n  const known = (((_character$spells3 = character.spells) === null || _character$spells3 === void 0 ? void 0 : _character$spells3.known) || []).map(k => ({\n    key: k,\n    ...SPELL_DATABASE[k]\n  })).filter(s => s.name);\n\n  // Merge, deduplicate by key\n  const all = [...cantrips];\n  [...prepared, ...known].forEach(s => {\n    if (!all.find(a => a.key === s.key)) all.push(s);\n  });\n\n  // Only spells useful in combat: damage, healing, or known status spells\n  return all.filter(s => s.damage || s.healing || SPELL_STATUS_EFFECTS[s.key] || ['shield', 'misty_step', 'counterspell', 'fly', 'haste', 'hold_person', 'sleep', 'invisibility', 'greater_invisibility', 'spiritual_weapon'].includes(s.key));\n}\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  SPELL CAST PANEL (sub-component)\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction SpellCastPanel({\n  caster,\n  combatSpells,\n  selectedTarget,\n  onSpellResult,\n  onClose\n}) {\n  _s();\n  var _caster$spellSlots;\n  const [selectedSpell, setSelectedSpell] = useState(null);\n  const [upcastLevel, setUpcastLevel] = useState(null);\n  const [castResult, setCastResult] = useState(null);\n  const currentSlots = ((_caster$spellSlots = caster.spellSlots) === null || _caster$spellSlots === void 0 ? void 0 : _caster$spellSlots.current) || getSpellSlots(caster);\n  const spellAttack = getSpellAttackBonus(caster);\n  const spellSaveDC = getSpellSaveDC(caster);\n  const handleCast = () => {\n    if (!selectedSpell) return;\n    const spell = selectedSpell;\n    const slotLevel = upcastLevel !== null && upcastLevel !== void 0 ? upcastLevel : spell.level || 0;\n\n    // 1. Consume spell slot (updates character object)\n    const castOutcome = castSpell(caster, spell, slotLevel > 0 ? slotLevel : null);\n    if (!castOutcome.success) {\n      alert(castOutcome.message);\n      return;\n    }\n    const updatedCaster = castOutcome.character;\n\n    // 2. Determine result\n    let result = {\n      spellName: spell.name,\n      casterName: caster.name,\n      targetName: (selectedTarget === null || selectedTarget === void 0 ? void 0 : selectedTarget.name) || 'ally',\n      slotLevel,\n      updatedCaster,\n      damage: 0,\n      healing: 0,\n      hit: null,\n      critical: false,\n      statusApplied: null,\n      log: ''\n    };\n\n    // â”€â”€ DAMAGE spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    if (spell.damage && selectedTarget) {\n      // Spell attack roll or auto-hit (magic missile)?\n      if (spell.key === 'magic_missile') {\n        // Magic missile auto-hits\n        const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n        const rolled = rollSpellDamage(dmgStr);\n        result.damage = rolled.total;\n        result.hit = true;\n        result.log = `âœ¨ ${caster.name} fires Magic Missile at ${selectedTarget.name} for ${rolled.total} force damage! (auto-hit)`;\n      } else if (spell.key === 'sacred_flame') {\n        // Sacred flame â€” DEX save\n        const saveRoll = rollD20();\n        const targetSave = selectedTarget.dex ? Math.floor((selectedTarget.dex - 10) / 2) : 0;\n        const saved = saveRoll + targetSave >= spellSaveDC;\n        if (!saved) {\n          const dmgStr = calculateSpellDamage(spell, caster.level) || spell.damage;\n          const rolled = rollSpellDamage(dmgStr);\n          result.damage = rolled.total;\n          result.hit = true;\n          result.log = `ðŸ”¥ Sacred Flame hits ${selectedTarget.name} for ${rolled.total} radiant damage! (DEX save ${saveRoll} failed vs DC ${spellSaveDC})`;\n        } else {\n          result.hit = false;\n          result.log = `ðŸ”¥ ${selectedTarget.name} saves against Sacred Flame! (rolled ${saveRoll} vs DC ${spellSaveDC})`;\n        }\n      } else if (['fireball', 'lightning_bolt', 'thunderwave', 'burning_hands', 'ice_storm', 'cone_of_cold', 'chain_lightning', 'disintegrate', 'finger_of_death', 'meteor_swarm'].includes(spell.key)) {\n        // Saving throw spells\n        const saveRoll = rollD20();\n        const targetDex = selectedTarget.dex ? Math.floor((selectedTarget.dex - 10) / 2) : 0;\n        const saved = saveRoll + targetDex >= spellSaveDC;\n        const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n        const rolled = rollSpellDamage(dmgStr);\n        result.damage = saved ? Math.floor(rolled.total / 2) : rolled.total;\n        result.hit = true;\n        result.log = saved ? `ðŸ’¥ ${caster.name} casts ${spell.name}! ${selectedTarget.name} saves (${saveRoll} vs DC ${spellSaveDC}) â€” takes ${result.damage} ${spell.damageType} damage (half).` : `ðŸ’¥ ${caster.name} casts ${spell.name}! ${selectedTarget.name} fails save (${saveRoll} vs DC ${spellSaveDC}) â€” takes ${result.damage} ${spell.damageType} damage!`;\n      } else {\n        // Standard spell attack roll\n        const d20 = rollD20();\n        const total = d20 + spellAttack;\n        const crit = d20 === 20;\n        const hit = crit || total >= (selectedTarget.ac || selectedTarget.armorClass || 12);\n        if (hit) {\n          const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n          const rolled = rollSpellDamage(crit ? dmgStr.replace(/(\\d+)d/, (_, n) => `${parseInt(n) * 2}d`) : dmgStr);\n          result.damage = rolled.total;\n          result.hit = true;\n          result.critical = crit;\n          result.log = crit ? `ðŸ’¥ CRITICAL! ${caster.name}'s ${spell.name} hits ${selectedTarget.name} for ${rolled.total} ${spell.damageType} damage!` : `âœ¨ ${caster.name}'s ${spell.name} hits ${selectedTarget.name} for ${rolled.total} ${spell.damageType} damage! (rolled ${total} vs AC ${selectedTarget.ac || selectedTarget.armorClass || '?'})`;\n        } else {\n          result.hit = false;\n          result.log = `âŒ ${caster.name}'s ${spell.name} misses ${selectedTarget.name}! (rolled ${total} vs AC ${selectedTarget.ac || selectedTarget.armorClass || '?'})`;\n        }\n      }\n    }\n\n    // â”€â”€ HEALING spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    else if (spell.healing) {\n      // Target should be an ally for healing â€” we just heal the caster for now if no ally target\n      const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.healing;\n      const rolled = rollSpellDamage(dmgStr);\n      // Add spellcasting modifier to healing\n      const scAbil = {\n        Cleric: 'WIS',\n        Druid: 'WIS',\n        Paladin: 'CHA',\n        Bard: 'CHA',\n        Ranger: 'WIS'\n      };\n      const abilKey = scAbil[caster.class] || 'INT';\n      const mod = caster.abilities ? Math.floor((caster.abilities[abilKey] - 10) / 2) : 0;\n      result.healing = rolled.total + mod;\n      result.log = `ðŸ’š ${caster.name} casts ${spell.name} and heals for ${result.healing} HP!`;\n    }\n\n    // â”€â”€ STATUS EFFECT spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    else if (SPELL_STATUS_EFFECTS[spell.key]) {\n      var _effectDef$saveDC;\n      const effectDef = SPELL_STATUS_EFFECTS[spell.key];\n      const dc = (_effectDef$saveDC = effectDef.saveDC) !== null && _effectDef$saveDC !== void 0 ? _effectDef$saveDC : spellSaveDC;\n      result.statusApplied = {\n        ...effectDef,\n        saveDC: dc,\n        spellName: spell.name\n      };\n      result.log = `ðŸŒ€ ${caster.name} casts ${spell.name}${selectedTarget ? ` on ${selectedTarget.name}` : ''}!`;\n    }\n\n    // â”€â”€ UTILITY spells (shield, misty step, etc.) â”€â”€\n    else {\n      result.log = `âœ¨ ${caster.name} casts ${spell.name}!`;\n    }\n    setCastResult(result);\n    onSpellResult(result);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      backgroundColor: '#12012a',\n      border: '2px solid #9C27B0',\n      borderRadius: '10px',\n      padding: '15px',\n      marginTop: '10px'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '12px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        style: {\n          margin: 0,\n          color: '#CE93D8'\n        },\n        children: \"\\u2728 Cast a Spell\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClose,\n        style: {\n          background: 'none',\n          border: 'none',\n          color: '#888',\n          cursor: 'pointer',\n          fontSize: '18px'\n        },\n        children: \"\\u2715\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontSize: '12px',\n        color: '#888',\n        marginBottom: '10px'\n      },\n      children: [\"Spell Attack: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#CE93D8'\n        },\n        children: [\"+\", spellAttack]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 23\n      }, this), \" \\xA0|\\xA0 Save DC: \", /*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          color: '#CE93D8'\n        },\n        children: spellSaveDC\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '6px',\n        flexWrap: 'wrap',\n        marginBottom: '12px'\n      },\n      children: getSpellSlots(caster).map((max, i) => {\n        if (max === 0) return null;\n        const cur = currentSlots[i] || 0;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            padding: '4px 8px',\n            backgroundColor: cur > 0 ? '#1a0a2e' : '#1a1a1a',\n            border: `1px solid ${cur > 0 ? spellLevelColor(i + 1) : '#333'}`,\n            borderRadius: '4px',\n            fontSize: '11px',\n            color: cur > 0 ? spellLevelColor(i + 1) : '#555'\n          },\n          children: [\"L\", i + 1, \": \", cur, \"/\", max]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fill, minmax(160px, 1fr))',\n        gap: '8px',\n        marginBottom: '12px',\n        maxHeight: '200px',\n        overflowY: 'auto'\n      },\n      children: [combatSpells.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#666',\n          fontStyle: 'italic',\n          padding: '10px',\n          gridColumn: '1/-1'\n        },\n        children: \"No combat spells available. Open SpellBook to learn spells.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 11\n      }, this), combatSpells.map(spell => {\n        const hasSlotsOrCantrip = spell.level === 0 || (currentSlots[spell.level - 1] || 0) > 0;\n        const isSelected = (selectedSpell === null || selectedSpell === void 0 ? void 0 : selectedSpell.key) === spell.key;\n        return /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => {\n            setSelectedSpell(spell);\n            setUpcastLevel(spell.level);\n            setCastResult(null);\n          },\n          disabled: !hasSlotsOrCantrip,\n          style: {\n            padding: '8px 10px',\n            backgroundColor: isSelected ? '#3a0a5a' : '#1a0a2e',\n            border: `2px solid ${isSelected ? '#CE93D8' : hasSlotsOrCantrip ? spellLevelColor(spell.level) : '#333'}`,\n            borderRadius: '6px',\n            cursor: hasSlotsOrCantrip ? 'pointer' : 'not-allowed',\n            opacity: hasSlotsOrCantrip ? 1 : 0.4,\n            textAlign: 'left',\n            transition: 'all 0.15s'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '13px',\n              fontWeight: 'bold',\n              color: spellLevelColor(spell.level),\n              marginBottom: '3px'\n            },\n            children: spell.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '10px',\n              color: '#888'\n            },\n            children: [spell.level === 0 ? 'Cantrip' : `Lvl ${spell.level}`, spell.damage && ` â€¢ ${spell.damage} ${spell.damageType}`, spell.healing && ` â€¢ Heals ${spell.healing}`, spell.concentration && ' â€¢ Conc.']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 268,\n            columnNumber: 15\n          }, this)]\n        }, spell.key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 13\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }, this), selectedSpell && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#0a0018',\n        borderRadius: '8px',\n        padding: '12px',\n        border: `1px solid ${spellLevelColor(selectedSpell.level)}`\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '8px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            fontWeight: 'bold',\n            color: spellLevelColor(selectedSpell.level)\n          },\n          children: selectedSpell.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            color: '#888',\n            fontSize: '12px',\n            marginLeft: '10px'\n          },\n          children: [selectedSpell.castingTime, \" \\u2022 \", selectedSpell.range]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '13px',\n          color: '#ccc',\n          marginBottom: '10px'\n        },\n        children: selectedSpell.description\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 11\n      }, this), selectedSpell.level > 0 && selectedSpell.upcastBonus && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            fontSize: '11px',\n            color: '#888',\n            marginBottom: '6px'\n          },\n          children: \"Cast at level:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '6px',\n            flexWrap: 'wrap'\n          },\n          children: Array.from({\n            length: 10 - selectedSpell.level\n          }, (_, i) => selectedSpell.level + i).map(lvl => {\n            const slotsLeft = currentSlots[lvl - 1] || 0;\n            if (getSpellSlots(caster)[lvl - 1] === 0) return null;\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setUpcastLevel(lvl),\n              disabled: slotsLeft === 0,\n              style: {\n                padding: '4px 10px',\n                backgroundColor: upcastLevel === lvl ? spellLevelColor(lvl) : '#1a0a2e',\n                color: upcastLevel === lvl ? '#000' : slotsLeft > 0 ? '#eee' : '#555',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: slotsLeft > 0 ? 'pointer' : 'not-allowed',\n                fontSize: '12px',\n                opacity: slotsLeft > 0 ? 1 : 0.4\n              },\n              children: [\"L\", lvl, \" (\", slotsLeft, \")\"]\n            }, lvl, true, {\n              fileName: _jsxFileName,\n              lineNumber: 302,\n              columnNumber: 21\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 13\n      }, this), !selectedTarget && selectedSpell.damage && /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          color: '#ff9800',\n          fontSize: '12px',\n          marginBottom: '8px'\n        },\n        children: \"\\u26A0\\uFE0F Select a target enemy above before casting this spell\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 326,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCast,\n        disabled: !!(selectedSpell.damage && !selectedTarget),\n        style: {\n          width: '100%',\n          padding: '10px',\n          backgroundColor: selectedSpell.damage && !selectedTarget ? '#333' : '#7B1FA2',\n          color: 'white',\n          border: 'none',\n          borderRadius: '6px',\n          cursor: selectedSpell.damage && !selectedTarget ? 'not-allowed' : 'pointer',\n          fontWeight: 'bold',\n          fontSize: '15px',\n          transition: 'background 0.2s'\n        },\n        children: [\"\\u2728 Cast \", selectedSpell.name, upcastLevel && upcastLevel > selectedSpell.level ? ` (Lvl ${upcastLevel})` : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 9\n    }, this), castResult && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginTop: '10px',\n        padding: '10px',\n        backgroundColor: castResult.hit === false ? '#1a0a0a' : '#0a1a0a',\n        borderRadius: '6px',\n        border: `1px solid ${castResult.hit === false ? '#f44336' : '#4CAF50'}`,\n        fontSize: '13px',\n        color: '#eee'\n      },\n      children: castResult.log\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 202,\n    columnNumber: 5\n  }, this);\n}\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  MAIN COMBAT TRACKER\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n_s(SpellCastPanel, \"S08bzWkPTW0lYe6itUZmJ0P72BE=\");\n_c = SpellCastPanel;\nexport default function CombatTracker({\n  combat,\n  onUpdate,\n  onEnd,\n  party = [],\n  updateParty\n}) {\n  _s2();\n  var _currentCombatant$att;\n  const [selectedTarget, setSelectedTarget] = useState(null);\n  const [combatLog, setCombatLog] = useState([]);\n  const [showSpellPanel, setShowSpellPanel] = useState(false);\n  if (!combat || !combat.isActive) return null;\n  const currentCombatant = getCurrentCombatant(combat);\n  const isPlayerTurn = !(currentCombatant !== null && currentCombatant !== void 0 && currentCombatant.isEnemy);\n\n  // Find the full party character for the current combatant (so we have spell data)\n  const partyCharacter = party.find(p => p.name === (currentCombatant === null || currentCombatant === void 0 ? void 0 : currentCombatant.name)) || currentCombatant;\n  const isSpellcaster = SPELLCASTING_CLASSES[partyCharacter === null || partyCharacter === void 0 ? void 0 : partyCharacter.class];\n  const combatSpells = isSpellcaster ? getCombatSpells(partyCharacter) : [];\n  const addLog = (entry, prevLog = combatLog) => {\n    setCombatLog([entry, ...prevLog]);\n    return [entry, ...prevLog];\n  };\n\n  // â”€â”€ ATTACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleAttack = (attackIndex = 0) => {\n    if (!selectedTarget) {\n      alert('Select a target first!');\n      return;\n    }\n    const result = executeAttack(currentCombatant, selectedTarget, attackIndex);\n    const logEntry = result.attackRoll.isCritical ? `ðŸ’¥ CRITICAL HIT! ${result.attacker} hits ${result.target} with ${result.attack} for ${result.damage} ${result.damageType} damage!` : result.attackRoll.isFumble ? `âŒ FUMBLE! ${result.attacker} misses ${result.target}!` : result.attackRoll.isHit ? `âš”ï¸ ${result.attacker} hits ${result.target} with ${result.attack} for ${result.damage} ${result.damageType} damage!` : `ðŸ›¡ï¸ ${result.attacker} misses ${result.target}!`;\n    const newLog = addLog(logEntry);\n    if (result.attackRoll.isHit) {\n      const damagedTarget = applyDamage(selectedTarget, result.damage);\n      const updatedCombat = updateCombatant(combat, selectedTarget.id || selectedTarget.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has been defeated!`, newLog);\n      onUpdate(updatedCombat);\n      const endCheck = checkCombatEnd(updatedCombat);\n      if (endCheck.ended) {\n        setTimeout(() => onEnd(endCheck), 1000);\n        return;\n      }\n    }\n    handleEndTurn();\n  };\n\n  // â”€â”€ SPELL RESULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleSpellResult = result => {\n    setShowSpellPanel(false);\n    addLog(result.log);\n    let currentCombatState = {\n      ...combat\n    };\n\n    // 1. Update caster's spell slots in the party store\n    if (updateParty && result.updatedCaster) {\n      const updatedParty = party.map(p => p.name === result.updatedCaster.name ? result.updatedCaster : p);\n      updateParty(updatedParty);\n    }\n\n    // 2. Apply damage to target\n    if (result.damage > 0 && result.hit && selectedTarget) {\n      const damagedTarget = applyDamage(selectedTarget, result.damage, result.damageType);\n      currentCombatState = updateCombatant(currentCombatState, selectedTarget.id || selectedTarget.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has been defeated!`);\n      onUpdate(currentCombatState);\n      const endCheck = checkCombatEnd(currentCombatState);\n      if (endCheck.ended) {\n        setTimeout(() => onEnd(endCheck), 1000);\n        return;\n      }\n    }\n\n    // 3. Apply healing (to caster for now â€” could be extended to target selection)\n    if (result.healing > 0 && updateParty) {\n      const healedCaster = {\n        ...result.updatedCaster,\n        hp: Math.min(result.updatedCaster.maxHp, (result.updatedCaster.hp || 0) + result.healing)\n      };\n      const updatedParty = party.map(p => p.name === healedCaster.name ? healedCaster : p);\n      updateParty(updatedParty);\n    }\n\n    // 4. Apply status effect to target\n    if (result.statusApplied && selectedTarget && updateParty) {\n      const effect = createStatusEffect({\n        type: result.statusApplied.type,\n        duration: result.statusApplied.duration || 1,\n        durationType: result.statusApplied.durationType || DURATION_TYPES.ROUNDS,\n        saveDC: result.statusApplied.saveDC,\n        spellName: result.statusApplied.spellName,\n        source: result.casterName\n      });\n      if (effect) {\n        // If target is a party member, apply via updateParty\n        const partyTarget = party.find(p => p.name === selectedTarget.name);\n        if (partyTarget && updateParty) {\n          const withEffect = applyStatusEffect(partyTarget, effect);\n          const updatedParty = party.map(p => p.name === withEffect.name ? withEffect : p);\n          updateParty(updatedParty);\n          addLog(`ðŸŒ€ ${selectedTarget.name} is now ${effect.name}!`);\n        }\n      }\n    }\n    handleEndTurn();\n  };\n\n  // â”€â”€ END TURN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleEndTurn = () => {\n    setSelectedTarget(null);\n    setShowSpellPanel(false);\n    const newCombat = nextTurn(combat);\n    onUpdate(newCombat);\n    setTimeout(() => {\n      var _newCombat$combatants;\n      if ((_newCombat$combatants = newCombat.combatants[newCombat.currentTurn]) !== null && _newCombat$combatants !== void 0 && _newCombat$combatants.isEnemy) {\n        handleEnemyTurn(newCombat);\n      }\n    }, 500);\n  };\n\n  // â”€â”€ ENEMY TURN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleEnemyTurn = currentCombat => {\n    const enemy = getCurrentCombatant(currentCombat);\n    if (!enemy || enemy.isDead) {\n      handleEndTurn();\n      return;\n    }\n    const aliveParty = currentCombat.combatants.filter(c => !c.isEnemy && !c.isDead);\n    if (aliveParty.length === 0) return;\n    const target = aliveParty[Math.floor(Math.random() * aliveParty.length)];\n    const result = executeAttack(enemy, target, 0);\n    const logEntry = result.attackRoll.isCritical ? `ðŸ’¥ CRITICAL! ${result.attacker} critically hits ${result.target} for ${result.damage} damage!` : result.attackRoll.isHit ? `âš”ï¸ ${result.attacker} hits ${result.target} for ${result.damage} damage!` : `ðŸ›¡ï¸ ${result.attacker} misses ${result.target}!`;\n    addLog(logEntry);\n    if (result.attackRoll.isHit) {\n      const damagedTarget = applyDamage(target, result.damage);\n      let updatedCombat = updateCombatant(currentCombat, target.id || target.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has fallen!`);\n      onUpdate(updatedCombat);\n      const endCheck = checkCombatEnd(updatedCombat);\n      if (endCheck.ended) {\n        setTimeout(() => onEnd(endCheck), 1000);\n        return;\n      }\n    }\n    setTimeout(() => handleEndTurn(), 1500);\n  };\n\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  //  RENDER\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: 'fixed',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: '#120808',\n      border: '3px solid #d32f2f',\n      borderBottom: 'none',\n      padding: '20px',\n      maxHeight: '65vh',\n      overflowY: 'auto',\n      zIndex: 1000,\n      boxShadow: '0 -4px 20px rgba(211,47,47,0.4)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        marginBottom: '15px',\n        paddingBottom: '15px',\n        borderBottom: '2px solid #2a2a2a'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        style: {\n          margin: 0,\n          color: '#d32f2f',\n          fontSize: '24px'\n        },\n        children: [\"\\u2694\\uFE0F Combat \\u2014 Round \", combat.round]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 544,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onEnd({\n          ended: true,\n          result: 'flee',\n          message: 'Combat ended'\n        }),\n        style: {\n          padding: '8px 16px',\n          backgroundColor: '#333',\n          color: '#aaa',\n          border: '1px solid #555',\n          borderRadius: '5px',\n          cursor: 'pointer'\n        },\n        children: \"End Combat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 547,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '10px',\n        marginBottom: '15px',\n        overflowX: 'auto',\n        paddingBottom: '10px'\n      },\n      children: combat.combatants.map((combatant, index) => {\n        var _combatant$conditions;\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            minWidth: '120px',\n            padding: '10px',\n            backgroundColor: index === combat.currentTurn ? '#2a0000' : '#1a1a1a',\n            border: index === combat.currentTurn ? '2px solid #ffd700' : '2px solid #333',\n            borderRadius: '8px',\n            opacity: combatant.isDead ? 0.3 : 1,\n            position: 'relative',\n            flexShrink: 0\n          },\n          children: [index === combat.currentTurn && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              top: '-18px',\n              left: '50%',\n              transform: 'translateX(-50%)',\n              fontSize: '18px'\n            },\n            children: \"\\u2B07\\uFE0F\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 572,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '11px',\n              color: combatant.isEnemy ? '#ff6b6b' : '#4CAF50',\n              marginBottom: '4px'\n            },\n            children: [combatant.isEnemy ? 'ðŸ‘¹' : 'ðŸ›¡ï¸', \" Init: \", combatant.initiative]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 574,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 'bold',\n              fontSize: '13px',\n              marginBottom: '4px',\n              whiteSpace: 'nowrap',\n              overflow: 'hidden',\n              textOverflow: 'ellipsis'\n            },\n            children: combatant.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 577,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '11px',\n              color: '#888'\n            },\n            children: [combatant.hp, \"/\", combatant.maxHp, \" HP\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 580,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              width: '100%',\n              height: '5px',\n              backgroundColor: '#0a0a0a',\n              borderRadius: '3px',\n              marginTop: '5px',\n              overflow: 'hidden'\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                width: `${Math.max(0, combatant.hp / combatant.maxHp * 100)}%`,\n                height: '100%',\n                backgroundColor: combatant.hp > combatant.maxHp * 0.5 ? '#4CAF50' : combatant.hp > combatant.maxHp * 0.25 ? '#ff9800' : '#f44336',\n                transition: 'width 0.3s'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this), ((_combatant$conditions = combatant.conditions) === null || _combatant$conditions === void 0 ? void 0 : _combatant$conditions.length) > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              marginTop: '5px',\n              fontSize: '12px',\n              display: 'flex',\n              gap: '2px',\n              flexWrap: 'wrap'\n            },\n            children: [combatant.conditions.slice(0, 3).map(c => /*#__PURE__*/_jsxDEV(\"span\", {\n              title: c.name,\n              children: c.icon\n            }, c.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 595,\n              columnNumber: 19\n            }, this)), combatant.conditions.length > 3 && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#888'\n              },\n              children: [\"+\", combatant.conditions.length - 3]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 597,\n              columnNumber: 53\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 593,\n            columnNumber: 15\n          }, this), combatant.isDead && /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'absolute',\n              inset: 0,\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              fontSize: '36px',\n              backgroundColor: 'rgba(0,0,0,0.5)',\n              borderRadius: '8px'\n            },\n            children: \"\\uD83D\\uDC80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this)]\n        }, combatant.id || combatant.name, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 556,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#0a0a0a',\n        padding: '10px',\n        borderRadius: '8px',\n        marginBottom: '15px',\n        maxHeight: '100px',\n        overflowY: 'auto',\n        border: '1px solid #222'\n      },\n      children: combatLog.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#444',\n          fontStyle: 'italic',\n          fontSize: '13px'\n        },\n        children: \"Combat begins\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 610,\n        columnNumber: 13\n      }, this) : combatLog.map((log, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          padding: '3px 5px',\n          color: i === 0 ? '#eee' : '#777',\n          fontSize: '13px',\n          borderBottom: i < combatLog.length - 1 ? '1px solid #111' : 'none'\n        },\n        children: log\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 612,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        backgroundColor: '#1a1a1a',\n        padding: '15px',\n        borderRadius: '8px',\n        border: '2px solid #333'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          margin: '0 0 12px 0',\n          color: '#ffd700',\n          fontSize: '16px'\n        },\n        children: [currentCombatant === null || currentCombatant === void 0 ? void 0 : currentCombatant.name, \"'s Turn\", isPlayerTurn && isSpellcaster && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: '10px',\n            fontSize: '12px',\n            color: '#CE93D8'\n          },\n          children: \"\\u2728 Spellcaster\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 624,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 621,\n        columnNumber: 9\n      }, this), isPlayerTurn && !(currentCombatant !== null && currentCombatant !== void 0 && currentCombatant.isDead) && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginBottom: '12px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              fontSize: '12px',\n              color: '#888',\n              marginBottom: '6px',\n              textTransform: 'uppercase',\n              letterSpacing: '0.5px'\n            },\n            children: \"Select Target\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 632,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              gap: '8px',\n              flexWrap: 'wrap'\n            },\n            children: [combat.combatants.filter(c => c.isEnemy && !c.isDead).map(enemy => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setSelectedTarget(enemy),\n              style: {\n                padding: '8px 14px',\n                backgroundColor: (selectedTarget === null || selectedTarget === void 0 ? void 0 : selectedTarget.name) === enemy.name ? '#3a0000' : '#2a1010',\n                color: (selectedTarget === null || selectedTarget === void 0 ? void 0 : selectedTarget.name) === enemy.name ? '#ff6b6b' : '#ccc',\n                border: `2px solid ${(selectedTarget === null || selectedTarget === void 0 ? void 0 : selectedTarget.name) === enemy.name ? '#d32f2f' : '#333'}`,\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '13px',\n                transition: 'all 0.15s'\n              },\n              children: [\"\\uD83D\\uDC79 \", enemy.name, /*#__PURE__*/_jsxDEV(\"span\", {\n                style: {\n                  color: '#666',\n                  marginLeft: '6px',\n                  fontSize: '11px'\n                },\n                children: [enemy.hp, \"/\", enemy.maxHp, \" HP\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 652,\n                columnNumber: 21\n              }, this)]\n            }, enemy.id || enemy.name, true, {\n              fileName: _jsxFileName,\n              lineNumber: 637,\n              columnNumber: 19\n            }, this)), combat.combatants.filter(c => c.isEnemy && !c.isDead).length === 0 && /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: '#888',\n                fontStyle: 'italic',\n                fontSize: '13px'\n              },\n              children: \"No living enemies\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 658,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 631,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: 'flex',\n            gap: '10px',\n            flexWrap: 'wrap',\n            marginBottom: '10px',\n            alignItems: 'flex-start'\n          },\n          children: [(_currentCombatant$att = currentCombatant.attacks) === null || _currentCombatant$att === void 0 ? void 0 : _currentCombatant$att.map((attack, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleAttack(index),\n            disabled: !selectedTarget,\n            style: {\n              padding: '10px 18px',\n              backgroundColor: selectedTarget ? '#1a3a1a' : '#1a1a1a',\n              color: selectedTarget ? '#4CAF50' : '#555',\n              border: `2px solid ${selectedTarget ? '#4CAF50' : '#333'}`,\n              borderRadius: '8px',\n              cursor: selectedTarget ? 'pointer' : 'not-allowed',\n              fontSize: '14px',\n              fontWeight: 'bold',\n              transition: 'all 0.15s'\n            },\n            children: [\"\\u2694\\uFE0F \", attack.name, /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                display: 'block',\n                fontSize: '10px',\n                color: selectedTarget ? '#81C784' : '#444',\n                fontWeight: 'normal'\n              },\n              children: [\"+\", attack.bonus, \" to hit \\u2022 \", attack.damage]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 684,\n              columnNumber: 19\n            }, this)]\n          }, index, true, {\n            fileName: _jsxFileName,\n            lineNumber: 667,\n            columnNumber: 17\n          }, this)), isSpellcaster && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowSpellPanel(p => !p),\n            style: {\n              padding: '10px 18px',\n              backgroundColor: showSpellPanel ? '#2a0a3a' : '#1a0a2a',\n              color: showSpellPanel ? '#CE93D8' : '#9C27B0',\n              border: `2px solid ${showSpellPanel ? '#CE93D8' : '#6A1B9A'}`,\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              fontWeight: 'bold',\n              transition: 'all 0.15s'\n            },\n            children: [\"\\u2728 Cast Spell\", /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                display: 'block',\n                fontSize: '10px',\n                color: '#888',\n                fontWeight: 'normal'\n              },\n              children: [combatSpells.length, \" available\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 707,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleEndTurn,\n            style: {\n              padding: '10px 18px',\n              backgroundColor: '#1a1a1a',\n              color: '#888',\n              border: '2px solid #333',\n              borderRadius: '8px',\n              cursor: 'pointer',\n              fontSize: '14px',\n              marginLeft: 'auto',\n              transition: 'all 0.15s'\n            },\n            children: \"End Turn \\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 13\n        }, this), showSpellPanel && isSpellcaster && /*#__PURE__*/_jsxDEV(SpellCastPanel, {\n          caster: partyCharacter,\n          combatSpells: combatSpells,\n          selectedTarget: selectedTarget,\n          onSpellResult: handleSpellResult,\n          onClose: () => setShowSpellPanel(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 734,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 629,\n        columnNumber: 11\n      }, this), !isPlayerTurn && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#ff6b6b',\n          fontStyle: 'italic',\n          fontSize: '14px'\n        },\n        children: \"\\u2694\\uFE0F Enemy is acting\\u2026\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 746,\n        columnNumber: 11\n      }, this), (currentCombatant === null || currentCombatant === void 0 ? void 0 : currentCombatant.isDead) && /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          margin: 0,\n          color: '#555',\n          fontSize: '14px'\n        },\n        children: \"This combatant has been defeated. Advance the turn.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 752,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 620,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 528,\n    columnNumber: 5\n  }, this);\n}\n_s2(CombatTracker, \"rH3G6Vn15+yPvr8yNjlmhkYCTaA=\");\n_c2 = CombatTracker;\nvar _c, _c2;\n$RefreshReg$(_c, \"SpellCastPanel\");\n$RefreshReg$(_c2, \"CombatTracker\");","map":{"version":3,"names":["useState","executeAttack","nextTurn","checkCombatEnd","getCurrentCombatant","updateCombatant","applyDamage","SPELL_DATABASE","getSpellSlots","canCastSpell","castSpell","getSpellAttackBonus","getSpellSaveDC","calculateSpellDamage","rollSpellDamage","SPELLCASTING_CLASSES","createStatusEffect","applyStatusEffect","STATUS_EFFECTS","DURATION_TYPES","jsxDEV","_jsxDEV","rollD20","Math","floor","random","SPELL_STATUS_EFFECTS","hold_person","type","PARALYZED","duration","durationType","SAVE_ENDS","saveDC","sleep","UNCONSCIOUS","MINUTES","haste","HASTED","ROUNDS","invisibility","INVISIBLE","greater_invisibility","spellLevelColor","level","c","getCombatSpells","character","_character$spells","_character$spells2","_character$spells3","cantrips","spells","map","k","key","filter","s","name","prepared","known","all","forEach","find","a","push","damage","healing","includes","SpellCastPanel","caster","combatSpells","selectedTarget","onSpellResult","onClose","_s","_caster$spellSlots","selectedSpell","setSelectedSpell","upcastLevel","setUpcastLevel","castResult","setCastResult","currentSlots","spellSlots","current","spellAttack","spellSaveDC","handleCast","spell","slotLevel","castOutcome","success","alert","message","updatedCaster","result","spellName","casterName","targetName","hit","critical","statusApplied","log","dmgStr","rolled","total","saveRoll","targetSave","dex","saved","targetDex","damageType","d20","crit","ac","armorClass","replace","_","n","parseInt","scAbil","Cleric","Druid","Paladin","Bard","Ranger","abilKey","class","mod","abilities","_effectDef$saveDC","effectDef","dc","style","backgroundColor","border","borderRadius","padding","marginTop","children","display","justifyContent","alignItems","marginBottom","margin","color","fileName","_jsxFileName","lineNumber","columnNumber","onClick","background","cursor","fontSize","gap","flexWrap","max","i","cur","gridTemplateColumns","maxHeight","overflowY","length","fontStyle","gridColumn","hasSlotsOrCantrip","isSelected","disabled","opacity","textAlign","transition","fontWeight","concentration","marginLeft","castingTime","range","description","upcastBonus","Array","from","lvl","slotsLeft","width","_c","CombatTracker","combat","onUpdate","onEnd","party","updateParty","_s2","_currentCombatant$att","setSelectedTarget","combatLog","setCombatLog","showSpellPanel","setShowSpellPanel","isActive","currentCombatant","isPlayerTurn","isEnemy","partyCharacter","p","isSpellcaster","addLog","entry","prevLog","handleAttack","attackIndex","logEntry","attackRoll","isCritical","attacker","target","attack","isFumble","isHit","newLog","damagedTarget","updatedCombat","id","isDead","endCheck","ended","setTimeout","handleEndTurn","handleSpellResult","currentCombatState","updatedParty","healedCaster","hp","min","maxHp","effect","source","partyTarget","withEffect","newCombat","_newCombat$combatants","combatants","currentTurn","handleEnemyTurn","currentCombat","enemy","aliveParty","position","bottom","left","right","borderBottom","zIndex","boxShadow","paddingBottom","round","overflowX","combatant","index","_combatant$conditions","minWidth","flexShrink","top","transform","initiative","whiteSpace","overflow","textOverflow","height","conditions","slice","title","icon","inset","textTransform","letterSpacing","attacks","bonus","_c2","$RefreshReg$"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/components/CombatTracker.jsx"],"sourcesContent":["// frontend/src/components/CombatTracker.jsx - WITH SPELL DAMAGE IN COMBAT\nimport { useState } from 'react';\nimport { \n  executeAttack, \n  nextTurn, \n  checkCombatEnd,\n  getCurrentCombatant,\n  updateCombatant,\n  applyDamage\n} from '../utils/combatSystem';\nimport {\n  SPELL_DATABASE,\n  getSpellSlots,\n  canCastSpell,\n  castSpell,\n  getSpellAttackBonus,\n  getSpellSaveDC,\n  calculateSpellDamage,\n  rollSpellDamage,\n  SPELLCASTING_CLASSES\n} from '../utils/spellSystem';\nimport {\n  createStatusEffect,\n  applyStatusEffect,\n  STATUS_EFFECTS,\n  DURATION_TYPES\n} from '../utils/statusEffectSystem';\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  HELPERS\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n\nfunction rollD20() {\n  return Math.floor(Math.random() * 20) + 1;\n}\n\n/** Map spell types that apply status effects */\nconst SPELL_STATUS_EFFECTS = {\n  hold_person: { type: STATUS_EFFECTS.PARALYZED, duration: 10, durationType: DURATION_TYPES.SAVE_ENDS, saveDC: null },\n  sleep:       { type: STATUS_EFFECTS.UNCONSCIOUS, duration: 1, durationType: DURATION_TYPES.MINUTES },\n  haste:       { type: STATUS_EFFECTS.HASTED, duration: 10, durationType: DURATION_TYPES.ROUNDS },\n  invisibility: { type: STATUS_EFFECTS.INVISIBLE, duration: 60, durationType: DURATION_TYPES.MINUTES },\n  greater_invisibility: { type: STATUS_EFFECTS.INVISIBLE, duration: 10, durationType: DURATION_TYPES.ROUNDS },\n};\n\n/** Colour band per spell level */\nfunction spellLevelColor(level) {\n  const c = ['#4CAF50','#2196F3','#03A9F4','#00BCD4','#009688','#8BC34A','#CDDC39','#FFEB3B','#FFC107','#FF9800'];\n  return c[level] || '#888';\n}\n\n/** Get accessible spells for combat (cantrips + prepared/known) */\nfunction getCombatSpells(character) {\n  const cantrips  = (character.spells?.cantrips  || []).map(k => ({ key: k, ...SPELL_DATABASE[k] })).filter(s => s.name);\n  const prepared  = (character.spells?.prepared  || []).map(k => ({ key: k, ...SPELL_DATABASE[k] })).filter(s => s.name);\n  const known     = (character.spells?.known     || []).map(k => ({ key: k, ...SPELL_DATABASE[k] })).filter(s => s.name);\n\n  // Merge, deduplicate by key\n  const all = [...cantrips];\n  [...prepared, ...known].forEach(s => {\n    if (!all.find(a => a.key === s.key)) all.push(s);\n  });\n\n  // Only spells useful in combat: damage, healing, or known status spells\n  return all.filter(s =>\n    s.damage || s.healing || SPELL_STATUS_EFFECTS[s.key] ||\n    ['shield','misty_step','counterspell','fly','haste','hold_person','sleep','invisibility','greater_invisibility','spiritual_weapon'].includes(s.key)\n  );\n}\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  SPELL CAST PANEL (sub-component)\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nfunction SpellCastPanel({ caster, combatSpells, selectedTarget, onSpellResult, onClose }) {\n  const [selectedSpell, setSelectedSpell]     = useState(null);\n  const [upcastLevel,   setUpcastLevel]       = useState(null);\n  const [castResult,    setCastResult]        = useState(null);\n\n  const currentSlots = caster.spellSlots?.current || getSpellSlots(caster);\n  const spellAttack  = getSpellAttackBonus(caster);\n  const spellSaveDC  = getSpellSaveDC(caster);\n\n  const handleCast = () => {\n    if (!selectedSpell) return;\n    const spell = selectedSpell;\n    const slotLevel = upcastLevel ?? (spell.level || 0);\n\n    // 1. Consume spell slot (updates character object)\n    const castOutcome = castSpell(caster, spell, slotLevel > 0 ? slotLevel : null);\n    if (!castOutcome.success) {\n      alert(castOutcome.message);\n      return;\n    }\n    const updatedCaster = castOutcome.character;\n\n    // 2. Determine result\n    let result = {\n      spellName: spell.name,\n      casterName: caster.name,\n      targetName: selectedTarget?.name || 'ally',\n      slotLevel,\n      updatedCaster,\n      damage: 0,\n      healing: 0,\n      hit: null,\n      critical: false,\n      statusApplied: null,\n      log: ''\n    };\n\n    // â”€â”€ DAMAGE spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    if (spell.damage && selectedTarget) {\n      // Spell attack roll or auto-hit (magic missile)?\n      if (spell.key === 'magic_missile') {\n        // Magic missile auto-hits\n        const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n        const rolled = rollSpellDamage(dmgStr);\n        result.damage  = rolled.total;\n        result.hit     = true;\n        result.log     = `âœ¨ ${caster.name} fires Magic Missile at ${selectedTarget.name} for ${rolled.total} force damage! (auto-hit)`;\n      } else if (spell.key === 'sacred_flame') {\n        // Sacred flame â€” DEX save\n        const saveRoll = rollD20();\n        const targetSave = (selectedTarget.dex ? Math.floor((selectedTarget.dex - 10) / 2) : 0);\n        const saved = (saveRoll + targetSave) >= spellSaveDC;\n        if (!saved) {\n          const dmgStr = calculateSpellDamage(spell, caster.level) || spell.damage;\n          const rolled  = rollSpellDamage(dmgStr);\n          result.damage = rolled.total;\n          result.hit    = true;\n          result.log    = `ðŸ”¥ Sacred Flame hits ${selectedTarget.name} for ${rolled.total} radiant damage! (DEX save ${saveRoll} failed vs DC ${spellSaveDC})`;\n        } else {\n          result.hit  = false;\n          result.log  = `ðŸ”¥ ${selectedTarget.name} saves against Sacred Flame! (rolled ${saveRoll} vs DC ${spellSaveDC})`;\n        }\n      } else if (['fireball','lightning_bolt','thunderwave','burning_hands','ice_storm','cone_of_cold',\n                  'chain_lightning','disintegrate','finger_of_death','meteor_swarm'].includes(spell.key)) {\n        // Saving throw spells\n        const saveRoll = rollD20();\n        const targetDex = selectedTarget.dex ? Math.floor((selectedTarget.dex - 10) / 2) : 0;\n        const saved = (saveRoll + targetDex) >= spellSaveDC;\n        const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n        const rolled  = rollSpellDamage(dmgStr);\n        result.damage = saved ? Math.floor(rolled.total / 2) : rolled.total;\n        result.hit    = true;\n        result.log    = saved\n          ? `ðŸ’¥ ${caster.name} casts ${spell.name}! ${selectedTarget.name} saves (${saveRoll} vs DC ${spellSaveDC}) â€” takes ${result.damage} ${spell.damageType} damage (half).`\n          : `ðŸ’¥ ${caster.name} casts ${spell.name}! ${selectedTarget.name} fails save (${saveRoll} vs DC ${spellSaveDC}) â€” takes ${result.damage} ${spell.damageType} damage!`;\n      } else {\n        // Standard spell attack roll\n        const d20 = rollD20();\n        const total = d20 + spellAttack;\n        const crit  = d20 === 20;\n        const hit   = crit || total >= (selectedTarget.ac || selectedTarget.armorClass || 12);\n        if (hit) {\n          const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.damage;\n          const rolled  = rollSpellDamage(crit ? dmgStr.replace(/(\\d+)d/, (_, n) => `${parseInt(n)*2}d`) : dmgStr);\n          result.damage   = rolled.total;\n          result.hit      = true;\n          result.critical = crit;\n          result.log      = crit\n            ? `ðŸ’¥ CRITICAL! ${caster.name}'s ${spell.name} hits ${selectedTarget.name} for ${rolled.total} ${spell.damageType} damage!`\n            : `âœ¨ ${caster.name}'s ${spell.name} hits ${selectedTarget.name} for ${rolled.total} ${spell.damageType} damage! (rolled ${total} vs AC ${selectedTarget.ac || selectedTarget.armorClass || '?'})`;\n        } else {\n          result.hit = false;\n          result.log = `âŒ ${caster.name}'s ${spell.name} misses ${selectedTarget.name}! (rolled ${total} vs AC ${selectedTarget.ac || selectedTarget.armorClass || '?'})`;\n        }\n      }\n    }\n\n    // â”€â”€ HEALING spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    else if (spell.healing) {\n      // Target should be an ally for healing â€” we just heal the caster for now if no ally target\n      const dmgStr = calculateSpellDamage(spell, caster.level, slotLevel > 0 ? slotLevel : null) || spell.healing;\n      const rolled  = rollSpellDamage(dmgStr);\n      // Add spellcasting modifier to healing\n      const scAbil = { Cleric:'WIS', Druid:'WIS', Paladin:'CHA', Bard:'CHA', Ranger:'WIS' };\n      const abilKey = scAbil[caster.class] || 'INT';\n      const mod     = caster.abilities ? Math.floor((caster.abilities[abilKey] - 10) / 2) : 0;\n      result.healing = rolled.total + mod;\n      result.log     = `ðŸ’š ${caster.name} casts ${spell.name} and heals for ${result.healing} HP!`;\n    }\n\n    // â”€â”€ STATUS EFFECT spells â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n    else if (SPELL_STATUS_EFFECTS[spell.key]) {\n      const effectDef = SPELL_STATUS_EFFECTS[spell.key];\n      const dc = effectDef.saveDC ?? spellSaveDC;\n      result.statusApplied = { ...effectDef, saveDC: dc, spellName: spell.name };\n      result.log = `ðŸŒ€ ${caster.name} casts ${spell.name}${selectedTarget ? ` on ${selectedTarget.name}` : ''}!`;\n    }\n\n    // â”€â”€ UTILITY spells (shield, misty step, etc.) â”€â”€\n    else {\n      result.log = `âœ¨ ${caster.name} casts ${spell.name}!`;\n    }\n\n    setCastResult(result);\n    onSpellResult(result);\n  };\n\n  return (\n    <div style={{\n      backgroundColor: '#12012a',\n      border: '2px solid #9C27B0',\n      borderRadius: '10px',\n      padding: '15px',\n      marginTop: '10px'\n    }}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '12px' }}>\n        <h4 style={{ margin: 0, color: '#CE93D8' }}>âœ¨ Cast a Spell</h4>\n        <button onClick={onClose} style={{ background: 'none', border: 'none', color: '#888', cursor: 'pointer', fontSize: '18px' }}>âœ•</button>\n      </div>\n\n      <div style={{ fontSize: '12px', color: '#888', marginBottom: '10px' }}>\n        Spell Attack: <span style={{ color: '#CE93D8' }}>+{spellAttack}</span> &nbsp;|&nbsp;\n        Save DC: <span style={{ color: '#CE93D8' }}>{spellSaveDC}</span>\n      </div>\n\n      {/* Spell slot display */}\n      <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap', marginBottom: '12px' }}>\n        {getSpellSlots(caster).map((max, i) => {\n          if (max === 0) return null;\n          const cur = currentSlots[i] || 0;\n          return (\n            <div key={i} style={{\n              padding: '4px 8px',\n              backgroundColor: cur > 0 ? '#1a0a2e' : '#1a1a1a',\n              border: `1px solid ${cur > 0 ? spellLevelColor(i+1) : '#333'}`,\n              borderRadius: '4px',\n              fontSize: '11px',\n              color: cur > 0 ? spellLevelColor(i+1) : '#555'\n            }}>\n              L{i+1}: {cur}/{max}\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Spell grid */}\n      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(160px, 1fr))', gap: '8px', marginBottom: '12px', maxHeight: '200px', overflowY: 'auto' }}>\n        {combatSpells.length === 0 && (\n          <div style={{ color: '#666', fontStyle: 'italic', padding: '10px', gridColumn: '1/-1' }}>\n            No combat spells available. Open SpellBook to learn spells.\n          </div>\n        )}\n        {combatSpells.map(spell => {\n          const hasSlotsOrCantrip = spell.level === 0 || (currentSlots[spell.level - 1] || 0) > 0;\n          const isSelected = selectedSpell?.key === spell.key;\n          return (\n            <button\n              key={spell.key}\n              onClick={() => { setSelectedSpell(spell); setUpcastLevel(spell.level); setCastResult(null); }}\n              disabled={!hasSlotsOrCantrip}\n              style={{\n                padding: '8px 10px',\n                backgroundColor: isSelected ? '#3a0a5a' : '#1a0a2e',\n                border: `2px solid ${isSelected ? '#CE93D8' : hasSlotsOrCantrip ? spellLevelColor(spell.level) : '#333'}`,\n                borderRadius: '6px',\n                cursor: hasSlotsOrCantrip ? 'pointer' : 'not-allowed',\n                opacity: hasSlotsOrCantrip ? 1 : 0.4,\n                textAlign: 'left',\n                transition: 'all 0.15s'\n              }}\n            >\n              <div style={{ fontSize: '13px', fontWeight: 'bold', color: spellLevelColor(spell.level), marginBottom: '3px' }}>\n                {spell.name}\n              </div>\n              <div style={{ fontSize: '10px', color: '#888' }}>\n                {spell.level === 0 ? 'Cantrip' : `Lvl ${spell.level}`}\n                {spell.damage && ` â€¢ ${spell.damage} ${spell.damageType}`}\n                {spell.healing && ` â€¢ Heals ${spell.healing}`}\n                {spell.concentration && ' â€¢ Conc.'}\n              </div>\n            </button>\n          );\n        })}\n      </div>\n\n      {/* Selected spell details + upcast + cast button */}\n      {selectedSpell && (\n        <div style={{\n          backgroundColor: '#0a0018',\n          borderRadius: '8px',\n          padding: '12px',\n          border: `1px solid ${spellLevelColor(selectedSpell.level)}`\n        }}>\n          <div style={{ marginBottom: '8px' }}>\n            <span style={{ fontWeight: 'bold', color: spellLevelColor(selectedSpell.level) }}>{selectedSpell.name}</span>\n            <span style={{ color: '#888', fontSize: '12px', marginLeft: '10px' }}>{selectedSpell.castingTime} â€¢ {selectedSpell.range}</span>\n          </div>\n          <div style={{ fontSize: '13px', color: '#ccc', marginBottom: '10px' }}>{selectedSpell.description}</div>\n\n          {/* Upcast selector */}\n          {selectedSpell.level > 0 && selectedSpell.upcastBonus && (\n            <div style={{ marginBottom: '10px' }}>\n              <div style={{ fontSize: '11px', color: '#888', marginBottom: '6px' }}>Cast at level:</div>\n              <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>\n                {Array.from({ length: 10 - selectedSpell.level }, (_, i) => selectedSpell.level + i).map(lvl => {\n                  const slotsLeft = currentSlots[lvl - 1] || 0;\n                  if (getSpellSlots(caster)[lvl - 1] === 0) return null;\n                  return (\n                    <button\n                      key={lvl}\n                      onClick={() => setUpcastLevel(lvl)}\n                      disabled={slotsLeft === 0}\n                      style={{\n                        padding: '4px 10px',\n                        backgroundColor: upcastLevel === lvl ? spellLevelColor(lvl) : '#1a0a2e',\n                        color: upcastLevel === lvl ? '#000' : slotsLeft > 0 ? '#eee' : '#555',\n                        border: 'none',\n                        borderRadius: '4px',\n                        cursor: slotsLeft > 0 ? 'pointer' : 'not-allowed',\n                        fontSize: '12px',\n                        opacity: slotsLeft > 0 ? 1 : 0.4\n                      }}\n                    >\n                      L{lvl} ({slotsLeft})\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n          )}\n\n          {!selectedTarget && selectedSpell.damage && (\n            <div style={{ color: '#ff9800', fontSize: '12px', marginBottom: '8px' }}>\n              âš ï¸ Select a target enemy above before casting this spell\n            </div>\n          )}\n\n          <button\n            onClick={handleCast}\n            disabled={!!(selectedSpell.damage && !selectedTarget)}\n            style={{\n              width: '100%',\n              padding: '10px',\n              backgroundColor: (selectedSpell.damage && !selectedTarget) ? '#333' : '#7B1FA2',\n              color: 'white',\n              border: 'none',\n              borderRadius: '6px',\n              cursor: (selectedSpell.damage && !selectedTarget) ? 'not-allowed' : 'pointer',\n              fontWeight: 'bold',\n              fontSize: '15px',\n              transition: 'background 0.2s'\n            }}\n          >\n            âœ¨ Cast {selectedSpell.name}{upcastLevel && upcastLevel > selectedSpell.level ? ` (Lvl ${upcastLevel})` : ''}\n          </button>\n        </div>\n      )}\n\n      {/* Cast result */}\n      {castResult && (\n        <div style={{\n          marginTop: '10px',\n          padding: '10px',\n          backgroundColor: castResult.hit === false ? '#1a0a0a' : '#0a1a0a',\n          borderRadius: '6px',\n          border: `1px solid ${castResult.hit === false ? '#f44336' : '#4CAF50'}`,\n          fontSize: '13px',\n          color: '#eee'\n        }}>\n          {castResult.log}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n//  MAIN COMBAT TRACKER\n// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\nexport default function CombatTracker({ combat, onUpdate, onEnd, party = [], updateParty }) {\n  const [selectedTarget, setSelectedTarget]   = useState(null);\n  const [combatLog,      setCombatLog]        = useState([]);\n  const [showSpellPanel, setShowSpellPanel]   = useState(false);\n\n  if (!combat || !combat.isActive) return null;\n\n  const currentCombatant = getCurrentCombatant(combat);\n  const isPlayerTurn     = !currentCombatant?.isEnemy;\n\n  // Find the full party character for the current combatant (so we have spell data)\n  const partyCharacter = party.find(p => p.name === currentCombatant?.name) || currentCombatant;\n  const isSpellcaster  = SPELLCASTING_CLASSES[partyCharacter?.class];\n  const combatSpells   = isSpellcaster ? getCombatSpells(partyCharacter) : [];\n\n  const addLog = (entry, prevLog = combatLog) => {\n    setCombatLog([entry, ...prevLog]);\n    return [entry, ...prevLog];\n  };\n\n  // â”€â”€ ATTACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleAttack = (attackIndex = 0) => {\n    if (!selectedTarget) { alert('Select a target first!'); return; }\n\n    const result = executeAttack(currentCombatant, selectedTarget, attackIndex);\n    const logEntry = result.attackRoll.isCritical\n      ? `ðŸ’¥ CRITICAL HIT! ${result.attacker} hits ${result.target} with ${result.attack} for ${result.damage} ${result.damageType} damage!`\n      : result.attackRoll.isFumble\n      ? `âŒ FUMBLE! ${result.attacker} misses ${result.target}!`\n      : result.attackRoll.isHit\n      ? `âš”ï¸ ${result.attacker} hits ${result.target} with ${result.attack} for ${result.damage} ${result.damageType} damage!`\n      : `ðŸ›¡ï¸ ${result.attacker} misses ${result.target}!`;\n\n    const newLog = addLog(logEntry);\n\n    if (result.attackRoll.isHit) {\n      const damagedTarget  = applyDamage(selectedTarget, result.damage);\n      const updatedCombat  = updateCombatant(combat, selectedTarget.id || selectedTarget.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has been defeated!`, newLog);\n      onUpdate(updatedCombat);\n      const endCheck = checkCombatEnd(updatedCombat);\n      if (endCheck.ended) { setTimeout(() => onEnd(endCheck), 1000); return; }\n    }\n    handleEndTurn();\n  };\n\n  // â”€â”€ SPELL RESULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleSpellResult = (result) => {\n    setShowSpellPanel(false);\n    addLog(result.log);\n\n    let currentCombatState = { ...combat };\n\n    // 1. Update caster's spell slots in the party store\n    if (updateParty && result.updatedCaster) {\n      const updatedParty = party.map(p =>\n        p.name === result.updatedCaster.name ? result.updatedCaster : p\n      );\n      updateParty(updatedParty);\n    }\n\n    // 2. Apply damage to target\n    if (result.damage > 0 && result.hit && selectedTarget) {\n      const damagedTarget = applyDamage(selectedTarget, result.damage, result.damageType);\n      currentCombatState  = updateCombatant(currentCombatState, selectedTarget.id || selectedTarget.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has been defeated!`);\n      onUpdate(currentCombatState);\n      const endCheck = checkCombatEnd(currentCombatState);\n      if (endCheck.ended) { setTimeout(() => onEnd(endCheck), 1000); return; }\n    }\n\n    // 3. Apply healing (to caster for now â€” could be extended to target selection)\n    if (result.healing > 0 && updateParty) {\n      const healedCaster = {\n        ...result.updatedCaster,\n        hp: Math.min(result.updatedCaster.maxHp, (result.updatedCaster.hp || 0) + result.healing)\n      };\n      const updatedParty = party.map(p => p.name === healedCaster.name ? healedCaster : p);\n      updateParty(updatedParty);\n    }\n\n    // 4. Apply status effect to target\n    if (result.statusApplied && selectedTarget && updateParty) {\n      const effect = createStatusEffect({\n        type: result.statusApplied.type,\n        duration: result.statusApplied.duration || 1,\n        durationType: result.statusApplied.durationType || DURATION_TYPES.ROUNDS,\n        saveDC: result.statusApplied.saveDC,\n        spellName: result.statusApplied.spellName,\n        source: result.casterName\n      });\n      if (effect) {\n        // If target is a party member, apply via updateParty\n        const partyTarget = party.find(p => p.name === selectedTarget.name);\n        if (partyTarget && updateParty) {\n          const withEffect  = applyStatusEffect(partyTarget, effect);\n          const updatedParty = party.map(p => p.name === withEffect.name ? withEffect : p);\n          updateParty(updatedParty);\n          addLog(`ðŸŒ€ ${selectedTarget.name} is now ${effect.name}!`);\n        }\n      }\n    }\n\n    handleEndTurn();\n  };\n\n  // â”€â”€ END TURN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleEndTurn = () => {\n    setSelectedTarget(null);\n    setShowSpellPanel(false);\n    const newCombat = nextTurn(combat);\n    onUpdate(newCombat);\n\n    setTimeout(() => {\n      if (newCombat.combatants[newCombat.currentTurn]?.isEnemy) {\n        handleEnemyTurn(newCombat);\n      }\n    }, 500);\n  };\n\n  // â”€â”€ ENEMY TURN â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  const handleEnemyTurn = (currentCombat) => {\n    const enemy = getCurrentCombatant(currentCombat);\n    if (!enemy || enemy.isDead) { handleEndTurn(); return; }\n\n    const aliveParty = currentCombat.combatants.filter(c => !c.isEnemy && !c.isDead);\n    if (aliveParty.length === 0) return;\n\n    const target  = aliveParty[Math.floor(Math.random() * aliveParty.length)];\n    const result  = executeAttack(enemy, target, 0);\n\n    const logEntry = result.attackRoll.isCritical\n      ? `ðŸ’¥ CRITICAL! ${result.attacker} critically hits ${result.target} for ${result.damage} damage!`\n      : result.attackRoll.isHit\n      ? `âš”ï¸ ${result.attacker} hits ${result.target} for ${result.damage} damage!`\n      : `ðŸ›¡ï¸ ${result.attacker} misses ${result.target}!`;\n\n    addLog(logEntry);\n\n    if (result.attackRoll.isHit) {\n      const damagedTarget = applyDamage(target, result.damage);\n      let updatedCombat   = updateCombatant(currentCombat, target.id || target.name, damagedTarget);\n      if (damagedTarget.isDead) addLog(`ðŸ’€ ${damagedTarget.name} has fallen!`);\n      onUpdate(updatedCombat);\n      const endCheck = checkCombatEnd(updatedCombat);\n      if (endCheck.ended) { setTimeout(() => onEnd(endCheck), 1000); return; }\n    }\n\n    setTimeout(() => handleEndTurn(), 1500);\n  };\n\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  //  RENDER\n  // â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\n  return (\n    <div style={{\n      position: 'fixed',\n      bottom: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: '#120808',\n      border: '3px solid #d32f2f',\n      borderBottom: 'none',\n      padding: '20px',\n      maxHeight: '65vh',\n      overflowY: 'auto',\n      zIndex: 1000,\n      boxShadow: '0 -4px 20px rgba(211,47,47,0.4)'\n    }}>\n      {/* Header row */}\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '15px', paddingBottom: '15px', borderBottom: '2px solid #2a2a2a' }}>\n        <h2 style={{ margin: 0, color: '#d32f2f', fontSize: '24px' }}>\n          âš”ï¸ Combat â€” Round {combat.round}\n        </h2>\n        <button\n          onClick={() => onEnd({ ended: true, result: 'flee', message: 'Combat ended' })}\n          style={{ padding: '8px 16px', backgroundColor: '#333', color: '#aaa', border: '1px solid #555', borderRadius: '5px', cursor: 'pointer' }}\n        >\n          End Combat\n        </button>\n      </div>\n\n      {/* Initiative track */}\n      <div style={{ display: 'flex', gap: '10px', marginBottom: '15px', overflowX: 'auto', paddingBottom: '10px' }}>\n        {combat.combatants.map((combatant, index) => (\n          <div\n            key={combatant.id || combatant.name}\n            style={{\n              minWidth: '120px',\n              padding: '10px',\n              backgroundColor: index === combat.currentTurn ? '#2a0000' : '#1a1a1a',\n              border: index === combat.currentTurn ? '2px solid #ffd700' : '2px solid #333',\n              borderRadius: '8px',\n              opacity: combatant.isDead ? 0.3 : 1,\n              position: 'relative',\n              flexShrink: 0\n            }}\n          >\n            {index === combat.currentTurn && (\n              <div style={{ position: 'absolute', top: '-18px', left: '50%', transform: 'translateX(-50%)', fontSize: '18px' }}>â¬‡ï¸</div>\n            )}\n            <div style={{ fontSize: '11px', color: combatant.isEnemy ? '#ff6b6b' : '#4CAF50', marginBottom: '4px' }}>\n              {combatant.isEnemy ? 'ðŸ‘¹' : 'ðŸ›¡ï¸'} Init: {combatant.initiative}\n            </div>\n            <div style={{ fontWeight: 'bold', fontSize: '13px', marginBottom: '4px', whiteSpace: 'nowrap', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n              {combatant.name}\n            </div>\n            <div style={{ fontSize: '11px', color: '#888' }}>\n              {combatant.hp}/{combatant.maxHp} HP\n            </div>\n            <div style={{ width: '100%', height: '5px', backgroundColor: '#0a0a0a', borderRadius: '3px', marginTop: '5px', overflow: 'hidden' }}>\n              <div style={{\n                width: `${Math.max(0, (combatant.hp / combatant.maxHp) * 100)}%`,\n                height: '100%',\n                backgroundColor: combatant.hp > combatant.maxHp * 0.5 ? '#4CAF50' : combatant.hp > combatant.maxHp * 0.25 ? '#ff9800' : '#f44336',\n                transition: 'width 0.3s'\n              }} />\n            </div>\n            {/* Status effect icons */}\n            {(combatant.conditions?.length > 0) && (\n              <div style={{ marginTop: '5px', fontSize: '12px', display: 'flex', gap: '2px', flexWrap: 'wrap' }}>\n                {combatant.conditions.slice(0, 3).map(c => (\n                  <span key={c.id} title={c.name}>{c.icon}</span>\n                ))}\n                {combatant.conditions.length > 3 && <span style={{ color: '#888' }}>+{combatant.conditions.length - 3}</span>}\n              </div>\n            )}\n            {combatant.isDead && (\n              <div style={{ position: 'absolute', inset: 0, display: 'flex', alignItems: 'center', justifyContent: 'center', fontSize: '36px', backgroundColor: 'rgba(0,0,0,0.5)', borderRadius: '8px' }}>ðŸ’€</div>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Combat Log */}\n      <div style={{ backgroundColor: '#0a0a0a', padding: '10px', borderRadius: '8px', marginBottom: '15px', maxHeight: '100px', overflowY: 'auto', border: '1px solid #222' }}>\n        {combatLog.length === 0\n          ? <p style={{ margin: 0, color: '#444', fontStyle: 'italic', fontSize: '13px' }}>Combat beginsâ€¦</p>\n          : combatLog.map((log, i) => (\n            <div key={i} style={{ padding: '3px 5px', color: i === 0 ? '#eee' : '#777', fontSize: '13px', borderBottom: i < combatLog.length - 1 ? '1px solid #111' : 'none' }}>\n              {log}\n            </div>\n          ))\n        }\n      </div>\n\n      {/* Action Panel */}\n      <div style={{ backgroundColor: '#1a1a1a', padding: '15px', borderRadius: '8px', border: '2px solid #333' }}>\n        <h3 style={{ margin: '0 0 12px 0', color: '#ffd700', fontSize: '16px' }}>\n          {currentCombatant?.name}'s Turn\n          {isPlayerTurn && isSpellcaster && (\n            <span style={{ marginLeft: '10px', fontSize: '12px', color: '#CE93D8' }}>âœ¨ Spellcaster</span>\n          )}\n        </h3>\n\n        {isPlayerTurn && !currentCombatant?.isDead && (\n          <div>\n            {/* Target Selection */}\n            <div style={{ marginBottom: '12px' }}>\n              <div style={{ fontSize: '12px', color: '#888', marginBottom: '6px', textTransform: 'uppercase', letterSpacing: '0.5px' }}>\n                Select Target\n              </div>\n              <div style={{ display: 'flex', gap: '8px', flexWrap: 'wrap' }}>\n                {combat.combatants.filter(c => c.isEnemy && !c.isDead).map(enemy => (\n                  <button\n                    key={enemy.id || enemy.name}\n                    onClick={() => setSelectedTarget(enemy)}\n                    style={{\n                      padding: '8px 14px',\n                      backgroundColor: selectedTarget?.name === enemy.name ? '#3a0000' : '#2a1010',\n                      color: selectedTarget?.name === enemy.name ? '#ff6b6b' : '#ccc',\n                      border: `2px solid ${selectedTarget?.name === enemy.name ? '#d32f2f' : '#333'}`,\n                      borderRadius: '6px',\n                      cursor: 'pointer',\n                      fontSize: '13px',\n                      transition: 'all 0.15s'\n                    }}\n                  >\n                    ðŸ‘¹ {enemy.name}\n                    <span style={{ color: '#666', marginLeft: '6px', fontSize: '11px' }}>\n                      {enemy.hp}/{enemy.maxHp} HP\n                    </span>\n                  </button>\n                ))}\n                {combat.combatants.filter(c => c.isEnemy && !c.isDead).length === 0 && (\n                  <span style={{ color: '#888', fontStyle: 'italic', fontSize: '13px' }}>No living enemies</span>\n                )}\n              </div>\n            </div>\n\n            {/* Action Buttons Row */}\n            <div style={{ display: 'flex', gap: '10px', flexWrap: 'wrap', marginBottom: '10px', alignItems: 'flex-start' }}>\n              {/* Attack buttons */}\n              {currentCombatant.attacks?.map((attack, index) => (\n                <button\n                  key={index}\n                  onClick={() => handleAttack(index)}\n                  disabled={!selectedTarget}\n                  style={{\n                    padding: '10px 18px',\n                    backgroundColor: selectedTarget ? '#1a3a1a' : '#1a1a1a',\n                    color: selectedTarget ? '#4CAF50' : '#555',\n                    border: `2px solid ${selectedTarget ? '#4CAF50' : '#333'}`,\n                    borderRadius: '8px',\n                    cursor: selectedTarget ? 'pointer' : 'not-allowed',\n                    fontSize: '14px',\n                    fontWeight: 'bold',\n                    transition: 'all 0.15s'\n                  }}\n                >\n                  âš”ï¸ {attack.name}\n                  <span style={{ display: 'block', fontSize: '10px', color: selectedTarget ? '#81C784' : '#444', fontWeight: 'normal' }}>\n                    +{attack.bonus} to hit â€¢ {attack.damage}\n                  </span>\n                </button>\n              ))}\n\n              {/* Cast Spell button (only for spellcasters) */}\n              {isSpellcaster && (\n                <button\n                  onClick={() => setShowSpellPanel(p => !p)}\n                  style={{\n                    padding: '10px 18px',\n                    backgroundColor: showSpellPanel ? '#2a0a3a' : '#1a0a2a',\n                    color: showSpellPanel ? '#CE93D8' : '#9C27B0',\n                    border: `2px solid ${showSpellPanel ? '#CE93D8' : '#6A1B9A'}`,\n                    borderRadius: '8px',\n                    cursor: 'pointer',\n                    fontSize: '14px',\n                    fontWeight: 'bold',\n                    transition: 'all 0.15s'\n                  }}\n                >\n                  âœ¨ Cast Spell\n                  <span style={{ display: 'block', fontSize: '10px', color: '#888', fontWeight: 'normal' }}>\n                    {combatSpells.length} available\n                  </span>\n                </button>\n              )}\n\n              {/* End Turn */}\n              <button\n                onClick={handleEndTurn}\n                style={{\n                  padding: '10px 18px',\n                  backgroundColor: '#1a1a1a',\n                  color: '#888',\n                  border: '2px solid #333',\n                  borderRadius: '8px',\n                  cursor: 'pointer',\n                  fontSize: '14px',\n                  marginLeft: 'auto',\n                  transition: 'all 0.15s'\n                }}\n              >\n                End Turn â†’\n              </button>\n            </div>\n\n            {/* Spell Panel */}\n            {showSpellPanel && isSpellcaster && (\n              <SpellCastPanel\n                caster={partyCharacter}\n                combatSpells={combatSpells}\n                selectedTarget={selectedTarget}\n                onSpellResult={handleSpellResult}\n                onClose={() => setShowSpellPanel(false)}\n              />\n            )}\n          </div>\n        )}\n\n        {!isPlayerTurn && (\n          <p style={{ margin: 0, color: '#ff6b6b', fontStyle: 'italic', fontSize: '14px' }}>\n            âš”ï¸ Enemy is actingâ€¦\n          </p>\n        )}\n\n        {currentCombatant?.isDead && (\n          <p style={{ margin: 0, color: '#555', fontSize: '14px' }}>\n            This combatant has been defeated. Advance the turn.\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}