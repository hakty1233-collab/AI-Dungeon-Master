{"ast":null,"code":"// frontend/src/utils/combatSystem.js\n\n/**\n * D&D 5e Combat System\n * Initiative tracking, turn order, attacks, damage\n */\n\nimport { getModifier } from './characterSystem';\n\n/**\n * Enemy templates\n */\nexport const ENEMY_TEMPLATES = {\n  // CR 1/8\n  goblin: {\n    name: 'Goblin',\n    cr: 0.125,\n    hp: 7,\n    maxHp: 7,\n    ac: 15,\n    initiative: 2,\n    attacks: [{\n      name: 'Scimitar',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: 'slashing'\n    }],\n    xpValue: 25\n  },\n  // CR 1/4\n  skeleton: {\n    name: 'Skeleton',\n    cr: 0.25,\n    hp: 13,\n    maxHp: 13,\n    ac: 13,\n    initiative: 2,\n    attacks: [{\n      name: 'Shortsword',\n      bonus: 4,\n      damage: '1d6+2',\n      damageType: 'piercing'\n    }],\n    xpValue: 50\n  },\n  // CR 1/2\n  orc: {\n    name: 'Orc',\n    cr: 0.5,\n    hp: 15,\n    maxHp: 15,\n    ac: 13,\n    initiative: 1,\n    attacks: [{\n      name: 'Greataxe',\n      bonus: 5,\n      damage: '1d12+3',\n      damageType: 'slashing'\n    }],\n    xpValue: 100\n  },\n  // CR 1\n  bugbear: {\n    name: 'Bugbear',\n    cr: 1,\n    hp: 27,\n    maxHp: 27,\n    ac: 16,\n    initiative: 2,\n    attacks: [{\n      name: 'Morningstar',\n      bonus: 4,\n      damage: '2d8+2',\n      damageType: 'piercing'\n    }],\n    xpValue: 200\n  },\n  // CR 2\n  ogre: {\n    name: 'Ogre',\n    cr: 2,\n    hp: 59,\n    maxHp: 59,\n    ac: 11,\n    initiative: -1,\n    attacks: [{\n      name: 'Greatclub',\n      bonus: 6,\n      damage: '2d8+4',\n      damageType: 'bludgeoning'\n    }],\n    xpValue: 450\n  },\n  // CR 5\n  troll: {\n    name: 'Troll',\n    cr: 5,\n    hp: 84,\n    maxHp: 84,\n    ac: 15,\n    initiative: 1,\n    attacks: [{\n      name: 'Claw',\n      bonus: 7,\n      damage: '2d6+4',\n      damageType: 'slashing'\n    }, {\n      name: 'Bite',\n      bonus: 7,\n      damage: '2d6+4',\n      damageType: 'piercing'\n    }],\n    xpValue: 1800,\n    special: 'Regeneration: 10 HP per turn (not on fire/acid damage)'\n  },\n  // Boss - CR 10\n  young_dragon: {\n    name: 'Young Red Dragon',\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 18,\n    initiative: 0,\n    attacks: [{\n      name: 'Bite',\n      bonus: 10,\n      damage: '2d10+6',\n      damageType: 'piercing'\n    }, {\n      name: 'Claw',\n      bonus: 10,\n      damage: '2d6+6',\n      damageType: 'slashing'\n    }, {\n      name: 'Fire Breath',\n      bonus: 10,\n      damage: '16d6',\n      damageType: 'fire',\n      recharge: 5\n    }],\n    xpValue: 5900,\n    special: 'Legendary Resistance (3/day), Frightful Presence'\n  },\n  // Beasts\n  wolf: {\n    name: 'Wolf',\n    cr: 0.25,\n    hp: 11,\n    maxHp: 11,\n    ac: 13,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 4,\n      damage: '2d4+2',\n      damageType: 'piercing'\n    }],\n    xpValue: 50,\n    special: 'Pack Tactics: Advantage on attacks if ally within 5ft of target'\n  },\n  bear: {\n    name: 'Brown Bear',\n    cr: 1,\n    hp: 34,\n    maxHp: 34,\n    ac: 11,\n    initiative: 0,\n    attacks: [{\n      name: 'Claw',\n      bonus: 5,\n      damage: '2d6+4',\n      damageType: 'slashing'\n    }, {\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+4',\n      damageType: 'piercing'\n    }],\n    xpValue: 200,\n    special: 'Multiattack: Can use both claw and bite'\n  },\n  giant_spider: {\n    name: 'Giant Spider',\n    cr: 1,\n    hp: 26,\n    maxHp: 26,\n    ac: 14,\n    initiative: 3,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+3',\n      damageType: 'piercing'\n    }],\n    xpValue: 200,\n    special: 'Web: DC 12 DEX save or restrained. Poison: DC 11 CON save or 2d8 poison damage'\n  },\n  // Undead\n  zombie: {\n    name: 'Zombie',\n    cr: 0.25,\n    hp: 22,\n    maxHp: 22,\n    ac: 8,\n    initiative: -2,\n    attacks: [{\n      name: 'Slam',\n      bonus: 3,\n      damage: '1d6+1',\n      damageType: 'bludgeoning'\n    }],\n    xpValue: 50,\n    special: 'Undead Fortitude: If reduced to 0 HP, make CON save DC 5+damage. Success = 1 HP'\n  },\n  ghoul: {\n    name: 'Ghoul',\n    cr: 1,\n    hp: 22,\n    maxHp: 22,\n    ac: 12,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 2,\n      damage: '2d6+2',\n      damageType: 'piercing'\n    }, {\n      name: 'Claws',\n      bonus: 4,\n      damage: '2d4+2',\n      damageType: 'slashing'\n    }],\n    xpValue: 200,\n    special: 'Paralyzing Touch: DC 10 CON save or paralyzed for 1 minute'\n  },\n  wraith: {\n    name: 'Wraith',\n    cr: 5,\n    hp: 67,\n    maxHp: 67,\n    ac: 13,\n    initiative: 3,\n    attacks: [{\n      name: 'Life Drain',\n      bonus: 6,\n      damage: '4d8+3',\n      damageType: 'necrotic'\n    }],\n    xpValue: 1800,\n    special: 'Incorporeal: Resistance to non-magical damage. Life Drain reduces max HP'\n  },\n  vampire: {\n    name: 'Vampire',\n    cr: 13,\n    hp: 144,\n    maxHp: 144,\n    ac: 16,\n    initiative: 4,\n    attacks: [{\n      name: 'Unarmed Strike',\n      bonus: 9,\n      damage: '1d8+4',\n      damageType: 'bludgeoning'\n    }, {\n      name: 'Bite',\n      bonus: 9,\n      damage: '1d6+4',\n      damageType: 'piercing'\n    }],\n    xpValue: 10000,\n    special: 'Regeneration 20 HP/turn. Shapechanger. Legendary Actions (3/round)'\n  },\n  // Humanoids\n  bandit: {\n    name: 'Bandit',\n    cr: 0.125,\n    hp: 11,\n    maxHp: 11,\n    ac: 12,\n    initiative: 2,\n    attacks: [{\n      name: 'Scimitar',\n      bonus: 3,\n      damage: '1d6+1',\n      damageType: 'slashing'\n    }],\n    xpValue: 25\n  },\n  cultist: {\n    name: 'Cultist',\n    cr: 0.125,\n    hp: 9,\n    maxHp: 9,\n    ac: 12,\n    initiative: 1,\n    attacks: [{\n      name: 'Scimitar',\n      bonus: 3,\n      damage: '1d6+1',\n      damageType: 'slashing'\n    }],\n    xpValue: 25,\n    special: 'Dark Devotion: Advantage on saves vs frightened'\n  },\n  assassin: {\n    name: 'Assassin',\n    cr: 8,\n    hp: 78,\n    maxHp: 78,\n    ac: 15,\n    initiative: 4,\n    attacks: [{\n      name: 'Shortsword',\n      bonus: 6,\n      damage: '1d6+3',\n      damageType: 'piercing'\n    }, {\n      name: 'Poison',\n      bonus: 6,\n      damage: '7d6',\n      damageType: 'poison'\n    }],\n    xpValue: 3900,\n    special: 'Assassinate: Advantage on attacks vs surprised. Crits on surprised targets'\n  },\n  // Monstrosities\n  mimic: {\n    name: 'Mimic',\n    cr: 2,\n    hp: 58,\n    maxHp: 58,\n    ac: 12,\n    initiative: 1,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '1d8+3',\n      damageType: 'piercing'\n    }, {\n      name: 'Pseudopod',\n      bonus: 5,\n      damage: '1d8+3',\n      damageType: 'bludgeoning'\n    }],\n    xpValue: 450,\n    special: 'Shapechanger. Adhesive: Grapples on hit (DC 13 STR to escape)'\n  },\n  owlbear: {\n    name: 'Owlbear',\n    cr: 3,\n    hp: 59,\n    maxHp: 59,\n    ac: 13,\n    initiative: 1,\n    attacks: [{\n      name: 'Beak',\n      bonus: 7,\n      damage: '1d10+5',\n      damageType: 'piercing'\n    }, {\n      name: 'Claws',\n      bonus: 7,\n      damage: '2d8+5',\n      damageType: 'slashing'\n    }],\n    xpValue: 700,\n    special: 'Multiattack: Beak and claws'\n  },\n  basilisk: {\n    name: 'Basilisk',\n    cr: 3,\n    hp: 52,\n    maxHp: 52,\n    ac: 15,\n    initiative: -1,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '2d6+3',\n      damageType: 'piercing'\n    }],\n    xpValue: 700,\n    special: 'Petrifying Gaze: DC 12 CON save or restrained (3 fails = petrified)'\n  },\n  // Dragons (various colors)\n  white_dragon_wyrmling: {\n    name: 'White Dragon Wyrmling',\n    cr: 2,\n    hp: 32,\n    maxHp: 32,\n    ac: 16,\n    initiative: 0,\n    attacks: [{\n      name: 'Bite',\n      bonus: 4,\n      damage: '1d10+2',\n      damageType: 'piercing'\n    }, {\n      name: 'Cold Breath',\n      bonus: 4,\n      damage: '5d8',\n      damageType: 'cold',\n      recharge: 5\n    }],\n    xpValue: 450,\n    special: 'Cold Breath (Recharge 5-6): 15ft cone, DC 12 CON save'\n  },\n  black_dragon_wyrmling: {\n    name: 'Black Dragon Wyrmling',\n    cr: 2,\n    hp: 33,\n    maxHp: 33,\n    ac: 17,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 4,\n      damage: '1d10+2',\n      damageType: 'piercing'\n    }, {\n      name: 'Acid Breath',\n      bonus: 4,\n      damage: '5d8',\n      damageType: 'acid',\n      recharge: 5\n    }],\n    xpValue: 450,\n    special: 'Acid Breath (Recharge 5-6): 15ft line, DC 11 DEX save'\n  },\n  // Demons\n  quasit: {\n    name: 'Quasit',\n    cr: 1,\n    hp: 7,\n    maxHp: 7,\n    ac: 13,\n    initiative: 4,\n    attacks: [{\n      name: 'Claw',\n      bonus: 4,\n      damage: '1d4+3',\n      damageType: 'piercing'\n    }],\n    xpValue: 200,\n    special: 'Shapechanger. Poison: DC 10 CON save or 5 poison damage & poisoned'\n  },\n  // Elementals\n  fire_elemental: {\n    name: 'Fire Elemental',\n    cr: 5,\n    hp: 102,\n    maxHp: 102,\n    ac: 13,\n    initiative: 3,\n    attacks: [{\n      name: 'Touch',\n      bonus: 6,\n      damage: '2d6+3',\n      damageType: 'fire'\n    }],\n    xpValue: 1800,\n    special: 'Fire Form: Ignites flammables. Sheds light. Water Susceptibility'\n  },\n  // Giants\n  hill_giant: {\n    name: 'Hill Giant',\n    cr: 5,\n    hp: 105,\n    maxHp: 105,\n    ac: 13,\n    initiative: -1,\n    attacks: [{\n      name: 'Greatclub',\n      bonus: 8,\n      damage: '3d8+5',\n      damageType: 'bludgeoning'\n    }, {\n      name: 'Rock',\n      bonus: 8,\n      damage: '3d10+5',\n      damageType: 'bludgeoning'\n    }],\n    xpValue: 1800,\n    special: 'Multiattack: 2 greatclub attacks'\n  },\n  // Aberrations\n  mind_flayer: {\n    name: 'Mind Flayer',\n    cr: 7,\n    hp: 71,\n    maxHp: 71,\n    ac: 15,\n    initiative: 1,\n    attacks: [{\n      name: 'Tentacles',\n      bonus: 7,\n      damage: '2d10+4',\n      damageType: 'psychic'\n    }, {\n      name: 'Mind Blast',\n      bonus: 7,\n      damage: '4d8+4',\n      damageType: 'psychic'\n    }],\n    xpValue: 2900,\n    special: 'Mind Blast (Recharge 5-6): 60ft cone, DC 15 INT save or stunned'\n  },\n  beholder: {\n    name: 'Beholder',\n    cr: 13,\n    hp: 180,\n    maxHp: 180,\n    ac: 18,\n    initiative: 2,\n    attacks: [{\n      name: 'Bite',\n      bonus: 5,\n      damage: '4d6',\n      damageType: 'piercing'\n    }, {\n      name: 'Eye Ray',\n      bonus: 8,\n      damage: 'varies',\n      damageType: 'varies'\n    }],\n    xpValue: 10000,\n    special: 'Antimagic Cone. 10 Eye Rays (random). Legendary Actions'\n  },\n  // Named Bosses\n  lich: {\n    name: 'Ancient Lich',\n    cr: 21,\n    hp: 135,\n    maxHp: 135,\n    ac: 17,\n    initiative: 5,\n    attacks: [{\n      name: 'Paralyzing Touch',\n      bonus: 12,\n      damage: '3d6',\n      damageType: 'cold'\n    }, {\n      name: 'Disrupt Life',\n      bonus: 12,\n      damage: '6d6',\n      damageType: 'necrotic'\n    }],\n    xpValue: 33000,\n    special: 'Legendary Resistance (3/day). 9th level spells. Rejuvenation. Legendary Actions (3/round)'\n  },\n  kraken: {\n    name: 'Kraken',\n    cr: 23,\n    hp: 472,\n    maxHp: 472,\n    ac: 18,\n    initiative: 0,\n    attacks: [{\n      name: 'Tentacle',\n      bonus: 17,\n      damage: '3d6+10',\n      damageType: 'bludgeoning'\n    }, {\n      name: 'Bite',\n      bonus: 17,\n      damage: '4d8+10',\n      damageType: 'piercing'\n    }],\n    xpValue: 50000,\n    special: 'Legendary Resistance (3/day). Lightning Storm. Ink Cloud. Legendary Actions (3/round)'\n  }\n};\n\n/**\n * Roll initiative for a combatant\n */\nexport function rollInitiative(initiativeModifier) {\n  const roll = Math.floor(Math.random() * 20) + 1;\n  return roll + initiativeModifier;\n}\n\n/**\n * Create enemy from template\n */\nexport function createEnemy(templateName, count = 1) {\n  const template = ENEMY_TEMPLATES[templateName];\n  if (!template) return [];\n  const enemies = [];\n  for (let i = 0; i < count; i++) {\n    enemies.push({\n      id: `${templateName}_${Date.now()}_${i}`,\n      ...JSON.parse(JSON.stringify(template)),\n      // Deep clone\n      name: count > 1 ? `${template.name} ${i + 1}` : template.name,\n      isEnemy: true,\n      initiative: rollInitiative(template.initiative)\n    });\n  }\n  return enemies;\n}\n\n/**\n * Start combat with party and enemies\n */\nexport function startCombat(party, enemies) {\n  // Roll initiative for all party members\n  const partyWithInitiative = party.map(character => {\n    var _character$abilities;\n    return {\n      ...character,\n      initiative: rollInitiative(character.initiative || getModifier(((_character$abilities = character.abilities) === null || _character$abilities === void 0 ? void 0 : _character$abilities.DEX) || 10)),\n      isEnemy: false\n    };\n  });\n\n  // Combine and sort by initiative (highest first)\n  const combatants = [...partyWithInitiative, ...enemies].sort((a, b) => b.initiative - a.initiative);\n  return {\n    combatants,\n    currentTurn: 0,\n    round: 1,\n    isActive: true,\n    log: []\n  };\n}\n\n/**\n * Roll dice (e.g., \"2d6+3\")\n */\nexport function rollDice(diceString) {\n  const match = diceString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return 0;\n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  return {\n    total,\n    rolls,\n    modifier: modifier || '+0'\n  };\n}\n\n/**\n * Make an attack roll\n */\nexport function makeAttackRoll(attackBonus, targetAC) {\n  const d20Roll = Math.floor(Math.random() * 20) + 1;\n  const totalRoll = d20Roll + attackBonus;\n  const isCritical = d20Roll === 20;\n  const isFumble = d20Roll === 1;\n  const isHit = isCritical || !isFumble && totalRoll >= targetAC;\n  return {\n    d20Roll,\n    totalRoll,\n    isHit,\n    isCritical,\n    isFumble\n  };\n}\n\n/**\n * Calculate damage\n */\nexport function calculateDamage(damageString, isCritical = false) {\n  const result = rollDice(damageString);\n  if (isCritical) {\n    // Critical hits double the dice\n    const critResult = rollDice(damageString);\n    result.total += critResult.total - parseInt(result.modifier.replace('+', ''));\n    result.rolls = [...result.rolls, ...critResult.rolls];\n    result.isCritical = true;\n  }\n  return result;\n}\n\n/**\n * Apply damage to a combatant\n */\nexport function applyDamage(combatant, damage) {\n  const newHp = Math.max(0, combatant.hp - damage);\n  return {\n    ...combatant,\n    hp: newHp,\n    isDead: newHp === 0\n  };\n}\n\n/**\n * Execute an attack\n */\nexport function executeAttack(attacker, target, attackIndex = 0) {\n  var _attacker$attacks;\n  const attack = (_attacker$attacks = attacker.attacks) === null || _attacker$attacks === void 0 ? void 0 : _attacker$attacks[attackIndex];\n  if (!attack) return null;\n  const attackRoll = makeAttackRoll(attack.bonus, target.ac || target.armorClass);\n  let damage = 0;\n  let damageRoll = null;\n  if (attackRoll.isHit) {\n    damageRoll = calculateDamage(attack.damage, attackRoll.isCritical);\n    damage = damageRoll.total;\n  }\n  return {\n    attacker: attacker.name,\n    target: target.name,\n    attack: attack.name,\n    attackRoll,\n    damageRoll,\n    damage,\n    damageType: attack.damageType\n  };\n}\n\n/**\n * Next turn\n */\nexport function nextTurn(combat) {\n  const nextIndex = (combat.currentTurn + 1) % combat.combatants.length;\n  const newRound = nextIndex === 0 ? combat.round + 1 : combat.round;\n  return {\n    ...combat,\n    currentTurn: nextIndex,\n    round: newRound\n  };\n}\n\n/**\n * Check if combat is over\n */\nexport function checkCombatEnd(combat) {\n  const aliveParty = combat.combatants.filter(c => !c.isEnemy && !c.isDead);\n  const aliveEnemies = combat.combatants.filter(c => c.isEnemy && !c.isDead);\n  if (aliveParty.length === 0) {\n    return {\n      ended: true,\n      result: 'defeat',\n      message: 'The party has fallen...'\n    };\n  }\n  if (aliveEnemies.length === 0) {\n    const totalXP = combat.combatants.filter(c => c.isEnemy).reduce((sum, e) => sum + (e.xpValue || 0), 0);\n    return {\n      ended: true,\n      result: 'victory',\n      message: 'Victory! All enemies defeated!',\n      xpReward: totalXP\n    };\n  }\n  return {\n    ended: false\n  };\n}\n\n/**\n * Get current combatant\n */\nexport function getCurrentCombatant(combat) {\n  return combat.combatants[combat.currentTurn];\n}\n\n/**\n * Update combatant in combat\n */\nexport function updateCombatant(combat, combatantId, updates) {\n  return {\n    ...combat,\n    combatants: combat.combatants.map(c => c.id === combatantId || c.name === combatantId ? {\n      ...c,\n      ...updates\n    } : c)\n  };\n}","map":{"version":3,"names":["getModifier","ENEMY_TEMPLATES","goblin","name","cr","hp","maxHp","ac","initiative","attacks","bonus","damage","damageType","xpValue","skeleton","orc","bugbear","ogre","troll","special","young_dragon","recharge","wolf","bear","giant_spider","zombie","ghoul","wraith","vampire","bandit","cultist","assassin","mimic","owlbear","basilisk","white_dragon_wyrmling","black_dragon_wyrmling","quasit","fire_elemental","hill_giant","mind_flayer","beholder","lich","kraken","rollInitiative","initiativeModifier","roll","Math","floor","random","createEnemy","templateName","count","template","enemies","i","push","id","Date","now","JSON","parse","stringify","isEnemy","startCombat","party","partyWithInitiative","map","character","_character$abilities","abilities","DEX","combatants","sort","a","b","currentTurn","round","isActive","log","rollDice","diceString","match","numDice","dieSize","modifier","total","rolls","parseInt","makeAttackRoll","attackBonus","targetAC","d20Roll","totalRoll","isCritical","isFumble","isHit","calculateDamage","damageString","result","critResult","replace","applyDamage","combatant","newHp","max","isDead","executeAttack","attacker","target","attackIndex","_attacker$attacks","attack","attackRoll","armorClass","damageRoll","nextTurn","combat","nextIndex","length","newRound","checkCombatEnd","aliveParty","filter","c","aliveEnemies","ended","message","totalXP","reduce","sum","e","xpReward","getCurrentCombatant","updateCombatant","combatantId","updates"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/combatSystem.js"],"sourcesContent":["// frontend/src/utils/combatSystem.js\n\n/**\n * D&D 5e Combat System\n * Initiative tracking, turn order, attacks, damage\n */\n\nimport { getModifier } from './characterSystem';\n\n/**\n * Enemy templates\n */\nexport const ENEMY_TEMPLATES = {\n  // CR 1/8\n  goblin: {\n    name: 'Goblin',\n    cr: 0.125,\n    hp: 7,\n    maxHp: 7,\n    ac: 15,\n    initiative: 2,\n    attacks: [\n      { name: 'Scimitar', bonus: 4, damage: '1d6+2', damageType: 'slashing' }\n    ],\n    xpValue: 25\n  },\n  \n  // CR 1/4\n  skeleton: {\n    name: 'Skeleton',\n    cr: 0.25,\n    hp: 13,\n    maxHp: 13,\n    ac: 13,\n    initiative: 2,\n    attacks: [\n      { name: 'Shortsword', bonus: 4, damage: '1d6+2', damageType: 'piercing' }\n    ],\n    xpValue: 50\n  },\n  \n  // CR 1/2\n  orc: {\n    name: 'Orc',\n    cr: 0.5,\n    hp: 15,\n    maxHp: 15,\n    ac: 13,\n    initiative: 1,\n    attacks: [\n      { name: 'Greataxe', bonus: 5, damage: '1d12+3', damageType: 'slashing' }\n    ],\n    xpValue: 100\n  },\n  \n  // CR 1\n  bugbear: {\n    name: 'Bugbear',\n    cr: 1,\n    hp: 27,\n    maxHp: 27,\n    ac: 16,\n    initiative: 2,\n    attacks: [\n      { name: 'Morningstar', bonus: 4, damage: '2d8+2', damageType: 'piercing' }\n    ],\n    xpValue: 200\n  },\n  \n  // CR 2\n  ogre: {\n    name: 'Ogre',\n    cr: 2,\n    hp: 59,\n    maxHp: 59,\n    ac: 11,\n    initiative: -1,\n    attacks: [\n      { name: 'Greatclub', bonus: 6, damage: '2d8+4', damageType: 'bludgeoning' }\n    ],\n    xpValue: 450\n  },\n  \n  // CR 5\n  troll: {\n    name: 'Troll',\n    cr: 5,\n    hp: 84,\n    maxHp: 84,\n    ac: 15,\n    initiative: 1,\n    attacks: [\n      { name: 'Claw', bonus: 7, damage: '2d6+4', damageType: 'slashing' },\n      { name: 'Bite', bonus: 7, damage: '2d6+4', damageType: 'piercing' }\n    ],\n    xpValue: 1800,\n    special: 'Regeneration: 10 HP per turn (not on fire/acid damage)'\n  },\n  \n  // Boss - CR 10\n  young_dragon: {\n    name: 'Young Red Dragon',\n    cr: 10,\n    hp: 178,\n    maxHp: 178,\n    ac: 18,\n    initiative: 0,\n    attacks: [\n      { name: 'Bite', bonus: 10, damage: '2d10+6', damageType: 'piercing' },\n      { name: 'Claw', bonus: 10, damage: '2d6+6', damageType: 'slashing' },\n      { name: 'Fire Breath', bonus: 10, damage: '16d6', damageType: 'fire', recharge: 5 }\n    ],\n    xpValue: 5900,\n    special: 'Legendary Resistance (3/day), Frightful Presence'\n  },\n\n  // Beasts\n  wolf: {\n    name: 'Wolf',\n    cr: 0.25,\n    hp: 11,\n    maxHp: 11,\n    ac: 13,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 4, damage: '2d4+2', damageType: 'piercing' }\n    ],\n    xpValue: 50,\n    special: 'Pack Tactics: Advantage on attacks if ally within 5ft of target'\n  },\n\n  bear: {\n    name: 'Brown Bear',\n    cr: 1,\n    hp: 34,\n    maxHp: 34,\n    ac: 11,\n    initiative: 0,\n    attacks: [\n      { name: 'Claw', bonus: 5, damage: '2d6+4', damageType: 'slashing' },\n      { name: 'Bite', bonus: 5, damage: '1d8+4', damageType: 'piercing' }\n    ],\n    xpValue: 200,\n    special: 'Multiattack: Can use both claw and bite'\n  },\n\n  giant_spider: {\n    name: 'Giant Spider',\n    cr: 1,\n    hp: 26,\n    maxHp: 26,\n    ac: 14,\n    initiative: 3,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '1d8+3', damageType: 'piercing' }\n    ],\n    xpValue: 200,\n    special: 'Web: DC 12 DEX save or restrained. Poison: DC 11 CON save or 2d8 poison damage'\n  },\n\n  // Undead\n  zombie: {\n    name: 'Zombie',\n    cr: 0.25,\n    hp: 22,\n    maxHp: 22,\n    ac: 8,\n    initiative: -2,\n    attacks: [\n      { name: 'Slam', bonus: 3, damage: '1d6+1', damageType: 'bludgeoning' }\n    ],\n    xpValue: 50,\n    special: 'Undead Fortitude: If reduced to 0 HP, make CON save DC 5+damage. Success = 1 HP'\n  },\n\n  ghoul: {\n    name: 'Ghoul',\n    cr: 1,\n    hp: 22,\n    maxHp: 22,\n    ac: 12,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 2, damage: '2d6+2', damageType: 'piercing' },\n      { name: 'Claws', bonus: 4, damage: '2d4+2', damageType: 'slashing' }\n    ],\n    xpValue: 200,\n    special: 'Paralyzing Touch: DC 10 CON save or paralyzed for 1 minute'\n  },\n\n  wraith: {\n    name: 'Wraith',\n    cr: 5,\n    hp: 67,\n    maxHp: 67,\n    ac: 13,\n    initiative: 3,\n    attacks: [\n      { name: 'Life Drain', bonus: 6, damage: '4d8+3', damageType: 'necrotic' }\n    ],\n    xpValue: 1800,\n    special: 'Incorporeal: Resistance to non-magical damage. Life Drain reduces max HP'\n  },\n\n  vampire: {\n    name: 'Vampire',\n    cr: 13,\n    hp: 144,\n    maxHp: 144,\n    ac: 16,\n    initiative: 4,\n    attacks: [\n      { name: 'Unarmed Strike', bonus: 9, damage: '1d8+4', damageType: 'bludgeoning' },\n      { name: 'Bite', bonus: 9, damage: '1d6+4', damageType: 'piercing' }\n    ],\n    xpValue: 10000,\n    special: 'Regeneration 20 HP/turn. Shapechanger. Legendary Actions (3/round)'\n  },\n\n  // Humanoids\n  bandit: {\n    name: 'Bandit',\n    cr: 0.125,\n    hp: 11,\n    maxHp: 11,\n    ac: 12,\n    initiative: 2,\n    attacks: [\n      { name: 'Scimitar', bonus: 3, damage: '1d6+1', damageType: 'slashing' }\n    ],\n    xpValue: 25\n  },\n\n  cultist: {\n    name: 'Cultist',\n    cr: 0.125,\n    hp: 9,\n    maxHp: 9,\n    ac: 12,\n    initiative: 1,\n    attacks: [\n      { name: 'Scimitar', bonus: 3, damage: '1d6+1', damageType: 'slashing' }\n    ],\n    xpValue: 25,\n    special: 'Dark Devotion: Advantage on saves vs frightened'\n  },\n\n  assassin: {\n    name: 'Assassin',\n    cr: 8,\n    hp: 78,\n    maxHp: 78,\n    ac: 15,\n    initiative: 4,\n    attacks: [\n      { name: 'Shortsword', bonus: 6, damage: '1d6+3', damageType: 'piercing' },\n      { name: 'Poison', bonus: 6, damage: '7d6', damageType: 'poison' }\n    ],\n    xpValue: 3900,\n    special: 'Assassinate: Advantage on attacks vs surprised. Crits on surprised targets'\n  },\n\n  // Monstrosities\n  mimic: {\n    name: 'Mimic',\n    cr: 2,\n    hp: 58,\n    maxHp: 58,\n    ac: 12,\n    initiative: 1,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '1d8+3', damageType: 'piercing' },\n      { name: 'Pseudopod', bonus: 5, damage: '1d8+3', damageType: 'bludgeoning' }\n    ],\n    xpValue: 450,\n    special: 'Shapechanger. Adhesive: Grapples on hit (DC 13 STR to escape)'\n  },\n\n  owlbear: {\n    name: 'Owlbear',\n    cr: 3,\n    hp: 59,\n    maxHp: 59,\n    ac: 13,\n    initiative: 1,\n    attacks: [\n      { name: 'Beak', bonus: 7, damage: '1d10+5', damageType: 'piercing' },\n      { name: 'Claws', bonus: 7, damage: '2d8+5', damageType: 'slashing' }\n    ],\n    xpValue: 700,\n    special: 'Multiattack: Beak and claws'\n  },\n\n  basilisk: {\n    name: 'Basilisk',\n    cr: 3,\n    hp: 52,\n    maxHp: 52,\n    ac: 15,\n    initiative: -1,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '2d6+3', damageType: 'piercing' }\n    ],\n    xpValue: 700,\n    special: 'Petrifying Gaze: DC 12 CON save or restrained (3 fails = petrified)'\n  },\n\n  // Dragons (various colors)\n  white_dragon_wyrmling: {\n    name: 'White Dragon Wyrmling',\n    cr: 2,\n    hp: 32,\n    maxHp: 32,\n    ac: 16,\n    initiative: 0,\n    attacks: [\n      { name: 'Bite', bonus: 4, damage: '1d10+2', damageType: 'piercing' },\n      { name: 'Cold Breath', bonus: 4, damage: '5d8', damageType: 'cold', recharge: 5 }\n    ],\n    xpValue: 450,\n    special: 'Cold Breath (Recharge 5-6): 15ft cone, DC 12 CON save'\n  },\n\n  black_dragon_wyrmling: {\n    name: 'Black Dragon Wyrmling',\n    cr: 2,\n    hp: 33,\n    maxHp: 33,\n    ac: 17,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 4, damage: '1d10+2', damageType: 'piercing' },\n      { name: 'Acid Breath', bonus: 4, damage: '5d8', damageType: 'acid', recharge: 5 }\n    ],\n    xpValue: 450,\n    special: 'Acid Breath (Recharge 5-6): 15ft line, DC 11 DEX save'\n  },\n\n  // Demons\n  quasit: {\n    name: 'Quasit',\n    cr: 1,\n    hp: 7,\n    maxHp: 7,\n    ac: 13,\n    initiative: 4,\n    attacks: [\n      { name: 'Claw', bonus: 4, damage: '1d4+3', damageType: 'piercing' }\n    ],\n    xpValue: 200,\n    special: 'Shapechanger. Poison: DC 10 CON save or 5 poison damage & poisoned'\n  },\n\n  // Elementals\n  fire_elemental: {\n    name: 'Fire Elemental',\n    cr: 5,\n    hp: 102,\n    maxHp: 102,\n    ac: 13,\n    initiative: 3,\n    attacks: [\n      { name: 'Touch', bonus: 6, damage: '2d6+3', damageType: 'fire' }\n    ],\n    xpValue: 1800,\n    special: 'Fire Form: Ignites flammables. Sheds light. Water Susceptibility'\n  },\n\n  // Giants\n  hill_giant: {\n    name: 'Hill Giant',\n    cr: 5,\n    hp: 105,\n    maxHp: 105,\n    ac: 13,\n    initiative: -1,\n    attacks: [\n      { name: 'Greatclub', bonus: 8, damage: '3d8+5', damageType: 'bludgeoning' },\n      { name: 'Rock', bonus: 8, damage: '3d10+5', damageType: 'bludgeoning' }\n    ],\n    xpValue: 1800,\n    special: 'Multiattack: 2 greatclub attacks'\n  },\n\n  // Aberrations\n  mind_flayer: {\n    name: 'Mind Flayer',\n    cr: 7,\n    hp: 71,\n    maxHp: 71,\n    ac: 15,\n    initiative: 1,\n    attacks: [\n      { name: 'Tentacles', bonus: 7, damage: '2d10+4', damageType: 'psychic' },\n      { name: 'Mind Blast', bonus: 7, damage: '4d8+4', damageType: 'psychic' }\n    ],\n    xpValue: 2900,\n    special: 'Mind Blast (Recharge 5-6): 60ft cone, DC 15 INT save or stunned'\n  },\n\n  beholder: {\n    name: 'Beholder',\n    cr: 13,\n    hp: 180,\n    maxHp: 180,\n    ac: 18,\n    initiative: 2,\n    attacks: [\n      { name: 'Bite', bonus: 5, damage: '4d6', damageType: 'piercing' },\n      { name: 'Eye Ray', bonus: 8, damage: 'varies', damageType: 'varies' }\n    ],\n    xpValue: 10000,\n    special: 'Antimagic Cone. 10 Eye Rays (random). Legendary Actions'\n  },\n\n  // Named Bosses\n  lich: {\n    name: 'Ancient Lich',\n    cr: 21,\n    hp: 135,\n    maxHp: 135,\n    ac: 17,\n    initiative: 5,\n    attacks: [\n      { name: 'Paralyzing Touch', bonus: 12, damage: '3d6', damageType: 'cold' },\n      { name: 'Disrupt Life', bonus: 12, damage: '6d6', damageType: 'necrotic' }\n    ],\n    xpValue: 33000,\n    special: 'Legendary Resistance (3/day). 9th level spells. Rejuvenation. Legendary Actions (3/round)'\n  },\n\n  kraken: {\n    name: 'Kraken',\n    cr: 23,\n    hp: 472,\n    maxHp: 472,\n    ac: 18,\n    initiative: 0,\n    attacks: [\n      { name: 'Tentacle', bonus: 17, damage: '3d6+10', damageType: 'bludgeoning' },\n      { name: 'Bite', bonus: 17, damage: '4d8+10', damageType: 'piercing' }\n    ],\n    xpValue: 50000,\n    special: 'Legendary Resistance (3/day). Lightning Storm. Ink Cloud. Legendary Actions (3/round)'\n  }\n};\n\n/**\n * Roll initiative for a combatant\n */\nexport function rollInitiative(initiativeModifier) {\n  const roll = Math.floor(Math.random() * 20) + 1;\n  return roll + initiativeModifier;\n}\n\n/**\n * Create enemy from template\n */\nexport function createEnemy(templateName, count = 1) {\n  const template = ENEMY_TEMPLATES[templateName];\n  if (!template) return [];\n  \n  const enemies = [];\n  for (let i = 0; i < count; i++) {\n    enemies.push({\n      id: `${templateName}_${Date.now()}_${i}`,\n      ...JSON.parse(JSON.stringify(template)), // Deep clone\n      name: count > 1 ? `${template.name} ${i + 1}` : template.name,\n      isEnemy: true,\n      initiative: rollInitiative(template.initiative)\n    });\n  }\n  \n  return enemies;\n}\n\n/**\n * Start combat with party and enemies\n */\nexport function startCombat(party, enemies) {\n  // Roll initiative for all party members\n  const partyWithInitiative = party.map(character => ({\n    ...character,\n    initiative: rollInitiative(character.initiative || getModifier(character.abilities?.DEX || 10)),\n    isEnemy: false\n  }));\n  \n  // Combine and sort by initiative (highest first)\n  const combatants = [...partyWithInitiative, ...enemies].sort(\n    (a, b) => b.initiative - a.initiative\n  );\n  \n  return {\n    combatants,\n    currentTurn: 0,\n    round: 1,\n    isActive: true,\n    log: []\n  };\n}\n\n/**\n * Roll dice (e.g., \"2d6+3\")\n */\nexport function rollDice(diceString) {\n  const match = diceString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return 0;\n  \n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  \n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  \n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  \n  return { total, rolls, modifier: modifier || '+0' };\n}\n\n/**\n * Make an attack roll\n */\nexport function makeAttackRoll(attackBonus, targetAC) {\n  const d20Roll = Math.floor(Math.random() * 20) + 1;\n  const totalRoll = d20Roll + attackBonus;\n  \n  const isCritical = d20Roll === 20;\n  const isFumble = d20Roll === 1;\n  const isHit = isCritical || (!isFumble && totalRoll >= targetAC);\n  \n  return {\n    d20Roll,\n    totalRoll,\n    isHit,\n    isCritical,\n    isFumble\n  };\n}\n\n/**\n * Calculate damage\n */\nexport function calculateDamage(damageString, isCritical = false) {\n  const result = rollDice(damageString);\n  \n  if (isCritical) {\n    // Critical hits double the dice\n    const critResult = rollDice(damageString);\n    result.total += critResult.total - parseInt(result.modifier.replace('+', ''));\n    result.rolls = [...result.rolls, ...critResult.rolls];\n    result.isCritical = true;\n  }\n  \n  return result;\n}\n\n/**\n * Apply damage to a combatant\n */\nexport function applyDamage(combatant, damage) {\n  const newHp = Math.max(0, combatant.hp - damage);\n  \n  return {\n    ...combatant,\n    hp: newHp,\n    isDead: newHp === 0\n  };\n}\n\n/**\n * Execute an attack\n */\nexport function executeAttack(attacker, target, attackIndex = 0) {\n  const attack = attacker.attacks?.[attackIndex];\n  if (!attack) return null;\n  \n  const attackRoll = makeAttackRoll(attack.bonus, target.ac || target.armorClass);\n  \n  let damage = 0;\n  let damageRoll = null;\n  \n  if (attackRoll.isHit) {\n    damageRoll = calculateDamage(attack.damage, attackRoll.isCritical);\n    damage = damageRoll.total;\n  }\n  \n  return {\n    attacker: attacker.name,\n    target: target.name,\n    attack: attack.name,\n    attackRoll,\n    damageRoll,\n    damage,\n    damageType: attack.damageType\n  };\n}\n\n/**\n * Next turn\n */\nexport function nextTurn(combat) {\n  const nextIndex = (combat.currentTurn + 1) % combat.combatants.length;\n  const newRound = nextIndex === 0 ? combat.round + 1 : combat.round;\n  \n  return {\n    ...combat,\n    currentTurn: nextIndex,\n    round: newRound\n  };\n}\n\n/**\n * Check if combat is over\n */\nexport function checkCombatEnd(combat) {\n  const aliveParty = combat.combatants.filter(c => !c.isEnemy && !c.isDead);\n  const aliveEnemies = combat.combatants.filter(c => c.isEnemy && !c.isDead);\n  \n  if (aliveParty.length === 0) {\n    return { ended: true, result: 'defeat', message: 'The party has fallen...' };\n  }\n  \n  if (aliveEnemies.length === 0) {\n    const totalXP = combat.combatants\n      .filter(c => c.isEnemy)\n      .reduce((sum, e) => sum + (e.xpValue || 0), 0);\n    \n    return { \n      ended: true, \n      result: 'victory', \n      message: 'Victory! All enemies defeated!',\n      xpReward: totalXP\n    };\n  }\n  \n  return { ended: false };\n}\n\n/**\n * Get current combatant\n */\nexport function getCurrentCombatant(combat) {\n  return combat.combatants[combat.currentTurn];\n}\n\n/**\n * Update combatant in combat\n */\nexport function updateCombatant(combat, combatantId, updates) {\n  return {\n    ...combat,\n    combatants: combat.combatants.map(c =>\n      c.id === combatantId || c.name === combatantId ? { ...c, ...updates } : c\n    )\n  };\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}