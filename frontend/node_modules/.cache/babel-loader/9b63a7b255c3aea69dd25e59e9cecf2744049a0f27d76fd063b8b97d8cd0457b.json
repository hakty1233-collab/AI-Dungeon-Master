{"ast":null,"code":"// frontend/src/utils/xpSystem.js\n\n/**\n * XP Award and Level-Up System\n * Integrates with DM responses to award XP and handle leveling\n */\n\nimport { addExperience, levelUp } from './characterSystem';\n\n// XP rewards for different encounter types\nexport const XP_REWARDS = {\n  // Combat encounters\n  trivial_combat: 25,\n  easy_combat: 50,\n  medium_combat: 100,\n  hard_combat: 200,\n  deadly_combat: 400,\n  boss_fight: 1000,\n  // Non-combat achievements\n  puzzle_solved: 50,\n  social_encounter: 75,\n  quest_completed: 150,\n  major_milestone: 500,\n  discovery: 100,\n  // Story progression\n  chapter_complete: 300,\n  save_npc: 100,\n  defeat_villain: 500\n};\n\n// Keywords to detect XP-worthy events in narration\nexport const XP_TRIGGERS = {\n  combat: ['defeated', 'slain', 'killed', 'vanquished', 'destroyed', 'battle won', 'victory', 'triumph', 'fell', 'dies', 'dead', 'overcome', 'bested'],\n  puzzle: ['solved', 'unlocked', 'discovered the solution', 'figured out', 'cracked', 'deciphered'],\n  quest: ['quest complete', 'mission accomplished', 'task finished', 'objective achieved', 'succeeded', 'completed'],\n  social: ['persuaded', 'convinced', 'negotiated', 'intimidated', 'charmed', 'befriended'],\n  discovery: ['found', 'discovered', 'uncovered', 'revealed', 'located', 'stumbled upon'],\n  milestone: ['reached', 'arrived at', 'entered the', 'escaped', 'survived']\n};\n\n/**\n * Analyze DM narration to detect XP-worthy events\n */\nexport function detectXPEvents(narration) {\n  const lowerNarration = narration.toLowerCase();\n  const events = [];\n  console.log(\"ðŸ” Analyzing for XP:\", lowerNarration.substring(0, 100) + \"...\");\n\n  // Check for combat victories\n  if (XP_TRIGGERS.combat.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"âš”ï¸ Combat victory detected!\");\n\n    // Determine difficulty based on context\n    if (lowerNarration.includes('boss') || lowerNarration.includes('dragon') || lowerNarration.includes('ancient') || lowerNarration.includes('lord') || lowerNarration.includes('king') || lowerNarration.includes('queen')) {\n      events.push({\n        type: 'boss_fight',\n        xp: XP_REWARDS.boss_fight,\n        reason: 'Defeated a powerful boss'\n      });\n      console.log(\"ðŸ‰ BOSS FIGHT XP!\");\n    } else if (lowerNarration.includes('fierce') || lowerNarration.includes('deadly') || lowerNarration.includes('overwhelming') || lowerNarration.includes('horde')) {\n      events.push({\n        type: 'deadly_combat',\n        xp: XP_REWARDS.deadly_combat,\n        reason: 'Won a deadly battle'\n      });\n    } else if (lowerNarration.includes('difficult') || lowerNarration.includes('challenging') || lowerNarration.includes('tough')) {\n      events.push({\n        type: 'hard_combat',\n        xp: XP_REWARDS.hard_combat,\n        reason: 'Overcame a hard combat'\n      });\n    } else {\n      events.push({\n        type: 'medium_combat',\n        xp: XP_REWARDS.medium_combat,\n        reason: 'Won the battle'\n      });\n    }\n  }\n\n  // Check for quests\n  if (XP_TRIGGERS.quest.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ“œ Quest completion detected!\");\n    events.push({\n      type: 'quest_completed',\n      xp: XP_REWARDS.quest_completed,\n      reason: 'Completed a quest'\n    });\n  }\n\n  // Check for puzzles\n  if (XP_TRIGGERS.puzzle.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ§© Puzzle solved!\");\n    events.push({\n      type: 'puzzle_solved',\n      xp: XP_REWARDS.puzzle_solved,\n      reason: 'Solved a puzzle'\n    });\n  }\n\n  // Check for social encounters\n  if (XP_TRIGGERS.social.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ—£ï¸ Social encounter success!\");\n    events.push({\n      type: 'social_encounter',\n      xp: XP_REWARDS.social_encounter,\n      reason: 'Successful social interaction'\n    });\n  }\n\n  // Check for discoveries\n  if (XP_TRIGGERS.discovery.some(trigger => lowerNarration.includes(trigger))) {\n    if (lowerNarration.includes('secret') || lowerNarration.includes('hidden') || lowerNarration.includes('ancient') || lowerNarration.includes('treasure')) {\n      console.log(\"ðŸ” Important discovery!\");\n      events.push({\n        type: 'discovery',\n        xp: XP_REWARDS.discovery,\n        reason: 'Made an important discovery'\n      });\n    }\n  }\n  console.log(`âœ¨ Total XP events found: ${events.length}`);\n  return events;\n}\n\n/**\n * Award XP to entire party\n */\nexport function awardXPToParty(party, xpAmount, reason = 'Adventure progress') {\n  const results = {\n    partyUpdates: [],\n    levelUps: [],\n    totalXP: xpAmount\n  };\n  party.forEach(character => {\n    const updatedChar = addExperience(character, xpAmount);\n    results.partyUpdates.push(updatedChar);\n\n    // Check if they leveled up\n    if (updatedChar.levelsGained && updatedChar.levelsGained > 0) {\n      results.levelUps.push({\n        name: character.name,\n        oldLevel: character.level,\n        newLevel: updatedChar.level,\n        levelsGained: updatedChar.levelsGained\n      });\n    }\n  });\n  return results;\n}\n\n/**\n * Process XP from DM response\n */\nexport function processXPFromNarration(narration, party) {\n  const xpEvents = detectXPEvents(narration);\n  if (xpEvents.length === 0) {\n    return null;\n  }\n\n  // Sum all XP from detected events\n  const totalXP = xpEvents.reduce((sum, event) => sum + event.xp, 0);\n  const reasons = xpEvents.map(e => e.reason).join(', ');\n\n  // Award to party\n  const results = awardXPToParty(party, totalXP, reasons);\n  return {\n    ...results,\n    events: xpEvents,\n    message: `+${totalXP} XP: ${reasons}`\n  };\n}\n\n/**\n * Manual XP award (for DM to call explicitly)\n */\nexport function manualXPAward(party, xpAmount, reason = 'DM Award') {\n  return awardXPToParty(party, xpAmount, reason);\n}\n\n/**\n * Calculate party level average\n */\nexport function getPartyLevel(party) {\n  if (party.length === 0) return 1;\n  const totalLevel = party.reduce((sum, char) => sum + char.level, 0);\n  return Math.round(totalLevel / party.length);\n}\n\n/**\n * Suggest XP rewards based on party level\n */\nexport function suggestXPReward(partyLevel, encounterType = 'medium_combat') {\n  const baseXP = XP_REWARDS[encounterType] || 100;\n\n  // Scale with party level\n  const scaledXP = Math.round(baseXP * (1 + (partyLevel - 1) * 0.1));\n  return scaledXP;\n}","map":{"version":3,"names":["addExperience","levelUp","XP_REWARDS","trivial_combat","easy_combat","medium_combat","hard_combat","deadly_combat","boss_fight","puzzle_solved","social_encounter","quest_completed","major_milestone","discovery","chapter_complete","save_npc","defeat_villain","XP_TRIGGERS","combat","puzzle","quest","social","milestone","detectXPEvents","narration","lowerNarration","toLowerCase","events","console","log","substring","some","trigger","includes","push","type","xp","reason","length","awardXPToParty","party","xpAmount","results","partyUpdates","levelUps","totalXP","forEach","character","updatedChar","levelsGained","name","oldLevel","level","newLevel","processXPFromNarration","xpEvents","reduce","sum","event","reasons","map","e","join","message","manualXPAward","getPartyLevel","totalLevel","char","Math","round","suggestXPReward","partyLevel","encounterType","baseXP","scaledXP"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/xpSystem.js"],"sourcesContent":["// frontend/src/utils/xpSystem.js\n\n/**\n * XP Award and Level-Up System\n * Integrates with DM responses to award XP and handle leveling\n */\n\nimport { addExperience, levelUp } from './characterSystem';\n\n// XP rewards for different encounter types\nexport const XP_REWARDS = {\n  // Combat encounters\n  trivial_combat: 25,\n  easy_combat: 50,\n  medium_combat: 100,\n  hard_combat: 200,\n  deadly_combat: 400,\n  boss_fight: 1000,\n  \n  // Non-combat achievements\n  puzzle_solved: 50,\n  social_encounter: 75,\n  quest_completed: 150,\n  major_milestone: 500,\n  discovery: 100,\n  \n  // Story progression\n  chapter_complete: 300,\n  save_npc: 100,\n  defeat_villain: 500,\n};\n\n// Keywords to detect XP-worthy events in narration\nexport const XP_TRIGGERS = {\n  combat: ['defeated', 'slain', 'killed', 'vanquished', 'destroyed', 'battle won', 'victory', 'triumph', 'fell', 'dies', 'dead', 'overcome', 'bested'],\n  puzzle: ['solved', 'unlocked', 'discovered the solution', 'figured out', 'cracked', 'deciphered'],\n  quest: ['quest complete', 'mission accomplished', 'task finished', 'objective achieved', 'succeeded', 'completed'],\n  social: ['persuaded', 'convinced', 'negotiated', 'intimidated', 'charmed', 'befriended'],\n  discovery: ['found', 'discovered', 'uncovered', 'revealed', 'located', 'stumbled upon'],\n  milestone: ['reached', 'arrived at', 'entered the', 'escaped', 'survived'],\n};\n\n/**\n * Analyze DM narration to detect XP-worthy events\n */\nexport function detectXPEvents(narration) {\n  const lowerNarration = narration.toLowerCase();\n  const events = [];\n  \n  console.log(\"ðŸ” Analyzing for XP:\", lowerNarration.substring(0, 100) + \"...\");\n  \n  // Check for combat victories\n  if (XP_TRIGGERS.combat.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"âš”ï¸ Combat victory detected!\");\n    \n    // Determine difficulty based on context\n    if (lowerNarration.includes('boss') || lowerNarration.includes('dragon') || \n        lowerNarration.includes('ancient') || lowerNarration.includes('lord') ||\n        lowerNarration.includes('king') || lowerNarration.includes('queen')) {\n      events.push({ type: 'boss_fight', xp: XP_REWARDS.boss_fight, reason: 'Defeated a powerful boss' });\n      console.log(\"ðŸ‰ BOSS FIGHT XP!\");\n    } else if (lowerNarration.includes('fierce') || lowerNarration.includes('deadly') || \n               lowerNarration.includes('overwhelming') || lowerNarration.includes('horde')) {\n      events.push({ type: 'deadly_combat', xp: XP_REWARDS.deadly_combat, reason: 'Won a deadly battle' });\n    } else if (lowerNarration.includes('difficult') || lowerNarration.includes('challenging') ||\n               lowerNarration.includes('tough')) {\n      events.push({ type: 'hard_combat', xp: XP_REWARDS.hard_combat, reason: 'Overcame a hard combat' });\n    } else {\n      events.push({ type: 'medium_combat', xp: XP_REWARDS.medium_combat, reason: 'Won the battle' });\n    }\n  }\n  \n  // Check for quests\n  if (XP_TRIGGERS.quest.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ“œ Quest completion detected!\");\n    events.push({ type: 'quest_completed', xp: XP_REWARDS.quest_completed, reason: 'Completed a quest' });\n  }\n  \n  // Check for puzzles\n  if (XP_TRIGGERS.puzzle.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ§© Puzzle solved!\");\n    events.push({ type: 'puzzle_solved', xp: XP_REWARDS.puzzle_solved, reason: 'Solved a puzzle' });\n  }\n  \n  // Check for social encounters\n  if (XP_TRIGGERS.social.some(trigger => lowerNarration.includes(trigger))) {\n    console.log(\"ðŸ—£ï¸ Social encounter success!\");\n    events.push({ type: 'social_encounter', xp: XP_REWARDS.social_encounter, reason: 'Successful social interaction' });\n  }\n  \n  // Check for discoveries\n  if (XP_TRIGGERS.discovery.some(trigger => lowerNarration.includes(trigger))) {\n    if (lowerNarration.includes('secret') || lowerNarration.includes('hidden') || \n        lowerNarration.includes('ancient') || lowerNarration.includes('treasure')) {\n      console.log(\"ðŸ” Important discovery!\");\n      events.push({ type: 'discovery', xp: XP_REWARDS.discovery, reason: 'Made an important discovery' });\n    }\n  }\n  \n  console.log(`âœ¨ Total XP events found: ${events.length}`);\n  \n  return events;\n}\n\n/**\n * Award XP to entire party\n */\nexport function awardXPToParty(party, xpAmount, reason = 'Adventure progress') {\n  const results = {\n    partyUpdates: [],\n    levelUps: [],\n    totalXP: xpAmount\n  };\n  \n  party.forEach(character => {\n    const updatedChar = addExperience(character, xpAmount);\n    \n    results.partyUpdates.push(updatedChar);\n    \n    // Check if they leveled up\n    if (updatedChar.levelsGained && updatedChar.levelsGained > 0) {\n      results.levelUps.push({\n        name: character.name,\n        oldLevel: character.level,\n        newLevel: updatedChar.level,\n        levelsGained: updatedChar.levelsGained\n      });\n    }\n  });\n  \n  return results;\n}\n\n/**\n * Process XP from DM response\n */\nexport function processXPFromNarration(narration, party) {\n  const xpEvents = detectXPEvents(narration);\n  \n  if (xpEvents.length === 0) {\n    return null;\n  }\n  \n  // Sum all XP from detected events\n  const totalXP = xpEvents.reduce((sum, event) => sum + event.xp, 0);\n  const reasons = xpEvents.map(e => e.reason).join(', ');\n  \n  // Award to party\n  const results = awardXPToParty(party, totalXP, reasons);\n  \n  return {\n    ...results,\n    events: xpEvents,\n    message: `+${totalXP} XP: ${reasons}`\n  };\n}\n\n/**\n * Manual XP award (for DM to call explicitly)\n */\nexport function manualXPAward(party, xpAmount, reason = 'DM Award') {\n  return awardXPToParty(party, xpAmount, reason);\n}\n\n/**\n * Calculate party level average\n */\nexport function getPartyLevel(party) {\n  if (party.length === 0) return 1;\n  \n  const totalLevel = party.reduce((sum, char) => sum + char.level, 0);\n  return Math.round(totalLevel / party.length);\n}\n\n/**\n * Suggest XP rewards based on party level\n */\nexport function suggestXPReward(partyLevel, encounterType = 'medium_combat') {\n  const baseXP = XP_REWARDS[encounterType] || 100;\n  \n  // Scale with party level\n  const scaledXP = Math.round(baseXP * (1 + (partyLevel - 1) * 0.1));\n  \n  return scaledXP;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}