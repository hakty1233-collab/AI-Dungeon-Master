{"ast":null,"code":"// frontend/src/utils/spellSystem.js\n\n/**\n * D&D 5e Spell Casting System\n * Spell slots, prepared spells, spell book\n */\n\n/**\n * Spell Schools\n */\nexport const SPELL_SCHOOLS = {\n  ABJURATION: 'Abjuration',\n  CONJURATION: 'Conjuration',\n  DIVINATION: 'Divination',\n  ENCHANTMENT: 'Enchantment',\n  EVOCATION: 'Evocation',\n  ILLUSION: 'Illusion',\n  NECROMANCY: 'Necromancy',\n  TRANSMUTATION: 'Transmutation'\n};\n\n/**\n * Spell slot progression by class level (for full casters)\n */\nexport const SPELL_SLOTS_FULL_CASTER = {\n  1: [2, 0, 0, 0, 0, 0, 0, 0, 0],\n  2: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  3: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  4: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  5: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  6: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  7: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  8: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  9: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  10: [4, 3, 3, 3, 2, 0, 0, 0, 0],\n  11: [4, 3, 3, 3, 2, 1, 0, 0, 0],\n  12: [4, 3, 3, 3, 2, 1, 0, 0, 0],\n  13: [4, 3, 3, 3, 2, 1, 1, 0, 0],\n  14: [4, 3, 3, 3, 2, 1, 1, 0, 0],\n  15: [4, 3, 3, 3, 2, 1, 1, 1, 0],\n  16: [4, 3, 3, 3, 2, 1, 1, 1, 0],\n  17: [4, 3, 3, 3, 2, 1, 1, 1, 1],\n  18: [4, 3, 3, 3, 3, 1, 1, 1, 1],\n  19: [4, 3, 3, 3, 3, 2, 1, 1, 1],\n  20: [4, 3, 3, 3, 3, 2, 2, 1, 1]\n};\n\n/**\n * Half caster progression (Paladin, Ranger)\n */\nexport const SPELL_SLOTS_HALF_CASTER = {\n  1: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n  2: [2, 0, 0, 0, 0, 0, 0, 0, 0],\n  3: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  4: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  5: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  6: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  7: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  8: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  9: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  10: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  11: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  12: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  13: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  14: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  15: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  16: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  17: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  18: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  19: [4, 3, 3, 3, 2, 0, 0, 0, 0],\n  20: [4, 3, 3, 3, 2, 0, 0, 0, 0]\n};\n\n/**\n * Classes and their spellcasting type\n */\nexport const SPELLCASTING_CLASSES = {\n  Wizard: 'full',\n  Sorcerer: 'full',\n  Cleric: 'full',\n  Druid: 'full',\n  Bard: 'full',\n  Warlock: 'pact',\n  // Special case\n  Paladin: 'half',\n  Ranger: 'half',\n  Fighter: 'third',\n  // Eldritch Knight\n  Rogue: 'third' // Arcane Trickster\n};\n\n/**\n * Spell Database (100+ spells!)\n */\nexport const SPELL_DATABASE = {\n  // ==================== CANTRIPS (Level 0) ====================\n  fire_bolt: {\n    name: 'Fire Bolt',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A streak of fire that deals 1d10 fire damage.',\n    damage: '1d10',\n    damageType: 'fire',\n    scalingDamage: {\n      5: '2d10',\n      11: '3d10',\n      17: '4d10'\n    },\n    ritual: false,\n    concentration: false\n  },\n  mage_hand: {\n    name: 'Mage Hand',\n    level: 0,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: '30 feet',\n    components: 'V, S',\n    duration: '1 minute',\n    description: 'A spectral hand appears and can manipulate objects.',\n    ritual: false,\n    concentration: false\n  },\n  prestidigitation: {\n    name: 'Prestidigitation',\n    level: 0,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '10 feet',\n    components: 'V, S',\n    duration: 'Up to 1 hour',\n    description: 'Perform minor magical tricks.',\n    ritual: false,\n    concentration: false\n  },\n  light: {\n    name: 'Light',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, M',\n    duration: '1 hour',\n    description: 'Touch an object to make it glow with bright light.',\n    ritual: false,\n    concentration: false\n  },\n  sacred_flame: {\n    name: 'Sacred Flame',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Flame-like radiance descends on a creature, dealing 1d8 radiant damage.',\n    damage: '1d8',\n    damageType: 'radiant',\n    scalingDamage: {\n      5: '2d8',\n      11: '3d8',\n      17: '4d8'\n    },\n    ritual: false,\n    concentration: false\n  },\n  eldritch_blast: {\n    name: 'Eldritch Blast',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A beam of crackling energy that deals 1d10 force damage.',\n    damage: '1d10',\n    damageType: 'force',\n    scalingDamage: {\n      5: '2d10',\n      11: '3d10',\n      17: '4d10'\n    },\n    ritual: false,\n    concentration: false\n  },\n  // ==================== LEVEL 1 SPELLS ====================\n  magic_missile: {\n    name: 'Magic Missile',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Three glowing darts that automatically hit for 1d4+1 force damage each.',\n    damage: '3d4+3',\n    damageType: 'force',\n    upcastBonus: '+1 missile per level',\n    ritual: false,\n    concentration: false\n  },\n  shield: {\n    name: 'Shield',\n    level: 1,\n    school: SPELL_SCHOOLS.ABJURATION,\n    castingTime: '1 reaction',\n    range: 'Self',\n    components: 'V, S',\n    duration: '1 round',\n    description: 'Gain +5 to AC until the start of your next turn.',\n    ritual: false,\n    concentration: false\n  },\n  healing_word: {\n    name: 'Healing Word',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 bonus action',\n    range: '60 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Heal a creature for 1d4 + spellcasting modifier HP.',\n    healing: '1d4',\n    upcastBonus: '+1d4 per level',\n    ritual: false,\n    concentration: false\n  },\n  cure_wounds: {\n    name: 'Cure Wounds',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Heal a creature for 1d8 + spellcasting modifier HP.',\n    healing: '1d8',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n  thunderwave: {\n    name: 'Thunderwave',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (15-foot cube)',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A wave of thunderous force dealing 2d8 thunder damage.',\n    damage: '2d8',\n    damageType: 'thunder',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n  burning_hands: {\n    name: 'Burning Hands',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (15-foot cone)',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A thin sheet of flames dealing 3d6 fire damage.',\n    damage: '3d6',\n    damageType: 'fire',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n  detect_magic: {\n    name: 'Detect Magic',\n    level: 1,\n    school: SPELL_SCHOOLS.DIVINATION,\n    castingTime: '1 action',\n    range: 'Self',\n    components: 'V, S',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Sense the presence of magic within 30 feet.',\n    ritual: true,\n    concentration: true\n  },\n  sleep: {\n    name: 'Sleep',\n    level: 1,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '90 feet',\n    components: 'V, S, M',\n    duration: '1 minute',\n    description: 'Put creatures to sleep starting with lowest HP (5d8 HP worth).',\n    ritual: false,\n    concentration: false\n  },\n  // ==================== LEVEL 2 SPELLS ====================\n  scorching_ray: {\n    name: 'Scorching Ray',\n    level: 2,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Create three rays of fire, each dealing 2d6 fire damage.',\n    damage: '2d6',\n    damageType: 'fire',\n    upcastBonus: '+1 ray per level',\n    ritual: false,\n    concentration: false\n  },\n  misty_step: {\n    name: 'Misty Step',\n    level: 2,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 bonus action',\n    range: 'Self',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Teleport up to 30 feet to an unoccupied space you can see.',\n    ritual: false,\n    concentration: false\n  },\n  invisibility: {\n    name: 'Invisibility',\n    level: 2,\n    school: SPELL_SCHOOLS.ILLUSION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 hour',\n    description: 'A creature becomes invisible until it attacks or casts a spell.',\n    ritual: false,\n    concentration: true\n  },\n  hold_person: {\n    name: 'Hold Person',\n    level: 2,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Paralyze a humanoid target.',\n    ritual: false,\n    concentration: true\n  },\n  spiritual_weapon: {\n    name: 'Spiritual Weapon',\n    level: 2,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 bonus action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Create a floating weapon that deals 1d8 + spellcasting modifier force damage.',\n    damage: '1d8',\n    damageType: 'force',\n    upcastBonus: '+1d8 per 2 levels',\n    ritual: false,\n    concentration: true\n  },\n  // ==================== LEVEL 3 SPELLS ====================\n  fireball: {\n    name: 'Fireball',\n    level: 3,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '150 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A bright streak that explodes in a 20-foot radius, dealing 8d6 fire damage.',\n    damage: '8d6',\n    damageType: 'fire',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n  lightning_bolt: {\n    name: 'Lightning Bolt',\n    level: 3,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (100-foot line)',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A bolt of lightning in a 100-foot line dealing 8d6 lightning damage.',\n    damage: '8d6',\n    damageType: 'lightning',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n  counterspell: {\n    name: 'Counterspell',\n    level: 3,\n    school: SPELL_SCHOOLS.ABJURATION,\n    castingTime: '1 reaction',\n    range: '60 feet',\n    components: 'S',\n    duration: 'Instantaneous',\n    description: 'Interrupt a creature casting a spell of 3rd level or lower.',\n    ritual: false,\n    concentration: false\n  },\n  fly: {\n    name: 'Fly',\n    level: 3,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Grant a creature a flying speed of 60 feet.',\n    ritual: false,\n    concentration: true\n  },\n  haste: {\n    name: 'Haste',\n    level: 3,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '30 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Double speed, +2 AC, advantage on DEX saves, extra action.',\n    ritual: false,\n    concentration: true\n  },\n  // ==================== LEVEL 4 SPELLS ====================\n  greater_invisibility: {\n    name: 'Greater Invisibility',\n    level: 4,\n    school: SPELL_SCHOOLS.ILLUSION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S',\n    duration: 'Concentration, up to 1 minute',\n    description: 'A creature becomes invisible even when attacking or casting.',\n    ritual: false,\n    concentration: true\n  },\n  polymorph: {\n    name: 'Polymorph',\n    level: 4,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 hour',\n    description: 'Transform a creature into a beast with CR equal to or less than its level.',\n    ritual: false,\n    concentration: true\n  },\n  dimension_door: {\n    name: 'Dimension Door',\n    level: 4,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: '500 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Teleport yourself and up to one willing creature 500 feet.',\n    ritual: false,\n    concentration: false\n  },\n  ice_storm: {\n    name: 'Ice Storm',\n    level: 4,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '300 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'Hail falls in a 20-foot radius dealing 2d8 bludgeoning and 4d6 cold damage.',\n    damage: '2d8+4d6',\n    damageType: 'bludgeoning/cold',\n    ritual: false,\n    concentration: false\n  },\n  // ==================== LEVEL 5 SPELLS ====================\n  cone_of_cold: {\n    name: 'Cone of Cold',\n    level: 5,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (60-foot cone)',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A blast of cold air dealing 8d8 cold damage.',\n    damage: '8d8',\n    damageType: 'cold',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n  wall_of_force: {\n    name: 'Wall of Force',\n    level: 5,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Create an invisible wall of force that is impenetrable.',\n    ritual: false,\n    concentration: true\n  },\n  teleportation_circle: {\n    name: 'Teleportation Circle',\n    level: 5,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 minute',\n    range: '10 feet',\n    components: 'V, M',\n    duration: '1 round',\n    description: 'Create a portal to a permanent teleportation circle.',\n    ritual: false,\n    concentration: false\n  },\n  // ==================== LEVEL 6+ SPELLS ====================\n  chain_lightning: {\n    name: 'Chain Lightning',\n    level: 6,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '150 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'Lightning arcs to up to 4 targets, dealing 10d8 lightning damage.',\n    damage: '10d8',\n    damageType: 'lightning',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n  disintegrate: {\n    name: 'Disintegrate',\n    level: 6,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A thin green ray that deals 10d6+40 force damage.',\n    damage: '10d6+40',\n    damageType: 'force',\n    upcastBonus: '+3d6 per level',\n    ritual: false,\n    concentration: false\n  },\n  finger_of_death: {\n    name: 'Finger of Death',\n    level: 7,\n    school: SPELL_SCHOOLS.NECROMANCY,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Send negative energy dealing 7d8+30 necrotic damage.',\n    damage: '7d8+30',\n    damageType: 'necrotic',\n    ritual: false,\n    concentration: false\n  },\n  power_word_stun: {\n    name: 'Power Word Stun',\n    level: 8,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Stun a creature with 150 HP or fewer.',\n    ritual: false,\n    concentration: false\n  },\n  meteor_swarm: {\n    name: 'Meteor Swarm',\n    level: 9,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '1 mile',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Four meteors that each explode in 40-foot radius dealing 20d6 fire + 20d6 bludgeoning.',\n    damage: '20d6+20d6',\n    damageType: 'fire/bludgeoning',\n    ritual: false,\n    concentration: false\n  },\n  wish: {\n    name: 'Wish',\n    level: 9,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: 'Self',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'The most powerful spell. Replicate any spell of 8th level or lower, or alter reality.',\n    ritual: false,\n    concentration: false\n  }\n};\n\n/**\n * Get spells by level\n */\nexport function getSpellsByLevel(level) {\n  return Object.entries(SPELL_DATABASE).filter(([_, spell]) => spell.level === level).map(([key, spell]) => ({\n    key,\n    ...spell\n  }));\n}\n\n/**\n * Get spells by school\n */\nexport function getSpellsBySchool(school) {\n  return Object.entries(SPELL_DATABASE).filter(([_, spell]) => spell.school === school).map(([key, spell]) => ({\n    key,\n    ...spell\n  }));\n}\n\n/**\n * Get spell slots for character\n */\nexport function getSpellSlots(character) {\n  const spellcastingType = SPELLCASTING_CLASSES[character.class];\n  if (!spellcastingType) {\n    return [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n  if (spellcastingType === 'full') {\n    return SPELL_SLOTS_FULL_CASTER[character.level] || [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n  if (spellcastingType === 'half') {\n    return SPELL_SLOTS_HALF_CASTER[character.level] || [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n\n  // Warlock special case\n  if (spellcastingType === 'pact') {\n    const warlockSlots = {\n      1: [1, 0, 0, 0, 0],\n      2: [2, 0, 0, 0, 0],\n      3: [0, 2, 0, 0, 0],\n      4: [0, 2, 0, 0, 0],\n      5: [0, 0, 2, 0, 0],\n      6: [0, 0, 2, 0, 0],\n      7: [0, 0, 0, 2, 0],\n      8: [0, 0, 0, 2, 0],\n      9: [0, 0, 0, 0, 2],\n      10: [0, 0, 0, 0, 2],\n      11: [0, 0, 0, 0, 3],\n      12: [0, 0, 0, 0, 3],\n      13: [0, 0, 0, 0, 3],\n      14: [0, 0, 0, 0, 3],\n      15: [0, 0, 0, 0, 3],\n      16: [0, 0, 0, 0, 3],\n      17: [0, 0, 0, 0, 4],\n      18: [0, 0, 0, 0, 4],\n      19: [0, 0, 0, 0, 4],\n      20: [0, 0, 0, 0, 4]\n    };\n    return warlockSlots[character.level] || [0, 0, 0, 0, 0];\n  }\n  return [0, 0, 0, 0, 0, 0, 0, 0, 0];\n}\n\n/**\n * Check if character can cast spell\n */\nexport function canCastSpell(character, spell) {\n  var _character$spellSlots;\n  // Cantrips can always be cast\n  if (spell.level === 0) return true;\n\n  // Check if character has spell slots\n  const spellSlots = getSpellSlots(character);\n  const currentSlots = ((_character$spellSlots = character.spellSlots) === null || _character$spellSlots === void 0 ? void 0 : _character$spellSlots.current) || spellSlots;\n  return currentSlots[spell.level - 1] > 0;\n}\n\n/**\n * Cast a spell (uses spell slot)\n */\nexport function castSpell(character, spell, slotLevel = null) {\n  var _character$spellSlots2;\n  const level = slotLevel || spell.level;\n\n  // Cantrips don't use slots\n  if (spell.level === 0) {\n    return {\n      success: true,\n      character,\n      message: `Cast ${spell.name}!`\n    };\n  }\n\n  // Check if has slots\n  if (!canCastSpell(character, spell)) {\n    return {\n      success: false,\n      character,\n      message: `No spell slots remaining for level ${spell.level}!`\n    };\n  }\n\n  // Use slot\n  const spellSlots = getSpellSlots(character);\n  const currentSlots = ((_character$spellSlots2 = character.spellSlots) === null || _character$spellSlots2 === void 0 ? void 0 : _character$spellSlots2.current) || [...spellSlots];\n  currentSlots[level - 1] -= 1;\n  return {\n    success: true,\n    character: {\n      ...character,\n      spellSlots: {\n        max: spellSlots,\n        current: currentSlots\n      }\n    },\n    message: `Cast ${spell.name} using a level ${level} spell slot!`\n  };\n}\n\n/**\n * Rest and restore spell slots\n */\nexport function longRest(character) {\n  const spellSlots = getSpellSlots(character);\n  return {\n    ...character,\n    spellSlots: {\n      max: spellSlots,\n      current: [...spellSlots]\n    }\n  };\n}\nexport function prepareSpells(character, spellKeys) {\n  const spellcastingAbility = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[spellcastingAbility] - 10) / 2);\n  const maxPrepared = Math.max(1, character.level + modifier);\n  if (spellKeys.length > maxPrepared) {\n    return {\n      success: false,\n      character,\n      message: `Can only prepare ${maxPrepared} spells!`\n    };\n  }\n  return {\n    success: true,\n    character: {\n      ...character,\n      spells: {\n        ...character.spells,\n        prepared: spellKeys\n      }\n    },\n    message: `Prepared ${spellKeys.length} spells!`\n  };\n}\n\n/**\n * Get spellcasting ability for class\n */\nexport function getSpellcastingAbility(className) {\n  const abilities = {\n    Wizard: 'INT',\n    Sorcerer: 'CHA',\n    Warlock: 'CHA',\n    Bard: 'CHA',\n    Cleric: 'WIS',\n    Druid: 'WIS',\n    Paladin: 'CHA',\n    Ranger: 'WIS',\n    Fighter: 'INT',\n    Rogue: 'INT'\n  };\n  return abilities[className] || 'INT';\n}\n\n/**\n * Calculate spell save DC\n */\nexport function getSpellSaveDC(character) {\n  const ability = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[ability] - 10) / 2);\n  const proficiencyBonus = Math.floor((character.level - 1) / 4) + 2;\n  return 8 + proficiencyBonus + modifier;\n}\n\n/**\n * Calculate spell attack bonus\n */\nexport function getSpellAttackBonus(character) {\n  const ability = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[ability] - 10) / 2);\n  const proficiencyBonus = Math.floor((character.level - 1) / 4) + 2;\n  return proficiencyBonus + modifier;\n}\n\n/**\n * Learn a new spell (for known casters like Sorcerers)\n */\nexport function learnSpell(character, spellKey) {\n  var _character$spells;\n  const spell = SPELL_DATABASE[spellKey];\n  if (!spell) return {\n    success: false,\n    character,\n    message: 'Spell not found!'\n  };\n  const knownSpells = ((_character$spells = character.spells) === null || _character$spells === void 0 ? void 0 : _character$spells.known) || [];\n  if (knownSpells.includes(spellKey)) {\n    return {\n      success: false,\n      character,\n      message: 'Already know this spell!'\n    };\n  }\n  return {\n    success: true,\n    character: {\n      ...character,\n      spells: {\n        ...character.spells,\n        known: [...knownSpells, spellKey]\n      }\n    },\n    message: `Learned ${spell.name}!`\n  };\n}\n\n/**\n * Get available spell levels for character\n */\nexport function getAvailableSpellLevels(character) {\n  const slots = getSpellSlots(character);\n  const levels = [];\n\n  // Always have cantrips\n  levels.push(0);\n\n  // Add spell levels with slots\n  for (let i = 0; i < slots.length; i++) {\n    if (slots[i] > 0) {\n      levels.push(i + 1);\n    }\n  }\n  return levels;\n}\n\n/**\n * Check if class uses prepared spells\n */\nexport function usesPreparedSpells(className) {\n  return ['Wizard', 'Cleric', 'Druid', 'Paladin'].includes(className);\n}\n\n/**\n * Check if class uses known spells\n */\nexport function usesKnownSpells(className) {\n  return ['Sorcerer', 'Bard', 'Warlock', 'Ranger'].includes(className);\n}\n\n/**\n * Get spells accessible to character\n */\nexport function getAccessibleSpells(character) {\n  if (usesPreparedSpells(character.class)) {\n    var _character$spells2;\n    return ((_character$spells2 = character.spells) === null || _character$spells2 === void 0 ? void 0 : _character$spells2.prepared) || [];\n  }\n  if (usesKnownSpells(character.class)) {\n    var _character$spells3;\n    return ((_character$spells3 = character.spells) === null || _character$spells3 === void 0 ? void 0 : _character$spells3.known) || [];\n  }\n  return [];\n}\n\n/**\n * Initialize spells for character\n */\nexport function initializeSpells(character) {\n  const spellcastingType = SPELLCASTING_CLASSES[character.class];\n  if (!spellcastingType) {\n    return character; // Not a spellcaster\n  }\n  const spellSlots = getSpellSlots(character);\n\n  // Starting cantrips and spells by class\n  const startingSpells = getStartingSpells(character.class);\n  return {\n    ...character,\n    spells: {\n      known: startingSpells.known || [],\n      prepared: startingSpells.prepared || [],\n      cantrips: startingSpells.cantrips || []\n    },\n    spellSlots: {\n      max: spellSlots,\n      current: [...spellSlots]\n    }\n  };\n}\n\n/**\n * Get starting spells for class\n */\nfunction getStartingSpells(className) {\n  const starting = {\n    Wizard: {\n      cantrips: ['fire_bolt', 'mage_hand', 'prestidigitation'],\n      known: ['magic_missile', 'shield', 'detect_magic', 'burning_hands', 'sleep', 'thunderwave'],\n      prepared: []\n    },\n    Sorcerer: {\n      cantrips: ['fire_bolt', 'light', 'prestidigitation', 'mage_hand'],\n      known: ['magic_missile', 'shield', 'burning_hands', 'thunderwave'],\n      prepared: []\n    },\n    Cleric: {\n      cantrips: ['sacred_flame', 'light', 'prestidigitation'],\n      known: [],\n      prepared: ['cure_wounds', 'healing_word', 'shield', 'detect_magic']\n    },\n    Druid: {\n      cantrips: ['prestidigitation', 'light'],\n      known: [],\n      prepared: ['cure_wounds', 'healing_word', 'detect_magic', 'thunderwave']\n    },\n    Bard: {\n      cantrips: ['prestidigitation', 'light', 'mage_hand'],\n      known: ['cure_wounds', 'healing_word', 'sleep', 'thunderwave'],\n      prepared: []\n    },\n    Warlock: {\n      cantrips: ['eldritch_blast', 'prestidigitation'],\n      known: ['magic_missile', 'burning_hands'],\n      prepared: []\n    },\n    Paladin: {\n      cantrips: [],\n      known: [],\n      prepared: ['cure_wounds', 'shield']\n    },\n    Ranger: {\n      cantrips: [],\n      known: ['cure_wounds', 'healing_word'],\n      prepared: []\n    }\n  };\n  return starting[className] || {\n    cantrips: [],\n    known: [],\n    prepared: []\n  };\n}\n\n/**\n * Calculate damage for spell\n */\nexport function calculateSpellDamage(spell, characterLevel, upcastLevel = null) {\n  if (!spell.damage) return null;\n\n  // For cantrips, use scaling damage\n  if (spell.level === 0 && spell.scalingDamage) {\n    for (const [level, damage] of Object.entries(spell.scalingDamage).reverse()) {\n      if (characterLevel >= parseInt(level)) {\n        return damage;\n      }\n    }\n  }\n\n  // For leveled spells with upcasting\n  if (upcastLevel && upcastLevel > spell.level && spell.upcastBonus) {\n    const levelDiff = upcastLevel - spell.level;\n    // Parse damage (e.g., \"3d6\" -> 3 dice of d6)\n    const match = spell.damage.match(/(\\d+)d(\\d+)/);\n    if (match) {\n      const [, numDice, dieSize] = match;\n      const extraDice = levelDiff;\n      return `${parseInt(numDice) + extraDice}d${dieSize}`;\n    }\n  }\n  return spell.damage;\n}\n\n/**\n * Roll spell damage\n */\nexport function rollSpellDamage(damageString) {\n  const match = damageString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return {\n    total: 0,\n    rolls: []\n  };\n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  return {\n    total,\n    rolls,\n    modifier: modifier || '+0'\n  };\n}","map":{"version":3,"names":["SPELL_SCHOOLS","ABJURATION","CONJURATION","DIVINATION","ENCHANTMENT","EVOCATION","ILLUSION","NECROMANCY","TRANSMUTATION","SPELL_SLOTS_FULL_CASTER","SPELL_SLOTS_HALF_CASTER","SPELLCASTING_CLASSES","Wizard","Sorcerer","Cleric","Druid","Bard","Warlock","Paladin","Ranger","Fighter","Rogue","SPELL_DATABASE","fire_bolt","name","level","school","castingTime","range","components","duration","description","damage","damageType","scalingDamage","ritual","concentration","mage_hand","prestidigitation","light","sacred_flame","eldritch_blast","magic_missile","upcastBonus","shield","healing_word","healing","cure_wounds","thunderwave","burning_hands","detect_magic","sleep","scorching_ray","misty_step","invisibility","hold_person","spiritual_weapon","fireball","lightning_bolt","counterspell","fly","haste","greater_invisibility","polymorph","dimension_door","ice_storm","cone_of_cold","wall_of_force","teleportation_circle","chain_lightning","disintegrate","finger_of_death","power_word_stun","meteor_swarm","wish","getSpellsByLevel","Object","entries","filter","_","spell","map","key","getSpellsBySchool","getSpellSlots","character","spellcastingType","class","warlockSlots","canCastSpell","_character$spellSlots","spellSlots","currentSlots","current","castSpell","slotLevel","_character$spellSlots2","success","message","max","longRest","prepareSpells","spellKeys","spellcastingAbility","getSpellcastingAbility","modifier","Math","floor","abilities","maxPrepared","length","spells","prepared","className","getSpellSaveDC","ability","proficiencyBonus","getSpellAttackBonus","learnSpell","spellKey","_character$spells","knownSpells","known","includes","getAvailableSpellLevels","slots","levels","push","i","usesPreparedSpells","usesKnownSpells","getAccessibleSpells","_character$spells2","_character$spells3","initializeSpells","startingSpells","getStartingSpells","cantrips","starting","calculateSpellDamage","characterLevel","upcastLevel","reverse","parseInt","levelDiff","match","numDice","dieSize","extraDice","rollSpellDamage","damageString","total","rolls","roll","random"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/spellSystem.js"],"sourcesContent":["// frontend/src/utils/spellSystem.js\n\n/**\n * D&D 5e Spell Casting System\n * Spell slots, prepared spells, spell book\n */\n\n/**\n * Spell Schools\n */\nexport const SPELL_SCHOOLS = {\n  ABJURATION: 'Abjuration',\n  CONJURATION: 'Conjuration',\n  DIVINATION: 'Divination',\n  ENCHANTMENT: 'Enchantment',\n  EVOCATION: 'Evocation',\n  ILLUSION: 'Illusion',\n  NECROMANCY: 'Necromancy',\n  TRANSMUTATION: 'Transmutation'\n};\n\n/**\n * Spell slot progression by class level (for full casters)\n */\nexport const SPELL_SLOTS_FULL_CASTER = {\n  1: [2, 0, 0, 0, 0, 0, 0, 0, 0],\n  2: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  3: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  4: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  5: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  6: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  7: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  8: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  9: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  10: [4, 3, 3, 3, 2, 0, 0, 0, 0],\n  11: [4, 3, 3, 3, 2, 1, 0, 0, 0],\n  12: [4, 3, 3, 3, 2, 1, 0, 0, 0],\n  13: [4, 3, 3, 3, 2, 1, 1, 0, 0],\n  14: [4, 3, 3, 3, 2, 1, 1, 0, 0],\n  15: [4, 3, 3, 3, 2, 1, 1, 1, 0],\n  16: [4, 3, 3, 3, 2, 1, 1, 1, 0],\n  17: [4, 3, 3, 3, 2, 1, 1, 1, 1],\n  18: [4, 3, 3, 3, 3, 1, 1, 1, 1],\n  19: [4, 3, 3, 3, 3, 2, 1, 1, 1],\n  20: [4, 3, 3, 3, 3, 2, 2, 1, 1]\n};\n\n/**\n * Half caster progression (Paladin, Ranger)\n */\nexport const SPELL_SLOTS_HALF_CASTER = {\n  1: [0, 0, 0, 0, 0, 0, 0, 0, 0],\n  2: [2, 0, 0, 0, 0, 0, 0, 0, 0],\n  3: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  4: [3, 0, 0, 0, 0, 0, 0, 0, 0],\n  5: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  6: [4, 2, 0, 0, 0, 0, 0, 0, 0],\n  7: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  8: [4, 3, 0, 0, 0, 0, 0, 0, 0],\n  9: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  10: [4, 3, 2, 0, 0, 0, 0, 0, 0],\n  11: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  12: [4, 3, 3, 0, 0, 0, 0, 0, 0],\n  13: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  14: [4, 3, 3, 1, 0, 0, 0, 0, 0],\n  15: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  16: [4, 3, 3, 2, 0, 0, 0, 0, 0],\n  17: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  18: [4, 3, 3, 3, 1, 0, 0, 0, 0],\n  19: [4, 3, 3, 3, 2, 0, 0, 0, 0],\n  20: [4, 3, 3, 3, 2, 0, 0, 0, 0]\n};\n\n/**\n * Classes and their spellcasting type\n */\nexport const SPELLCASTING_CLASSES = {\n  Wizard: 'full',\n  Sorcerer: 'full',\n  Cleric: 'full',\n  Druid: 'full',\n  Bard: 'full',\n  Warlock: 'pact', // Special case\n  Paladin: 'half',\n  Ranger: 'half',\n  Fighter: 'third', // Eldritch Knight\n  Rogue: 'third'    // Arcane Trickster\n};\n\n/**\n * Spell Database (100+ spells!)\n */\nexport const SPELL_DATABASE = {\n  // ==================== CANTRIPS (Level 0) ====================\n  fire_bolt: {\n    name: 'Fire Bolt',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A streak of fire that deals 1d10 fire damage.',\n    damage: '1d10',\n    damageType: 'fire',\n    scalingDamage: { 5: '2d10', 11: '3d10', 17: '4d10' },\n    ritual: false,\n    concentration: false\n  },\n\n  mage_hand: {\n    name: 'Mage Hand',\n    level: 0,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: '30 feet',\n    components: 'V, S',\n    duration: '1 minute',\n    description: 'A spectral hand appears and can manipulate objects.',\n    ritual: false,\n    concentration: false\n  },\n\n  prestidigitation: {\n    name: 'Prestidigitation',\n    level: 0,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '10 feet',\n    components: 'V, S',\n    duration: 'Up to 1 hour',\n    description: 'Perform minor magical tricks.',\n    ritual: false,\n    concentration: false\n  },\n\n  light: {\n    name: 'Light',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, M',\n    duration: '1 hour',\n    description: 'Touch an object to make it glow with bright light.',\n    ritual: false,\n    concentration: false\n  },\n\n  sacred_flame: {\n    name: 'Sacred Flame',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Flame-like radiance descends on a creature, dealing 1d8 radiant damage.',\n    damage: '1d8',\n    damageType: 'radiant',\n    scalingDamage: { 5: '2d8', 11: '3d8', 17: '4d8' },\n    ritual: false,\n    concentration: false\n  },\n\n  eldritch_blast: {\n    name: 'Eldritch Blast',\n    level: 0,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A beam of crackling energy that deals 1d10 force damage.',\n    damage: '1d10',\n    damageType: 'force',\n    scalingDamage: { 5: '2d10', 11: '3d10', 17: '4d10' },\n    ritual: false,\n    concentration: false\n  },\n\n  // ==================== LEVEL 1 SPELLS ====================\n  magic_missile: {\n    name: 'Magic Missile',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Three glowing darts that automatically hit for 1d4+1 force damage each.',\n    damage: '3d4+3',\n    damageType: 'force',\n    upcastBonus: '+1 missile per level',\n    ritual: false,\n    concentration: false\n  },\n\n  shield: {\n    name: 'Shield',\n    level: 1,\n    school: SPELL_SCHOOLS.ABJURATION,\n    castingTime: '1 reaction',\n    range: 'Self',\n    components: 'V, S',\n    duration: '1 round',\n    description: 'Gain +5 to AC until the start of your next turn.',\n    ritual: false,\n    concentration: false\n  },\n\n  healing_word: {\n    name: 'Healing Word',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 bonus action',\n    range: '60 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Heal a creature for 1d4 + spellcasting modifier HP.',\n    healing: '1d4',\n    upcastBonus: '+1d4 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  cure_wounds: {\n    name: 'Cure Wounds',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Heal a creature for 1d8 + spellcasting modifier HP.',\n    healing: '1d8',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  thunderwave: {\n    name: 'Thunderwave',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (15-foot cube)',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A wave of thunderous force dealing 2d8 thunder damage.',\n    damage: '2d8',\n    damageType: 'thunder',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  burning_hands: {\n    name: 'Burning Hands',\n    level: 1,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (15-foot cone)',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'A thin sheet of flames dealing 3d6 fire damage.',\n    damage: '3d6',\n    damageType: 'fire',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  detect_magic: {\n    name: 'Detect Magic',\n    level: 1,\n    school: SPELL_SCHOOLS.DIVINATION,\n    castingTime: '1 action',\n    range: 'Self',\n    components: 'V, S',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Sense the presence of magic within 30 feet.',\n    ritual: true,\n    concentration: true\n  },\n\n  sleep: {\n    name: 'Sleep',\n    level: 1,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '90 feet',\n    components: 'V, S, M',\n    duration: '1 minute',\n    description: 'Put creatures to sleep starting with lowest HP (5d8 HP worth).',\n    ritual: false,\n    concentration: false\n  },\n\n  // ==================== LEVEL 2 SPELLS ====================\n  scorching_ray: {\n    name: 'Scorching Ray',\n    level: 2,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Create three rays of fire, each dealing 2d6 fire damage.',\n    damage: '2d6',\n    damageType: 'fire',\n    upcastBonus: '+1 ray per level',\n    ritual: false,\n    concentration: false\n  },\n\n  misty_step: {\n    name: 'Misty Step',\n    level: 2,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 bonus action',\n    range: 'Self',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Teleport up to 30 feet to an unoccupied space you can see.',\n    ritual: false,\n    concentration: false\n  },\n\n  invisibility: {\n    name: 'Invisibility',\n    level: 2,\n    school: SPELL_SCHOOLS.ILLUSION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 hour',\n    description: 'A creature becomes invisible until it attacks or casts a spell.',\n    ritual: false,\n    concentration: true\n  },\n\n  hold_person: {\n    name: 'Hold Person',\n    level: 2,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Paralyze a humanoid target.',\n    ritual: false,\n    concentration: true\n  },\n\n  spiritual_weapon: {\n    name: 'Spiritual Weapon',\n    level: 2,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 bonus action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Create a floating weapon that deals 1d8 + spellcasting modifier force damage.',\n    damage: '1d8',\n    damageType: 'force',\n    upcastBonus: '+1d8 per 2 levels',\n    ritual: false,\n    concentration: true\n  },\n\n  // ==================== LEVEL 3 SPELLS ====================\n  fireball: {\n    name: 'Fireball',\n    level: 3,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '150 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A bright streak that explodes in a 20-foot radius, dealing 8d6 fire damage.',\n    damage: '8d6',\n    damageType: 'fire',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  lightning_bolt: {\n    name: 'Lightning Bolt',\n    level: 3,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (100-foot line)',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A bolt of lightning in a 100-foot line dealing 8d6 lightning damage.',\n    damage: '8d6',\n    damageType: 'lightning',\n    upcastBonus: '+1d6 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  counterspell: {\n    name: 'Counterspell',\n    level: 3,\n    school: SPELL_SCHOOLS.ABJURATION,\n    castingTime: '1 reaction',\n    range: '60 feet',\n    components: 'S',\n    duration: 'Instantaneous',\n    description: 'Interrupt a creature casting a spell of 3rd level or lower.',\n    ritual: false,\n    concentration: false\n  },\n\n  fly: {\n    name: 'Fly',\n    level: 3,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Grant a creature a flying speed of 60 feet.',\n    ritual: false,\n    concentration: true\n  },\n\n  haste: {\n    name: 'Haste',\n    level: 3,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '30 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 minute',\n    description: 'Double speed, +2 AC, advantage on DEX saves, extra action.',\n    ritual: false,\n    concentration: true\n  },\n\n  // ==================== LEVEL 4 SPELLS ====================\n  greater_invisibility: {\n    name: 'Greater Invisibility',\n    level: 4,\n    school: SPELL_SCHOOLS.ILLUSION,\n    castingTime: '1 action',\n    range: 'Touch',\n    components: 'V, S',\n    duration: 'Concentration, up to 1 minute',\n    description: 'A creature becomes invisible even when attacking or casting.',\n    ritual: false,\n    concentration: true\n  },\n\n  polymorph: {\n    name: 'Polymorph',\n    level: 4,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 1 hour',\n    description: 'Transform a creature into a beast with CR equal to or less than its level.',\n    ritual: false,\n    concentration: true\n  },\n\n  dimension_door: {\n    name: 'Dimension Door',\n    level: 4,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: '500 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Teleport yourself and up to one willing creature 500 feet.',\n    ritual: false,\n    concentration: false\n  },\n\n  ice_storm: {\n    name: 'Ice Storm',\n    level: 4,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '300 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'Hail falls in a 20-foot radius dealing 2d8 bludgeoning and 4d6 cold damage.',\n    damage: '2d8+4d6',\n    damageType: 'bludgeoning/cold',\n    ritual: false,\n    concentration: false\n  },\n\n  // ==================== LEVEL 5 SPELLS ====================\n  cone_of_cold: {\n    name: 'Cone of Cold',\n    level: 5,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: 'Self (60-foot cone)',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A blast of cold air dealing 8d8 cold damage.',\n    damage: '8d8',\n    damageType: 'cold',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  wall_of_force: {\n    name: 'Wall of Force',\n    level: 5,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '120 feet',\n    components: 'V, S, M',\n    duration: 'Concentration, up to 10 minutes',\n    description: 'Create an invisible wall of force that is impenetrable.',\n    ritual: false,\n    concentration: true\n  },\n\n  teleportation_circle: {\n    name: 'Teleportation Circle',\n    level: 5,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 minute',\n    range: '10 feet',\n    components: 'V, M',\n    duration: '1 round',\n    description: 'Create a portal to a permanent teleportation circle.',\n    ritual: false,\n    concentration: false\n  },\n\n  // ==================== LEVEL 6+ SPELLS ====================\n  chain_lightning: {\n    name: 'Chain Lightning',\n    level: 6,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '150 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'Lightning arcs to up to 4 targets, dealing 10d8 lightning damage.',\n    damage: '10d8',\n    damageType: 'lightning',\n    upcastBonus: '+1d8 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  disintegrate: {\n    name: 'Disintegrate',\n    level: 6,\n    school: SPELL_SCHOOLS.TRANSMUTATION,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S, M',\n    duration: 'Instantaneous',\n    description: 'A thin green ray that deals 10d6+40 force damage.',\n    damage: '10d6+40',\n    damageType: 'force',\n    upcastBonus: '+3d6 per level',\n    ritual: false,\n    concentration: false\n  },\n\n  finger_of_death: {\n    name: 'Finger of Death',\n    level: 7,\n    school: SPELL_SCHOOLS.NECROMANCY,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Send negative energy dealing 7d8+30 necrotic damage.',\n    damage: '7d8+30',\n    damageType: 'necrotic',\n    ritual: false,\n    concentration: false\n  },\n\n  power_word_stun: {\n    name: 'Power Word Stun',\n    level: 8,\n    school: SPELL_SCHOOLS.ENCHANTMENT,\n    castingTime: '1 action',\n    range: '60 feet',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'Stun a creature with 150 HP or fewer.',\n    ritual: false,\n    concentration: false\n  },\n\n  meteor_swarm: {\n    name: 'Meteor Swarm',\n    level: 9,\n    school: SPELL_SCHOOLS.EVOCATION,\n    castingTime: '1 action',\n    range: '1 mile',\n    components: 'V, S',\n    duration: 'Instantaneous',\n    description: 'Four meteors that each explode in 40-foot radius dealing 20d6 fire + 20d6 bludgeoning.',\n    damage: '20d6+20d6',\n    damageType: 'fire/bludgeoning',\n    ritual: false,\n    concentration: false\n  },\n\n  wish: {\n    name: 'Wish',\n    level: 9,\n    school: SPELL_SCHOOLS.CONJURATION,\n    castingTime: '1 action',\n    range: 'Self',\n    components: 'V',\n    duration: 'Instantaneous',\n    description: 'The most powerful spell. Replicate any spell of 8th level or lower, or alter reality.',\n    ritual: false,\n    concentration: false\n  }\n};\n\n/**\n * Get spells by level\n */\nexport function getSpellsByLevel(level) {\n  return Object.entries(SPELL_DATABASE)\n    .filter(([_, spell]) => spell.level === level)\n    .map(([key, spell]) => ({ key, ...spell }));\n}\n\n/**\n * Get spells by school\n */\nexport function getSpellsBySchool(school) {\n  return Object.entries(SPELL_DATABASE)\n    .filter(([_, spell]) => spell.school === school)\n    .map(([key, spell]) => ({ key, ...spell }));\n}\n\n/**\n * Get spell slots for character\n */\nexport function getSpellSlots(character) {\n  const spellcastingType = SPELLCASTING_CLASSES[character.class];\n  \n  if (!spellcastingType) {\n    return [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n  \n  if (spellcastingType === 'full') {\n    return SPELL_SLOTS_FULL_CASTER[character.level] || [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n  \n  if (spellcastingType === 'half') {\n    return SPELL_SLOTS_HALF_CASTER[character.level] || [0, 0, 0, 0, 0, 0, 0, 0, 0];\n  }\n  \n  // Warlock special case\n  if (spellcastingType === 'pact') {\n    const warlockSlots = {\n      1: [1, 0, 0, 0, 0],\n      2: [2, 0, 0, 0, 0],\n      3: [0, 2, 0, 0, 0],\n      4: [0, 2, 0, 0, 0],\n      5: [0, 0, 2, 0, 0],\n      6: [0, 0, 2, 0, 0],\n      7: [0, 0, 0, 2, 0],\n      8: [0, 0, 0, 2, 0],\n      9: [0, 0, 0, 0, 2],\n      10: [0, 0, 0, 0, 2],\n      11: [0, 0, 0, 0, 3],\n      12: [0, 0, 0, 0, 3],\n      13: [0, 0, 0, 0, 3],\n      14: [0, 0, 0, 0, 3],\n      15: [0, 0, 0, 0, 3],\n      16: [0, 0, 0, 0, 3],\n      17: [0, 0, 0, 0, 4],\n      18: [0, 0, 0, 0, 4],\n      19: [0, 0, 0, 0, 4],\n      20: [0, 0, 0, 0, 4]\n    };\n    return warlockSlots[character.level] || [0, 0, 0, 0, 0];\n  }\n  \n  return [0, 0, 0, 0, 0, 0, 0, 0, 0];\n}\n\n/**\n * Check if character can cast spell\n */\nexport function canCastSpell(character, spell) {\n  // Cantrips can always be cast\n  if (spell.level === 0) return true;\n  \n  // Check if character has spell slots\n  const spellSlots = getSpellSlots(character);\n  const currentSlots = character.spellSlots?.current || spellSlots;\n  \n  return currentSlots[spell.level - 1] > 0;\n}\n\n/**\n * Cast a spell (uses spell slot)\n */\nexport function castSpell(character, spell, slotLevel = null) {\n  const level = slotLevel || spell.level;\n  \n  // Cantrips don't use slots\n  if (spell.level === 0) {\n    return {\n      success: true,\n      character,\n      message: `Cast ${spell.name}!`\n    };\n  }\n  \n  // Check if has slots\n  if (!canCastSpell(character, spell)) {\n    return {\n      success: false,\n      character,\n      message: `No spell slots remaining for level ${spell.level}!`\n    };\n  }\n  \n  // Use slot\n  const spellSlots = getSpellSlots(character);\n  const currentSlots = character.spellSlots?.current || [...spellSlots];\n  currentSlots[level - 1] -= 1;\n  \n  return {\n    success: true,\n    character: {\n      ...character,\n      spellSlots: {\n        max: spellSlots,\n        current: currentSlots\n      }\n    },\n    message: `Cast ${spell.name} using a level ${level} spell slot!`\n  };\n}\n\n/**\n * Rest and restore spell slots\n */\nexport function longRest(character) {\n  const spellSlots = getSpellSlots(character);\n  \n  return {\n    ...character,\n    spellSlots: {\n      max: spellSlots,\n      current: [...spellSlots]   }\n  };\n}\n\nexport function prepareSpells(character, spellKeys) {\n  const spellcastingAbility = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[spellcastingAbility] - 10) / 2);\n  const maxPrepared = Math.max(1, character.level + modifier);\n  \n  if (spellKeys.length > maxPrepared) {\n    return {\n      success: false,\n      character,\n      message: `Can only prepare ${maxPrepared} spells!`\n    };\n  }\n  \n  return {\n    success: true,\n    character: {\n      ...character,\n      spells: {\n        ...character.spells,\n        prepared: spellKeys\n      }\n    },\n    message: `Prepared ${spellKeys.length} spells!`\n  };\n}\n\n/**\n * Get spellcasting ability for class\n */\nexport function getSpellcastingAbility(className) {\n  const abilities = {\n    Wizard: 'INT',\n    Sorcerer: 'CHA',\n    Warlock: 'CHA',\n    Bard: 'CHA',\n    Cleric: 'WIS',\n    Druid: 'WIS',\n    Paladin: 'CHA',\n    Ranger: 'WIS',\n    Fighter: 'INT',\n    Rogue: 'INT'\n  };\n  \n  return abilities[className] || 'INT';\n}\n\n/**\n * Calculate spell save DC\n */\nexport function getSpellSaveDC(character) {\n  const ability = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[ability] - 10) / 2);\n  const proficiencyBonus = Math.floor((character.level - 1) / 4) + 2;\n  \n  return 8 + proficiencyBonus + modifier;\n}\n\n/**\n * Calculate spell attack bonus\n */\nexport function getSpellAttackBonus(character) {\n  const ability = getSpellcastingAbility(character.class);\n  const modifier = Math.floor((character.abilities[ability] - 10) / 2);\n  const proficiencyBonus = Math.floor((character.level - 1) / 4) + 2;\n  \n  return proficiencyBonus + modifier;\n}\n\n/**\n * Learn a new spell (for known casters like Sorcerers)\n */\nexport function learnSpell(character, spellKey) {\n  const spell = SPELL_DATABASE[spellKey];\n  if (!spell) return { success: false, character, message: 'Spell not found!' };\n  \n  const knownSpells = character.spells?.known || [];\n  \n  if (knownSpells.includes(spellKey)) {\n    return { success: false, character, message: 'Already know this spell!' };\n  }\n  \n  return {\n    success: true,\n    character: {\n      ...character,\n      spells: {\n        ...character.spells,\n        known: [...knownSpells, spellKey]\n      }\n    },\n    message: `Learned ${spell.name}!`\n  };\n}\n\n/**\n * Get available spell levels for character\n */\nexport function getAvailableSpellLevels(character) {\n  const slots = getSpellSlots(character);\n  const levels = [];\n  \n  // Always have cantrips\n  levels.push(0);\n  \n  // Add spell levels with slots\n  for (let i = 0; i < slots.length; i++) {\n    if (slots[i] > 0) {\n      levels.push(i + 1);\n    }\n  }\n  \n  return levels;\n}\n\n/**\n * Check if class uses prepared spells\n */\nexport function usesPreparedSpells(className) {\n  return ['Wizard', 'Cleric', 'Druid', 'Paladin'].includes(className);\n}\n\n/**\n * Check if class uses known spells\n */\nexport function usesKnownSpells(className) {\n  return ['Sorcerer', 'Bard', 'Warlock', 'Ranger'].includes(className);\n}\n\n/**\n * Get spells accessible to character\n */\nexport function getAccessibleSpells(character) {\n  if (usesPreparedSpells(character.class)) {\n    return character.spells?.prepared || [];\n  }\n  \n  if (usesKnownSpells(character.class)) {\n    return character.spells?.known || [];\n  }\n  \n  return [];\n}\n\n/**\n * Initialize spells for character\n */\nexport function initializeSpells(character) {\n  const spellcastingType = SPELLCASTING_CLASSES[character.class];\n  \n  if (!spellcastingType) {\n    return character; // Not a spellcaster\n  }\n  \n  const spellSlots = getSpellSlots(character);\n  \n  // Starting cantrips and spells by class\n  const startingSpells = getStartingSpells(character.class);\n  \n  return {\n    ...character,\n    spells: {\n      known: startingSpells.known || [],\n      prepared: startingSpells.prepared || [],\n      cantrips: startingSpells.cantrips || []\n    },\n    spellSlots: {\n      max: spellSlots,\n      current: [...spellSlots]\n    }\n  };\n}\n\n/**\n * Get starting spells for class\n */\nfunction getStartingSpells(className) {\n  const starting = {\n    Wizard: {\n      cantrips: ['fire_bolt', 'mage_hand', 'prestidigitation'],\n      known: ['magic_missile', 'shield', 'detect_magic', 'burning_hands', 'sleep', 'thunderwave'],\n      prepared: []\n    },\n    Sorcerer: {\n      cantrips: ['fire_bolt', 'light', 'prestidigitation', 'mage_hand'],\n      known: ['magic_missile', 'shield', 'burning_hands', 'thunderwave'],\n      prepared: []\n    },\n    Cleric: {\n      cantrips: ['sacred_flame', 'light', 'prestidigitation'],\n      known: [],\n      prepared: ['cure_wounds', 'healing_word', 'shield', 'detect_magic']\n    },\n    Druid: {\n      cantrips: ['prestidigitation', 'light'],\n      known: [],\n      prepared: ['cure_wounds', 'healing_word', 'detect_magic', 'thunderwave']\n    },\n    Bard: {\n      cantrips: ['prestidigitation', 'light', 'mage_hand'],\n      known: ['cure_wounds', 'healing_word', 'sleep', 'thunderwave'],\n      prepared: []\n    },\n    Warlock: {\n      cantrips: ['eldritch_blast', 'prestidigitation'],\n      known: ['magic_missile', 'burning_hands'],\n      prepared: []\n    },\n    Paladin: {\n      cantrips: [],\n      known: [],\n      prepared: ['cure_wounds', 'shield']\n    },\n    Ranger: {\n      cantrips: [],\n      known: ['cure_wounds', 'healing_word'],\n      prepared: []\n    }\n  };\n  \n  return starting[className] || { cantrips: [], known: [], prepared: [] };\n}\n\n/**\n * Calculate damage for spell\n */\nexport function calculateSpellDamage(spell, characterLevel, upcastLevel = null) {\n  if (!spell.damage) return null;\n  \n  // For cantrips, use scaling damage\n  if (spell.level === 0 && spell.scalingDamage) {\n    for (const [level, damage] of Object.entries(spell.scalingDamage).reverse()) {\n      if (characterLevel >= parseInt(level)) {\n        return damage;\n      }\n    }\n  }\n  \n  // For leveled spells with upcasting\n  if (upcastLevel && upcastLevel > spell.level && spell.upcastBonus) {\n    const levelDiff = upcastLevel - spell.level;\n    // Parse damage (e.g., \"3d6\" -> 3 dice of d6)\n    const match = spell.damage.match(/(\\d+)d(\\d+)/);\n    if (match) {\n      const [, numDice, dieSize] = match;\n      const extraDice = levelDiff;\n      return `${parseInt(numDice) + extraDice}d${dieSize}`;\n    }\n  }\n  \n  return spell.damage;\n}\n\n/**\n * Roll spell damage\n */\nexport function rollSpellDamage(damageString) {\n  const match = damageString.match(/(\\d+)d(\\d+)([+-]\\d+)?/);\n  if (!match) return { total: 0, rolls: [] };\n  \n  const [, numDice, dieSize, modifier] = match;\n  let total = 0;\n  const rolls = [];\n  \n  for (let i = 0; i < parseInt(numDice); i++) {\n    const roll = Math.floor(Math.random() * parseInt(dieSize)) + 1;\n    rolls.push(roll);\n    total += roll;\n  }\n  \n  if (modifier) {\n    total += parseInt(modifier);\n  }\n  \n  return { total, rolls, modifier: modifier || '+0' };\n}"],"mappings":"AAAA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO,MAAMA,aAAa,GAAG;EAC3BC,UAAU,EAAE,YAAY;EACxBC,WAAW,EAAE,aAAa;EAC1BC,UAAU,EAAE,YAAY;EACxBC,WAAW,EAAE,aAAa;EAC1BC,SAAS,EAAE,WAAW;EACtBC,QAAQ,EAAE,UAAU;EACpBC,UAAU,EAAE,YAAY;EACxBC,aAAa,EAAE;AACjB,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,uBAAuB,GAAG;EACrC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AAChC,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAMC,uBAAuB,GAAG;EACrC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC9B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;EAC/B,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;AAChC,CAAC;;AAED;AACA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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}