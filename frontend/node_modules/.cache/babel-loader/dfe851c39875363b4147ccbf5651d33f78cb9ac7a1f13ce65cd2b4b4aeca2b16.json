{"ast":null,"code":"// frontend/src/utils/questSystem.js\n\n/**\n * Quest Tracker System\n * Detects, tracks, and manages quests\n */\n\n// Quest status types\nexport const QUEST_STATUS = {\n  ACTIVE: 'active',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n  ABANDONED: 'abandoned'\n};\n\n// Quest types\nexport const QUEST_TYPES = {\n  MAIN: 'main',\n  // Main story quests\n  SIDE: 'side',\n  // Side quests\n  PERSONAL: 'personal',\n  // Character-specific\n  FACTION: 'faction',\n  // Faction-related\n  BOUNTY: 'bounty' // Bounties/contracts\n};\n\n/**\n * Create a new quest\n */\nexport function createQuest({\n  title,\n  description,\n  giver = 'Unknown',\n  type = QUEST_TYPES.SIDE,\n  objectives = [],\n  rewards = {},\n  level = 1\n}) {\n  return {\n    id: `quest_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n    title,\n    description,\n    giver,\n    type,\n    objectives: objectives.map((obj, index) => ({\n      id: `obj_${index}`,\n      description: obj,\n      completed: false,\n      progress: 0,\n      required: 1\n    })),\n    rewards: {\n      xp: rewards.xp || 100,\n      gold: rewards.gold || 0,\n      items: rewards.items || [],\n      ...rewards\n    },\n    status: QUEST_STATUS.ACTIVE,\n    level,\n    startedAt: new Date().toISOString(),\n    completedAt: null,\n    notes: []\n  };\n}\n\n/**\n * Detect quest keywords in narration\n */\nconst QUEST_TRIGGERS = {\n  start: ['i need you to', 'i have a task', 'can you help', 'will you', 'quest for you', 'job for you', 'mission', 'seek out', 'retrieve', 'find', 'deliver', 'investigate', 'defeat', 'protect', 'escort', 'gather', 'collect'],\n  complete: ['quest complete', 'well done', 'you succeeded', 'task accomplished', 'mission accomplished', 'you\\'ve done it', 'excellent work', 'you have completed', 'objective achieved'],\n  update: ['you found', 'you collected', 'you defeated', 'progress', 'objective updated', 'one down', 'that\\'s one'],\n  fail: ['quest failed', 'you failed', 'too late', 'mission failed', 'lost forever', 'can no longer']\n};\n\n/**\n * Detect quest events in DM narration\n */\nexport function detectQuestEvents(narration) {\n  const lowerText = narration.toLowerCase();\n  const events = [];\n\n  // Check for quest start\n  if (QUEST_TRIGGERS.start.some(trigger => lowerText.includes(trigger))) {\n    const questData = extractQuestFromNarration(narration);\n    if (questData) {\n      events.push({\n        type: 'quest_started',\n        quest: questData\n      });\n    }\n  }\n\n  // Check for quest completion\n  if (QUEST_TRIGGERS.complete.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_completed',\n      keywords: QUEST_TRIGGERS.complete.filter(t => lowerText.includes(t))\n    });\n  }\n\n  // Check for quest updates\n  if (QUEST_TRIGGERS.update.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_updated',\n      keywords: QUEST_TRIGGERS.update.filter(t => lowerText.includes(t))\n    });\n  }\n\n  // Check for quest failure\n  if (QUEST_TRIGGERS.fail.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_failed',\n      keywords: QUEST_TRIGGERS.fail.filter(t => lowerText.includes(t))\n    });\n  }\n  return events;\n}\n\n/**\n * Extract quest details from narration (basic implementation)\n */\nfunction extractQuestFromNarration(narration) {\n  // Look for quest-like sentences\n  const sentences = narration.split(/[.!?]+/).map(s => s.trim()).filter(Boolean);\n  for (const sentence of sentences) {\n    const lower = sentence.toLowerCase();\n\n    // Try to find quest title and objective\n    if (QUEST_TRIGGERS.start.some(trigger => lower.includes(trigger))) {\n      // Extract what comes after the trigger\n      let title = 'New Quest';\n      let description = sentence;\n      let objectives = [];\n\n      // Try to extract objectives\n      if (lower.includes('find')) {\n        const match = sentence.match(/find\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Find ${match[1]}`;\n          objectives.push(`Find ${match[1]}`);\n        }\n      } else if (lower.includes('defeat') || lower.includes('kill')) {\n        const match = sentence.match(/(?:defeat|kill)\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Defeat ${match[1]}`;\n          objectives.push(`Defeat ${match[1]}`);\n        }\n      } else if (lower.includes('retrieve') || lower.includes('collect')) {\n        const match = sentence.match(/(?:retrieve|collect)\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Retrieve ${match[1]}`;\n          objectives.push(`Retrieve ${match[1]}`);\n        }\n      } else if (lower.includes('deliver')) {\n        const match = sentence.match(/deliver\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Deliver ${match[1]}`;\n          objectives.push(`Deliver ${match[1]}`);\n        }\n      }\n      if (objectives.length > 0) {\n        return {\n          title,\n          description,\n          objectives,\n          type: QUEST_TYPES.SIDE,\n          giver: 'Quest Giver',\n          rewards: {\n            xp: 150,\n            gold: 50\n          }\n        };\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Update quest objective\n */\nexport function updateQuestObjective(quest, objectiveId, progress = 1) {\n  const objectives = quest.objectives.map(obj => {\n    if (obj.id === objectiveId) {\n      const newProgress = Math.min(obj.required, obj.progress + progress);\n      return {\n        ...obj,\n        progress: newProgress,\n        completed: newProgress >= obj.required\n      };\n    }\n    return obj;\n  });\n\n  // Check if all objectives completed\n  const allCompleted = objectives.every(obj => obj.completed);\n  return {\n    ...quest,\n    objectives,\n    status: allCompleted ? QUEST_STATUS.COMPLETED : quest.status,\n    completedAt: allCompleted ? new Date().toISOString() : null\n  };\n}\n\n/**\n * Complete a quest\n */\nexport function completeQuest(quest) {\n  return {\n    ...quest,\n    status: QUEST_STATUS.COMPLETED,\n    completedAt: new Date().toISOString(),\n    objectives: quest.objectives.map(obj => ({\n      ...obj,\n      completed: true,\n      progress: obj.required\n    }))\n  };\n}\n\n/**\n * Fail a quest\n */\nexport function failQuest(quest, reason = '') {\n  return {\n    ...quest,\n    status: QUEST_STATUS.FAILED,\n    completedAt: new Date().toISOString(),\n    notes: [...quest.notes, `Failed: ${reason}`]\n  };\n}\n\n/**\n * Add note to quest\n */\nexport function addQuestNote(quest, note) {\n  return {\n    ...quest,\n    notes: [...quest.notes, {\n      text: note,\n      timestamp: new Date().toISOString()\n    }]\n  };\n}\n\n/**\n * Get active quests\n */\nexport function getActiveQuests(quests) {\n  return quests.filter(q => q.status === QUEST_STATUS.ACTIVE);\n}\n\n/**\n * Get completed quests\n */\nexport function getCompletedQuests(quests) {\n  return quests.filter(q => q.status === QUEST_STATUS.COMPLETED);\n}\n\n/**\n * Find quest by title (fuzzy match)\n */\nexport function findQuestByTitle(quests, title) {\n  const lowerTitle = title.toLowerCase();\n  return quests.find(q => q.title.toLowerCase().includes(lowerTitle) || lowerTitle.includes(q.title.toLowerCase()));\n}","map":{"version":3,"names":["QUEST_STATUS","ACTIVE","COMPLETED","FAILED","ABANDONED","QUEST_TYPES","MAIN","SIDE","PERSONAL","FACTION","BOUNTY","createQuest","title","description","giver","type","objectives","rewards","level","id","Date","now","Math","random","toString","substr","map","obj","index","completed","progress","required","xp","gold","items","status","startedAt","toISOString","completedAt","notes","QUEST_TRIGGERS","start","complete","update","fail","detectQuestEvents","narration","lowerText","toLowerCase","events","some","trigger","includes","questData","extractQuestFromNarration","push","quest","keywords","filter","t","sentences","split","s","trim","Boolean","sentence","lower","match","length","updateQuestObjective","objectiveId","newProgress","min","allCompleted","every","completeQuest","failQuest","reason","addQuestNote","note","text","timestamp","getActiveQuests","quests","q","getCompletedQuests","findQuestByTitle","lowerTitle","find"],"sources":["C:/Users/Hakty/Desktop/AI-Dungeon-Master/frontend/src/utils/questSystem.js"],"sourcesContent":["// frontend/src/utils/questSystem.js\n\n/**\n * Quest Tracker System\n * Detects, tracks, and manages quests\n */\n\n// Quest status types\nexport const QUEST_STATUS = {\n  ACTIVE: 'active',\n  COMPLETED: 'completed',\n  FAILED: 'failed',\n  ABANDONED: 'abandoned'\n};\n\n// Quest types\nexport const QUEST_TYPES = {\n  MAIN: 'main',        // Main story quests\n  SIDE: 'side',        // Side quests\n  PERSONAL: 'personal', // Character-specific\n  FACTION: 'faction',   // Faction-related\n  BOUNTY: 'bounty'     // Bounties/contracts\n};\n\n/**\n * Create a new quest\n */\nexport function createQuest({\n  title,\n  description,\n  giver = 'Unknown',\n  type = QUEST_TYPES.SIDE,\n  objectives = [],\n  rewards = {},\n  level = 1\n}) {\n  return {\n    id: `quest_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n    title,\n    description,\n    giver,\n    type,\n    objectives: objectives.map((obj, index) => ({\n      id: `obj_${index}`,\n      description: obj,\n      completed: false,\n      progress: 0,\n      required: 1\n    })),\n    rewards: {\n      xp: rewards.xp || 100,\n      gold: rewards.gold || 0,\n      items: rewards.items || [],\n      ...rewards\n    },\n    status: QUEST_STATUS.ACTIVE,\n    level,\n    startedAt: new Date().toISOString(),\n    completedAt: null,\n    notes: []\n  };\n}\n\n/**\n * Detect quest keywords in narration\n */\nconst QUEST_TRIGGERS = {\n  start: [\n    'i need you to', 'i have a task', 'can you help', 'will you',\n    'quest for you', 'job for you', 'mission', 'seek out',\n    'retrieve', 'find', 'deliver', 'investigate', 'defeat',\n    'protect', 'escort', 'gather', 'collect'\n  ],\n  complete: [\n    'quest complete', 'well done', 'you succeeded', 'task accomplished',\n    'mission accomplished', 'you\\'ve done it', 'excellent work',\n    'you have completed', 'objective achieved'\n  ],\n  update: [\n    'you found', 'you collected', 'you defeated', 'progress',\n    'objective updated', 'one down', 'that\\'s one'\n  ],\n  fail: [\n    'quest failed', 'you failed', 'too late', 'mission failed',\n    'lost forever', 'can no longer'\n  ]\n};\n\n/**\n * Detect quest events in DM narration\n */\nexport function detectQuestEvents(narration) {\n  const lowerText = narration.toLowerCase();\n  const events = [];\n\n  // Check for quest start\n  if (QUEST_TRIGGERS.start.some(trigger => lowerText.includes(trigger))) {\n    const questData = extractQuestFromNarration(narration);\n    if (questData) {\n      events.push({\n        type: 'quest_started',\n        quest: questData\n      });\n    }\n  }\n\n  // Check for quest completion\n  if (QUEST_TRIGGERS.complete.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_completed',\n      keywords: QUEST_TRIGGERS.complete.filter(t => lowerText.includes(t))\n    });\n  }\n\n  // Check for quest updates\n  if (QUEST_TRIGGERS.update.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_updated',\n      keywords: QUEST_TRIGGERS.update.filter(t => lowerText.includes(t))\n    });\n  }\n\n  // Check for quest failure\n  if (QUEST_TRIGGERS.fail.some(trigger => lowerText.includes(trigger))) {\n    events.push({\n      type: 'quest_failed',\n      keywords: QUEST_TRIGGERS.fail.filter(t => lowerText.includes(t))\n    });\n  }\n\n  return events;\n}\n\n/**\n * Extract quest details from narration (basic implementation)\n */\nfunction extractQuestFromNarration(narration) {\n  // Look for quest-like sentences\n  const sentences = narration.split(/[.!?]+/).map(s => s.trim()).filter(Boolean);\n  \n  for (const sentence of sentences) {\n    const lower = sentence.toLowerCase();\n    \n    // Try to find quest title and objective\n    if (QUEST_TRIGGERS.start.some(trigger => lower.includes(trigger))) {\n      // Extract what comes after the trigger\n      let title = 'New Quest';\n      let description = sentence;\n      let objectives = [];\n      \n      // Try to extract objectives\n      if (lower.includes('find')) {\n        const match = sentence.match(/find\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Find ${match[1]}`;\n          objectives.push(`Find ${match[1]}`);\n        }\n      } else if (lower.includes('defeat') || lower.includes('kill')) {\n        const match = sentence.match(/(?:defeat|kill)\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Defeat ${match[1]}`;\n          objectives.push(`Defeat ${match[1]}`);\n        }\n      } else if (lower.includes('retrieve') || lower.includes('collect')) {\n        const match = sentence.match(/(?:retrieve|collect)\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Retrieve ${match[1]}`;\n          objectives.push(`Retrieve ${match[1]}`);\n        }\n      } else if (lower.includes('deliver')) {\n        const match = sentence.match(/deliver\\s+(?:the\\s+)?([^,.!?]+)/i);\n        if (match) {\n          title = `Deliver ${match[1]}`;\n          objectives.push(`Deliver ${match[1]}`);\n        }\n      }\n      \n      if (objectives.length > 0) {\n        return {\n          title,\n          description,\n          objectives,\n          type: QUEST_TYPES.SIDE,\n          giver: 'Quest Giver',\n          rewards: { xp: 150, gold: 50 }\n        };\n      }\n    }\n  }\n  \n  return null;\n}\n\n/**\n * Update quest objective\n */\nexport function updateQuestObjective(quest, objectiveId, progress = 1) {\n  const objectives = quest.objectives.map(obj => {\n    if (obj.id === objectiveId) {\n      const newProgress = Math.min(obj.required, obj.progress + progress);\n      return {\n        ...obj,\n        progress: newProgress,\n        completed: newProgress >= obj.required\n      };\n    }\n    return obj;\n  });\n\n  // Check if all objectives completed\n  const allCompleted = objectives.every(obj => obj.completed);\n  \n  return {\n    ...quest,\n    objectives,\n    status: allCompleted ? QUEST_STATUS.COMPLETED : quest.status,\n    completedAt: allCompleted ? new Date().toISOString() : null\n  };\n}\n\n/**\n * Complete a quest\n */\nexport function completeQuest(quest) {\n  return {\n    ...quest,\n    status: QUEST_STATUS.COMPLETED,\n    completedAt: new Date().toISOString(),\n    objectives: quest.objectives.map(obj => ({\n      ...obj,\n      completed: true,\n      progress: obj.required\n    }))\n  };\n}\n\n/**\n * Fail a quest\n */\nexport function failQuest(quest, reason = '') {\n  return {\n    ...quest,\n    status: QUEST_STATUS.FAILED,\n    completedAt: new Date().toISOString(),\n    notes: [...quest.notes, `Failed: ${reason}`]\n  };\n}\n\n/**\n * Add note to quest\n */\nexport function addQuestNote(quest, note) {\n  return {\n    ...quest,\n    notes: [...quest.notes, {\n      text: note,\n      timestamp: new Date().toISOString()\n    }]\n  };\n}\n\n/**\n * Get active quests\n */\nexport function getActiveQuests(quests) {\n  return quests.filter(q => q.status === QUEST_STATUS.ACTIVE);\n}\n\n/**\n * Get completed quests\n */\nexport function getCompletedQuests(quests) {\n  return quests.filter(q => q.status === QUEST_STATUS.COMPLETED);\n}\n\n/**\n * Find quest by title (fuzzy match)\n */\nexport function findQuestByTitle(quests, title) {\n  const lowerTitle = title.toLowerCase();\n  return quests.find(q => \n    q.title.toLowerCase().includes(lowerTitle) ||\n    lowerTitle.includes(q.title.toLowerCase())\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}